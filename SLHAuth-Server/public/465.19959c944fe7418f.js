(self.webpackChunkSLHApp=self.webpackChunkSLHApp||[]).push([[465],{5465:(G,o,P)=>{"use strict";P.r(o),P.d(o,{MyleagueModule:()=>Be});var i=P(6895),O=P(9299),w=P(4006),r=P(4650),E=P(6667),T=P(6518),y=P(4859),N=P(7392),W=P(4850),V=P(3546),D=P(782),H=P(1572),_=P(9549),x=P(4144),b=P(1576);function C(ee,ne){1&ee&&(r.TgZ(0,"mat-grid-list",2)(1,"mat-grid-tile"),r._UZ(2,"mat-spinner"),r.qZA()())}function A(ee,ne){1&ee&&(r.TgZ(0,"span",11),r._uU(1,"Los a\xf1os de contrato solo pueden ser de 1 a 3 "),r.qZA())}function v(ee,ne){if(1&ee){const J=r.EpF();r.TgZ(0,"div",12)(1,"div",13)(2,"button",14)(3,"mat-icon"),r._uU(4,"cancel"),r.qZA(),r._uU(5,"Cancelar"),r.qZA()(),r.TgZ(6,"div",13)(7,"button",15),r.NdJ("click",function(){r.CHM(J);const Me=r.oxw(2);return r.KtG(Me.pujar())})("click",function(){r.CHM(J);const Me=r.oxw(2);return r.KtG(Me.openInfo())}),r.TgZ(8,"mat-icon",16),r._uU(9,"check_circle"),r.qZA(),r._uU(10,"Fichar"),r.qZA()()()}if(2&ee){const J=r.oxw(2);r.xp6(7),r.Q6J("disabled",J.pujaFAForm.invalid)}}function t(ee,ne){if(1&ee&&(r.TgZ(0,"mat-card-content")(1,"mat-card-header")(2,"mat-card-title"),r._uU(3," Resumen de la operacion : "),r.qZA()(),r._UZ(4,"br")(5,"mat-divider"),r.TgZ(6,"mat-card-actions")(7,"button",17),r._uU(8," Nombre: "),r.qZA(),r.TgZ(9,"button",18),r._uU(10),r.qZA(),r.TgZ(11,"button",17),r._uU(12," Salario: "),r.qZA(),r.TgZ(13,"button",19),r._uU(14),r.qZA(),r.TgZ(15,"button",17),r._uU(16," A\xf1os: "),r.qZA(),r.TgZ(17,"button",19),r._uU(18),r.qZA(),r.TgZ(19,"button",17),r._uU(20," Equipo:"),r.qZA(),r.TgZ(21,"button",18),r._uU(22),r.qZA()(),r._UZ(23,"mat-divider")(24,"br"),r.TgZ(25,"mat-card",20)(26,"button",21)(27,"mat-icon"),r._uU(28,"navigate_next"),r.qZA(),r._uU(29,"Continuar"),r.qZA()()()),2&ee){const J=r.oxw(2);r.xp6(10),r.Oqu(J.pujaForm.PLAYER),r.xp6(4),r.hij(" ",J.pujaForm.SALARIO," "),r.xp6(4),r.hij(" ",J.pujaForm.YEARS,""),r.xp6(4),r.hij(" ",J.EQUIPOOffer,"")}}function n(ee,ne){if(1&ee){const J=r.EpF();r.TgZ(0,"mat-card")(1,"div",3)(2,"mat-card-header")(3,"mat-card-title")(4,"small"),r._uU(5,"Firmar contrato a: "),r.qZA(),r._UZ(6,"br"),r.TgZ(7,"div",4),r._uU(8),r.qZA()()(),r._UZ(9,"br")(10,"mat-divider")(11,"br"),r.TgZ(12,"mat-card-content")(13,"form",5),r.NdJ("ngSubmit",function(){r.CHM(J);const Me=r.oxw();return r.KtG(Me.guardarPuja())}),r.TgZ(14,"mat-form-field")(15,"mat-label"),r._uU(16,"Salario"),r.qZA(),r._UZ(17,"input",6),r.qZA(),r._UZ(18,"br"),r.TgZ(19,"mat-form-field")(20,"mat-label"),r._uU(21,"A\xf1os"),r.qZA(),r._UZ(22,"input",7),r.YNc(23,A,2,0,"span",8),r.qZA()()()(),r.TgZ(24,"mat-card-actions"),r.YNc(25,v,11,1,"div",9),r.qZA()(),r.TgZ(26,"div",3)(27,"mat-card"),r.YNc(28,t,30,4,"mat-card-content",10),r.qZA()()}if(2&ee){const J=r.oxw();r.xp6(8),r.hij(" ",J.PLAYER," "),r.xp6(5),r.Q6J("formGroup",J.pujaFAForm),r.xp6(10),r.Q6J("ngIf",J.camposNoValidos("years")),r.xp6(2),r.Q6J("ngIf",!J.pujaForm),r.xp6(3),r.Q6J("ngIf",J.pujaForm)}}class h{constructor(ne,J,Se,Me){this.fb=ne,this.infogmS=J,this.authservice=Se,this.route=Me,this.pujaFAForm=this.fb.group({salarioOffer:["2",[w.kI.required,w.kI.min(1),w.kI.max(30)]],years:["3",[w.kI.required,w.kI.min(1),w.kI.max(3)]]}),this.pujaFormData=!1,this.infopuja=!1,this.mySLHnews=[]}ngOnInit(){let ne=this.route.snapshot.paramMap.get("PLAYER");this.PLAYER=ne,this.infogmS.getInfoGmByEmail(this.authservice.user.email).subscribe(Se=>{this.EQUIPOOffer=Se.EQUIPO,this.TEAM=Se.AKA}),(this.PLAYER||this.EQUIPOOffer)&&(this.pujaFormData=!0)}pujar(){let ne=new Date;this.pujaForm={PLAYER:this.PLAYER,TEAM:this.TEAM,SALARIO:this.pujaFAForm.value.salarioOffer,YEARS:this.pujaFAForm.value.years,TIPO:"Jugador"},this.pujaForm&&(this.infopuja=!0),this.mySLHnews.push({PLAYER:this.PLAYER,AKA:this.TEAM,EQUIPO:this.EQUIPOOffer,SALARIO:this.pujaFAForm.value.salarioOffer,YEARS:this.pujaFAForm.value.years,desde:ne,fichadoCortado:!0}),this.guardarPuja(),this.guardarSLHNews()}guardarSLHNews(){this.infogmS.putSLHNews(this.PLAYER,this.TEAM,this.EQUIPOOffer,this.pujaForm.SALARIO,this.pujaForm.YEARS,new Date,!0).subscribe(We=>{})}guardarPuja(){this.infogmS.putFA(this.PLAYER,this.TEAM,this.pujaForm.SALARIO,this.pujaForm.YEARS,"Jugador").subscribe(Ue=>{})}droparPlayer(){this.infogmS.putFA(this.PLAYER,"F.A",0,0,"Jugador").subscribe(Ue=>{})}openInfo(){this.pujaFormData=!0}camposNoValidos(ne){return this.pujaFAForm.controls[ne].errors&&this.pujaFAForm.controls[ne].touched}}h.\u0275fac=function(ne){return new(ne||h)(r.Y36(w.qu),r.Y36(E.y),r.Y36(T.e),r.Y36(O.gz))},h.\u0275cmp=r.Xpm({type:h,selectors:[["app-puja"]],decls:3,vars:2,consts:[["cols","1",4,"ngIf","ngIfElse"],["divLoadedPuja",""],["cols","1"],[1,"pujar"],[1,"Player"],["autocomplete","off",3,"formGroup","ngSubmit"],["matInput","","type","number","required","","formControlName","salarioOffer"],["matInput","","type","number","required","","formControlName","years"],["matCardSubtitle","","class","validFormAlert",4,"ngIf"],["fxLayout","row wrap","fxFlex","100",4,"ngIf"],[4,"ngIf"],["matCardSubtitle","",1,"validFormAlert"],["fxLayout","row wrap","fxFlex","100"],["fxFlex","50","align","center"],["mat-raised-button","","extended","","color","accent","routerLink","/dashboard/myleague/playersfa"],["mat-raised-button","","extended","","color","warn","type","submit",3,"disabled","click"],[1,"material-icons-outlined"],["mat-raised-button","","extended","","color","secondary"],["mat-raised-button","","extended","","color","primary"],["mat-raised-button","","extended","","color","accent"],["align","center"],["mat-raised-button","","extended","","color","warn","routerLink","/dashboard/myleague/playersfa"]],template:function(ne,J){if(1&ne&&(r.YNc(0,C,3,0,"mat-grid-list",0),r.YNc(1,n,29,5,"ng-template",null,1,r.W1O)),2&ne){const Se=r.MAs(2);r.Q6J("ngIf",!J.pujaFormData)("ngIfElse",Se)}},dependencies:[i.O5,O.rH,y.lW,N.Hw,W.d,V.a8,V.hq,V.dn,V.dk,V.$j,V.n5,D.Il,D.DX,H.Ou,_.KE,_.hX,x.Nt,w._Y,w.Fj,w.wV,w.JJ,w.JL,w.Q7,b.xw,b.yH,w.sg,w.u],styles:[".pujar[_ngcontent-%COMP%]{align-self:center}.Player[_ngcontent-%COMP%]{text-align:center;color:#ff4d00}.validFormAlert[_ngcontent-%COMP%]{font-size:x-small;color:red;background:black;text-align:center}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.mypTIPO[_ngcontent-%COMP%]{border-right:1px solid currentColor;background:#334455}.mypTIPO2[_ngcontent-%COMP%]{border-right:1px solid currentColor;text-align:center}.mypTIPO3[_ngcontent-%COMP%]{text-align:center;background-color:#345;color:#e70768;font-size:x-large}.mypNONMBRE[_ngcontent-%COMP%]{color:#e70768;font-size:x-large;text-align:center;background-color:#345}.tituloEquipo[_ngcontent-%COMP%]{background:linear-gradient(#444444,#e70768);color:#fff;font-size:x-large;align-self:center;width:100%;padding:10px}.cBoxSection[_ngcontent-%COMP%]{margin:12px 0}"]});var S=P(1581),u=P(7155);function m(ee,ne){1&ee&&(r.TgZ(0,"mat-grid-list",2)(1,"mat-grid-tile"),r._UZ(2,"mat-spinner"),r.qZA()())}function g(ee,ne){1&ee&&(r.TgZ(0,"th",21)(1,"small"),r._uU(2," Fichar "),r.qZA()())}const d=function(ee){return["/dashboard/myleague/pujar",ee]};function R(ee,ne){if(1&ee&&(r.TgZ(0,"td",22)(1,"mat-card-actions")(2,"button",23)(3,"mat-icon"),r._uU(4,"2k"),r.qZA(),r._uU(5,"Fichar"),r.qZA()()()),2&ee){const J=ne.$implicit;r.xp6(2),r.Q6J("routerLink",r.VKq(1,d,J.PLAYER))}}function k(ee,ne){1&ee&&(r.TgZ(0,"th",21)(1,"small"),r._uU(2," Pos "),r.qZA()())}function j(ee,ne){if(1&ee&&(r.TgZ(0,"td",22),r._uU(1),r.qZA()),2&ee){const J=ne.$implicit;r.xp6(1),r.hij(" ",J.POS," ")}}function $(ee,ne){1&ee&&(r.TgZ(0,"th",24),r._uU(1," Nombre "),r.qZA())}function Q(ee,ne){if(1&ee&&(r.TgZ(0,"td",25),r._uU(1),r.qZA()),2&ee){const J=ne.$implicit;r.xp6(1),r.hij(" ",J.PLAYER," ")}}function K(ee,ne){1&ee&&(r.TgZ(0,"th",21)(1,"small"),r._uU(2," Salario"),r.qZA()())}function re(ee,ne){1&ee&&(r.TgZ(0,"td",22),r._uU(1," 0 "),r.qZA())}function fe(ee,ne){1&ee&&(r.TgZ(0,"th",21),r._uU(1," A\xf1os "),r.qZA())}function ue(ee,ne){1&ee&&(r.TgZ(0,"td",22),r._uU(1," 0 "),r.qZA())}function F(ee,ne){1&ee&&(r.TgZ(0,"th",21),r._uU(1," Equipo "),r.qZA())}function a(ee,ne){if(1&ee&&(r.TgZ(0,"td",22),r._uU(1),r.qZA()),2&ee){const J=ne.$implicit;r.xp6(1),r.hij(" ",J.EQUIPO," ")}}function e(ee,ne){1&ee&&r._UZ(0,"tr",26)}function s(ee,ne){1&ee&&r._UZ(0,"tr",27)}function l(ee,ne){if(1&ee&&(r.TgZ(0,"tr",28)(1,"td",29),r._uU(2),r.qZA()()),2&ee){r.oxw();const J=r.MAs(6);r.xp6(2),r.hij('No data matching the filter "',J.value,'"')}}const f=function(){return[5,10,25,100]};function p(ee,ne){if(1&ee){const J=r.EpF();r.TgZ(0,"mat-card")(1,"mat-card-content")(2,"mat-form-field")(3,"mat-label"),r._uU(4,"Buscar"),r.qZA(),r.TgZ(5,"input",3,4),r.NdJ("keyup",function(Me){r.CHM(J);const De=r.oxw();return r.KtG(De.applyFilter(Me))}),r.qZA()(),r.TgZ(7,"div",5)(8,"table",6),r.ynx(9,7),r.YNc(10,g,3,0,"th",8),r.YNc(11,R,6,3,"td",9),r.BQk(),r.ynx(12,10),r.YNc(13,k,3,0,"th",8),r.YNc(14,j,2,1,"td",9),r.BQk(),r.ynx(15,11),r.YNc(16,$,2,0,"th",12),r.YNc(17,Q,2,1,"td",13),r.BQk(),r.ynx(18,14),r.YNc(19,K,3,0,"th",8),r.YNc(20,re,2,0,"td",9),r.BQk(),r.ynx(21,15),r.YNc(22,fe,2,0,"th",8),r.YNc(23,ue,2,0,"td",9),r.BQk(),r.ynx(24,16),r.YNc(25,F,2,0,"th",8),r.YNc(26,a,2,1,"td",9),r.BQk(),r.YNc(27,e,1,0,"tr",17),r.YNc(28,s,1,0,"tr",18),r.YNc(29,l,3,1,"tr",19),r.qZA()()(),r.TgZ(30,"mat-card-actions"),r._UZ(31,"mat-paginator",20),r.qZA()()}if(2&ee){const J=r.oxw();r.xp6(8),r.Q6J("dataSource",J.dataSource),r.xp6(19),r.Q6J("matHeaderRowDef",J.displayedColumns),r.xp6(1),r.Q6J("matRowDefColumns",J.displayedColumns),r.xp6(3),r.Q6J("length",J.totaldata)("pageSize",5)("pageSizeOptions",r.DdM(6,f))}}class c{constructor(ne){this.infogmS=ne,this.totaldata=0,this.displayedColumns=["PUJAR","POS","PLAYER","SALARIO","YEARS","EQUIPO"],this.dataSource=new u.by(this.listaFAs)}applyFilter(ne){this.dataSource.filter=ne.target.value.trim().toLowerCase()}ngOnInit(){this.infogmS.getFA().subscribe(ne=>{this.listaFAs=ne,this.dataSource=new u.by(this.listaFAs),this.dataSource.paginator=this.paginator,this.totaldata=ne.length})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}}function L(ee,ne){1&ee&&(r.TgZ(0,"mat-grid-list",2)(1,"mat-grid-tile"),r._UZ(2,"mat-spinner"),r.qZA()())}function q(ee,ne){1&ee&&(r.TgZ(0,"th",17),r._uU(1," Equipo "),r.qZA())}c.\u0275fac=function(ne){return new(ne||c)(r.Y36(E.y))},c.\u0275cmp=r.Xpm({type:c,selectors:[["app-agencialibre"]],viewQuery:function(ne,J){if(1&ne&&r.Gf(S.NW,5),2&ne){let Se;r.iGM(Se=r.CRH())&&(J.paginator=Se.first)}},decls:3,vars:2,consts:[["cols","1",4,"ngIf","ngIfElse"],["divLoaded2",""],["cols","1"],["matInput","","placeholder","search",3,"keyup"],["input",""],[1,"mytableresponsive"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","PUJAR"],["mat-header-cell","","class","mypTIPO3",4,"matHeaderCellDef"],["mat-cell","","class","mypTIPO2",4,"matCellDef"],["matColumnDef","POS"],["matColumnDef","PLAYER"],["mat-header-cell","","class","mypNONMBRE",4,"matHeaderCellDef"],["mat-cell","","class","mypTIPO2","style","font-size: larger; text-align: left;",4,"matCellDef"],["matColumnDef","SALARIO"],["matColumnDef","YEARS"],["matColumnDef","EQUIPO"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","",1,"mypTIPO3"],["mat-cell","",1,"mypTIPO2"],["mat-fab","","extended","","color","accent",3,"routerLink"],["mat-header-cell","",1,"mypNONMBRE"],["mat-cell","",1,"mypTIPO2",2,"font-size","larger","text-align","left"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(ne,J){if(1&ne&&(r.YNc(0,m,3,0,"mat-grid-list",0),r.YNc(1,p,32,7,"ng-template",null,1,r.W1O)),2&ne){const Se=r.MAs(2);r.Q6J("ngIf",!J.dataSource)("ngIfElse",Se)}},dependencies:[i.O5,O.rH,y.cs,N.Hw,V.a8,V.hq,V.dn,D.Il,D.DX,H.Ou,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,u.Ee,_.KE,_.hX,x.Nt,S.NW],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.mypTIPO[_ngcontent-%COMP%]{border-right:1px solid currentColor;background:#334455}.mypTIPO2[_ngcontent-%COMP%]{border-right:1px solid currentColor;text-align:center}.mypTIPO3[_ngcontent-%COMP%]{text-align:center;background-color:#345;color:#e70768;font-size:x-large}.mypNONMBRE[_ngcontent-%COMP%]{color:#e70768;font-size:x-large;text-align:center;background-color:#345}.tituloEquipo[_ngcontent-%COMP%]{background:linear-gradient(#444444,#e70768);color:#fff;font-size:x-large;align-self:center;width:100%;padding:10px}.cBoxSection[_ngcontent-%COMP%]{margin:12px 0}.mytableresponsive[_ngcontent-%COMP%]{overflow-x:auto}"]});const B=function(ee){return["/dashboard/myteam/players",ee]};function Y(ee,ne){if(1&ee&&(r.TgZ(0,"td",18)(1,"mat-card-actions")(2,"button",19)(3,"mat-icon"),r._uU(4,"groups"),r.qZA(),r._uU(5),r.qZA()()()),2&ee){const J=ne.$implicit;r.xp6(2),r.Q6J("routerLink",r.VKq(2,B,J.AKA)),r.xp6(3),r.Oqu(J.EQUIPO)}}function X(ee,ne){1&ee&&(r.TgZ(0,"th",17),r._uU(1," Logo "),r.qZA())}const te=function(ee){return[ee]};function ie(ee,ne){if(1&ee&&(r.TgZ(0,"td",18),r._UZ(1,"img",20),r.qZA()),2&ee){const J=ne.$implicit;r.xp6(1),r.Q6J("src",r.VKq(1,te,J.alt_img),r.LSH)}}function pe(ee,ne){1&ee&&(r.TgZ(0,"th",17),r._uU(1," Manager "),r.qZA())}function Ae(ee,ne){if(1&ee&&(r.TgZ(0,"td",21)(1,"strong"),r._uU(2),r.ALo(3,"titlecase"),r.qZA()()),2&ee){const J=ne.$implicit;r.xp6(2),r.hij(" ",r.lcZ(3,1,J.Nickname)," ")}}function Ce(ee,ne){1&ee&&(r.TgZ(0,"th",17),r._uU(1," Num "),r.qZA())}function ye(ee,ne){if(1&ee&&(r.TgZ(0,"td",18),r._uU(1),r.qZA()),2&ee){const J=ne.$implicit;r.xp6(1),r.hij(" ",J.JUGADORES," ")}}function he(ee,ne){1&ee&&(r.TgZ(0,"th",17),r._uU(1," Gastos "),r.qZA())}function ke(ee,ne){if(1&ee&&(r.TgZ(0,"td",18),r._uU(1),r.qZA()),2&ee){const J=ne.$implicit;r.xp6(1),r.hij(" ",J.Salarios," ")}}function Te(ee,ne){1&ee&&(r.TgZ(0,"th",17),r._uU(1," Cap "),r.qZA())}function me(ee,ne){if(1&ee&&(r.TgZ(0,"td",18),r._uU(1),r.qZA()),2&ee){const J=ne.$implicit;r.xp6(1),r.hij(" ",J.SalarioLibre," ")}}function le(ee,ne){1&ee&&(r.TgZ(0,"th",17),r._uU(1," E-mail "),r.qZA())}function ge(ee,ne){if(1&ee&&(r.TgZ(0,"td",18)(1,"mat-card-actions")(2,"button",22)(3,"mat-icon"),r._uU(4,"email"),r.qZA(),r._uU(5),r.qZA()()()),2&ee){const J=ne.$implicit;r.xp6(5),r.Oqu(J.Mail2)}}function Pe(ee,ne){1&ee&&r._UZ(0,"tr",23)}function se(ee,ne){1&ee&&r._UZ(0,"tr",24)}function M(ee,ne){if(1&ee&&(r.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div",3)(3,"table",4),r.ynx(4,5),r.YNc(5,q,2,0,"th",6),r.YNc(6,Y,6,4,"td",7),r.BQk(),r.ynx(7,8),r.YNc(8,X,2,0,"th",6),r.YNc(9,ie,2,3,"td",7),r.BQk(),r.ynx(10,9),r.YNc(11,pe,2,0,"th",6),r.YNc(12,Ae,4,3,"td",10),r.BQk(),r.ynx(13,11),r.YNc(14,Ce,2,0,"th",6),r.YNc(15,ye,2,1,"td",7),r.BQk(),r.ynx(16,12),r.YNc(17,he,2,0,"th",6),r.YNc(18,ke,2,1,"td",7),r.BQk(),r.ynx(19,13),r.YNc(20,Te,2,0,"th",6),r.YNc(21,me,2,1,"td",7),r.BQk(),r.ynx(22,14),r.YNc(23,le,2,0,"th",6),r.YNc(24,ge,6,1,"td",7),r.BQk(),r.YNc(25,Pe,1,0,"tr",15),r.YNc(26,se,1,0,"tr",16),r.qZA()()()()),2&ee){const J=r.oxw();r.xp6(3),r.Q6J("dataSource",J.equiposinfo),r.xp6(22),r.Q6J("matHeaderRowDef",J.displayedColumns),r.xp6(1),r.Q6J("matRowDefColumns",J.displayedColumns)}}class Z{constructor(ne,J){this.infogmS=ne,this.router=J,this.dataSource=new u.by(this.equiposinfo),this.displayedColumns=["Roster","alt_img","Nickname","JUGADORES","Salarios","SalarioLibre","Mail2"]}ngOnInit(){this.infogmS.getInfoGMS().subscribe(ne=>{this.equiposinfo=ne})}}Z.\u0275fac=function(ne){return new(ne||Z)(r.Y36(E.y),r.Y36(O.F0))},Z.\u0275cmp=r.Xpm({type:Z,selectors:[["app-equipos"]],decls:3,vars:2,consts:[["cols","1",4,"ngIf","ngIfElse"],["divLoaded3",""],["cols","1"],[1,"mytableresponsive"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Roster"],["mat-header-cell","","class","equiposTableHeader",4,"matHeaderCellDef"],["mat-cell","","class","mypTIPO2",4,"matCellDef"],["matColumnDef","alt_img"],["matColumnDef","Nickname"],["mat-cell","","class","mypTIPO2","style","font-size: large",4,"matCellDef"],["matColumnDef","JUGADORES"],["matColumnDef","Salarios"],["matColumnDef","SalarioLibre"],["matColumnDef","Mail2"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"equiposTableHeader"],["mat-cell","",1,"mypTIPO2"],["mat-fab","","extended","","color","primary",3,"routerLink"],["mat-card-image","",3,"src"],["mat-cell","",1,"mypTIPO2",2,"font-size","large"],["mat-fab","","extended","","color","secondary","href",""],["mat-header-row",""],["mat-row",""]],template:function(ne,J){if(1&ne&&(r.YNc(0,L,3,0,"mat-grid-list",0),r.YNc(1,M,27,3,"ng-template",null,1,r.W1O)),2&ne){const Se=r.MAs(2);r.Q6J("ngIf",!J.dataSource)("ngIfElse",Se)}},dependencies:[i.O5,O.rH,y.cs,N.Hw,V.a8,V.hq,V.dn,V.G2,D.Il,D.DX,H.Ou,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,i.rS],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.mypTIPO[_ngcontent-%COMP%]{border-right:1px solid currentColor;background:#334455}.mypTIPO2[_ngcontent-%COMP%]{border-right:1px solid currentColor;text-align:center}.equiposTableHeader[_ngcontent-%COMP%]{text-align:center;background:linear-gradient(#e70768,#444444,);color:#fff;font-size:x-large}.mypNONMBRE[_ngcontent-%COMP%]{background-color:#345;color:pink;font-size:x-large}.mytableresponsive[_ngcontent-%COMP%]{overflow-x:auto}"]});class ce{}ce.\u0275fac=function(ne){return new(ne||ce)},ce.\u0275cmp=r.Xpm({type:ce,selectors:[["app-normativa"]],decls:7,vars:0,consts:[[1,"title"],["id","doc"],["align","center"],["src",r.$Z9`/assets/pdf/NORMATIVASLH22.pdf#toolbar=0`,"height","1000","width","1000",1,"normativa"]],template:function(ne,J){1&ne&&(r.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title",0)(3,"em",1),r._uU(4,"Normativa SLH"),r.qZA()()(),r.TgZ(5,"mat-card-content",2),r._UZ(6,"embed",3),r.qZA()())},dependencies:[V.a8,V.dn,V.dk,V.n5],styles:["pdf-viewer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;filter:drop-shadow(5px 5px 5px #222222)}textarea[_ngcontent-%COMP%]{margin-top:15px;display:block;margin-left:auto;margin-right:auto;width:100%}.title[_ngcontent-%COMP%]{align-items:center}.normativa[_ngcontent-%COMP%]{width:90vw;height:75vh}"]});var be=P(5606),z=P(3160),I=P(4785);class U{}U.\u0275fac=function(ne){return new(ne||U)},U.\u0275cmp=r.Xpm({type:U,selectors:[["app-miliga"]],decls:3,vars:0,template:function(ne,J){1&ne&&r._UZ(0,"app-head")(1,"app-menunav")(2,"app-footer")},dependencies:[be.i,z.V,I.c],encapsulation:2});const ae=[{path:"",component:U,children:[{path:"equipos",component:Z},{path:"playersfa",component:c},{path:"pujar/:PLAYER",component:h},{path:"normativa",component:ce},{path:"**",redirectTo:""}]}];class ve{}ve.\u0275fac=function(ne){return new(ne||ve)},ve.\u0275mod=r.oAB({type:ve}),ve.\u0275inj=r.cJS({imports:[O.Bz.forChild(ae),O.Bz]});var Fe=P(8785),oe=P(6036),de=P.t(oe,2);P(2813),function Re(){return typeof window>"u"}()||function xe(ee,ne,J){ee[ne]=J}(de,"verbosity",oe.VerbosityLevel.INFOS);let Ne=(()=>{class ee{}return ee.\u0275fac=function(J){return new(J||ee)},ee.\u0275mod=r.oAB({type:ee}),ee.\u0275inj=r.cJS({}),ee})();var Ve=P(4930);class Be{}Be.\u0275fac=function(ne){return new(ne||Be)},Be.\u0275mod=r.oAB({type:Be}),Be.\u0275inj=r.cJS({imports:[i.ez,ve,Fe.q,Ne,w.u5,Ve.DashboardModule,w.UX]})},6036:function(module,__unused_webpack_exports,__webpack_require__){var _classStaticPrivateMethodGet=__webpack_require__(5764).default,_defineProperty=__webpack_require__(8416).default,_classPrivateMethodInitSpec=__webpack_require__(1860).default,_classPrivateMethodGet=__webpack_require__(4467).default,_classPrivateFieldInitSpec=__webpack_require__(9159).default,_classPrivateFieldSet=__webpack_require__(5661).default,_classPrivateFieldGet=__webpack_require__(468).default,_classStaticPrivateFieldSpecSet=__webpack_require__(2306).default,_classStaticPrivateFieldSpecGet=__webpack_require__(1280).default,_asyncToGenerator=__webpack_require__(7156).default,P;P=()=>(()=>{"use strict";var __webpack_modules__=[,(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.VerbosityLevel=o.Util=o.UnknownErrorException=o.UnexpectedResponseException=o.UNSUPPORTED_FEATURES=o.TextRenderingMode=o.StreamType=o.RenderingIntentFlag=o.PermissionFlag=o.PasswordResponses=o.PasswordException=o.PageActionEventType=o.OPS=o.MissingPDFException=o.InvalidPDFException=o.ImageKind=o.IDENTITY_MATRIX=o.FormatError=o.FontType=o.FeatureTest=o.FONT_IDENTITY_MATRIX=o.DocumentActionEventType=o.CMapCompressionType=o.BaseException=o.AnnotationType=o.AnnotationStateModelType=o.AnnotationReviewState=o.AnnotationReplyType=o.AnnotationMode=o.AnnotationMarkedState=o.AnnotationFlag=o.AnnotationFieldFlag=o.AnnotationBorderStyleType=o.AnnotationActionEventType=o.AbortException=void 0,o.arrayByteLength=B,o.arraysToBytes=function Y(z){const I=z.length;if(1===I&&z[0]instanceof Uint8Array)return z[0];let U=0;for(let Fe=0;Fe<I;Fe++)U+=B(z[Fe]);let ae=0;const ve=new Uint8Array(U);for(let Fe=0;Fe<I;Fe++){let oe=z[Fe];oe instanceof Uint8Array||(oe="string"==typeof oe?q(oe):new Uint8Array(oe));const de=oe.byteLength;ve.set(oe,ae),ae+=de}return ve},o.assert=function K(z,I){z||Q(I)},o.bytesToString=function L(z){("object"!=typeof z||null===z||void 0===z.length)&&Q("Invalid argument for bytesToString");const I=z.length,U=8192;if(I<U)return String.fromCharCode.apply(null,z);const ae=[];for(let ve=0;ve<I;ve+=U){const Fe=Math.min(ve+U,I),oe=z.subarray(ve,Fe);ae.push(String.fromCharCode.apply(null,oe))}return ae.join("")},o.createPromiseCapability=function be(){const z=Object.create(null);let I=!1;return Object.defineProperty(z,"settled",{get:()=>I}),z.promise=new Promise(function(U,ae){z.resolve=function(ve){I=!0,U(ve)},z.reject=function(ve){I=!0,ae(ve)}}),z},o.createValidAbsoluteUrl=function fe(z,I=null,U=null){if(!z)return null;try{if(U&&"string"==typeof z){if(U.addDefaultProtocol&&z.startsWith("www.")){const ve=z.match(/\./g);ve&&ve.length>=2&&(z=`http://${z}`)}if(U.tryConvertEncoding)try{z=Pe(z)}catch{}}const ae=I?new URL(z,I):new URL(z);if(function re(z){if(!z)return!1;switch(z.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(ae))return ae}catch{}return null},o.escapeString=function me(z){return z.replace(/([()\\\n\r])/g,I=>"\n"===I?"\\n":"\r"===I?"\\r":`\\${I}`)},o.getModificationDate=function ce(z=new Date){return[z.getUTCFullYear().toString(),(z.getUTCMonth()+1).toString().padStart(2,"0"),z.getUTCDate().toString().padStart(2,"0"),z.getUTCHours().toString().padStart(2,"0"),z.getUTCMinutes().toString().padStart(2,"0"),z.getUTCSeconds().toString().padStart(2,"0")].join("")},o.getVerbosityLevel=function k(){return d},o.info=function j(z){d>=h.INFOS&&console.log(`Info: ${z}`)},o.isArrayBuffer=function M(z){return"object"==typeof z&&null!==z&&void 0!==z.byteLength},o.isArrayEqual=function Z(z,I){if(z.length!==I.length)return!1;for(let U=0,ae=z.length;U<ae;U++)if(z[U]!==I[U])return!1;return!0},o.isAscii=function le(z){return/^[\x00-\x7F]*$/.test(z)},o.objectFromMap=function ie(z){const I=Object.create(null);for(const[U,ae]of z)I[U]=ae;return I},o.objectSize=function te(z){return Object.keys(z).length},o.setVerbosityLevel=function R(z){Number.isInteger(z)&&(d=z)},o.shadow=ue,o.string32=function X(z){return String.fromCharCode(z>>24&255,z>>16&255,z>>8&255,255&z)},o.stringToBytes=q,o.stringToPDFString=function Te(z){if(z[0]>="\xef"){let U;if("\xfe"===z[0]&&"\xff"===z[1]?U="utf-16be":"\xff"===z[0]&&"\xfe"===z[1]?U="utf-16le":"\xef"===z[0]&&"\xbb"===z[1]&&"\xbf"===z[2]&&(U="utf-8"),U)try{const ae=new TextDecoder(U,{fatal:!0}),ve=q(z);return ae.decode(ve)}catch(ae){$(`stringToPDFString: "${ae}".`)}}const I=[];for(let U=0,ae=z.length;U<ae;U++){const ve=ke[z.charCodeAt(U)];I.push(ve?String.fromCharCode(ve):z.charAt(U))}return I.join("")},o.stringToUTF16BEString=function ge(z){const I=["\xfe\xff"];for(let U=0,ae=z.length;U<ae;U++){const ve=z.charCodeAt(U);I.push(String.fromCharCode(ve>>8&255),String.fromCharCode(255&ve))}return I.join("")},o.stringToUTF8String=Pe,o.unreachable=Q,o.utf8StringToString=function se(z){return unescape(encodeURIComponent(z))},o.warn=$,P(2),o.IDENTITY_MATRIX=[1,0,0,1,0,0],o.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],o.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},o.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},o.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},o.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},o.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},o.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},o.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},o.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},o.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},o.AnnotationReplyType={GROUP:"Group",REPLY:"R"},o.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},o.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},o.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},o.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},o.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},o.PageActionEventType={O:"PageOpen",C:"PageClose"},o.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},o.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const h={ERRORS:0,WARNINGS:1,INFOS:5};o.VerbosityLevel=h,o.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},o.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},o.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},o.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let d=h.WARNINGS;function $(z){d>=h.WARNINGS&&console.log(`Warning: ${z}`)}function Q(z){throw new Error(z)}function ue(z,I,U){return Object.defineProperty(z,I,{value:U,enumerable:!0,configurable:!0,writable:!1}),U}const F=function(){function I(U,ae){this.constructor===I&&Q("Cannot initialize BaseException."),this.message=U,this.name=ae}return I.prototype=new Error,I.constructor=I,I}();function q(z){"string"!=typeof z&&Q("Invalid argument for stringToBytes");const I=z.length,U=new Uint8Array(I);for(let ae=0;ae<I;++ae)U[ae]=255&z.charCodeAt(ae);return U}function B(z){return void 0!==z.length?z.length:void 0!==z.byteLength?z.byteLength:void Q("Invalid argument for arrayByteLength")}o.BaseException=F,o.PasswordException=class a extends F{constructor(I,U){super(I,"PasswordException"),this.code=U}},o.UnknownErrorException=class e extends F{constructor(I,U){super(I,"UnknownErrorException"),this.details=U}},o.InvalidPDFException=class s extends F{constructor(I){super(I,"InvalidPDFException")}},o.MissingPDFException=class l extends F{constructor(I){super(I,"MissingPDFException")}},o.UnexpectedResponseException=class f extends F{constructor(I,U){super(I,"UnexpectedResponseException"),this.status=U}},o.FormatError=class p extends F{constructor(I){super(I,"FormatError")}},o.AbortException=class c extends F{constructor(I){super(I,"AbortException")}},o.FeatureTest=class Ce{static get isLittleEndian(){return ue(this,"isLittleEndian",function pe(){const z=new Uint8Array(4);return z[0]=1,1===new Uint32Array(z.buffer,0,1)[0]}())}static get isEvalSupported(){return ue(this,"isEvalSupported",function Ae(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return ue(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};const ye=[...Array(256).keys()].map(z=>z.toString(16).padStart(2,"0"));class he{static makeHexColor(I,U,ae){return`#${ye[I]}${ye[U]}${ye[ae]}`}static scaleMinMax(I,U){let ae;I[0]?(I[0]<0&&(ae=U[0],U[0]=U[1],U[1]=ae),U[0]*=I[0],U[1]*=I[0],I[3]<0&&(ae=U[2],U[2]=U[3],U[3]=ae),U[2]*=I[3],U[3]*=I[3]):(ae=U[0],U[0]=U[2],U[2]=ae,ae=U[1],U[1]=U[3],U[3]=ae,I[1]<0&&(ae=U[2],U[2]=U[3],U[3]=ae),U[2]*=I[1],U[3]*=I[1],I[2]<0&&(ae=U[0],U[0]=U[1],U[1]=ae),U[0]*=I[2],U[1]*=I[2]),U[0]+=I[4],U[1]+=I[4],U[2]+=I[5],U[3]+=I[5]}static transform(I,U){return[I[0]*U[0]+I[2]*U[1],I[1]*U[0]+I[3]*U[1],I[0]*U[2]+I[2]*U[3],I[1]*U[2]+I[3]*U[3],I[0]*U[4]+I[2]*U[5]+I[4],I[1]*U[4]+I[3]*U[5]+I[5]]}static applyTransform(I,U){return[I[0]*U[0]+I[1]*U[2]+U[4],I[0]*U[1]+I[1]*U[3]+U[5]]}static applyInverseTransform(I,U){const ae=U[0]*U[3]-U[1]*U[2];return[(I[0]*U[3]-I[1]*U[2]+U[2]*U[5]-U[4]*U[3])/ae,(-I[0]*U[1]+I[1]*U[0]+U[4]*U[1]-U[5]*U[0])/ae]}static getAxialAlignedBoundingBox(I,U){const ae=he.applyTransform(I,U),ve=he.applyTransform(I.slice(2,4),U),Fe=he.applyTransform([I[0],I[3]],U),oe=he.applyTransform([I[2],I[1]],U);return[Math.min(ae[0],ve[0],Fe[0],oe[0]),Math.min(ae[1],ve[1],Fe[1],oe[1]),Math.max(ae[0],ve[0],Fe[0],oe[0]),Math.max(ae[1],ve[1],Fe[1],oe[1])]}static inverseTransform(I){const U=I[0]*I[3]-I[1]*I[2];return[I[3]/U,-I[1]/U,-I[2]/U,I[0]/U,(I[2]*I[5]-I[4]*I[3])/U,(I[4]*I[1]-I[5]*I[0])/U]}static apply3dTransform(I,U){return[I[0]*U[0]+I[1]*U[1]+I[2]*U[2],I[3]*U[0]+I[4]*U[1]+I[5]*U[2],I[6]*U[0]+I[7]*U[1]+I[8]*U[2]]}static singularValueDecompose2dScale(I){const U=[I[0],I[2],I[1],I[3]],ae=I[0]*U[0]+I[1]*U[2],oe=I[2]*U[1]+I[3]*U[3],de=(ae+oe)/2,we=Math.sqrt((ae+oe)**2-4*(ae*oe-(I[2]*U[0]+I[3]*U[2])*(I[0]*U[1]+I[1]*U[3])))/2,_e=de-we||1;return[Math.sqrt(de+we||1),Math.sqrt(_e)]}static normalizeRect(I){const U=I.slice(0);return I[0]>I[2]&&(U[0]=I[2],U[2]=I[0]),I[1]>I[3]&&(U[1]=I[3],U[3]=I[1]),U}static intersect(I,U){const ae=Math.max(Math.min(I[0],I[2]),Math.min(U[0],U[2])),ve=Math.min(Math.max(I[0],I[2]),Math.max(U[0],U[2]));if(ae>ve)return null;const Fe=Math.max(Math.min(I[1],I[3]),Math.min(U[1],U[3])),oe=Math.min(Math.max(I[1],I[3]),Math.max(U[1],U[3]));return Fe>oe?null:[ae,Fe,ve,oe]}static bezierBoundingBox(I,U,ae,ve,Fe,oe,de,we){const Ee=[],_e=[[],[]];let Le,xe,Re,Oe,Ie,Ne,Ve,Be;for(let Se=0;Se<2;++Se)if(0===Se?(xe=6*I-12*ae+6*Fe,Le=-3*I+9*ae-9*Fe+3*de,Re=3*ae-3*I):(xe=6*U-12*ve+6*oe,Le=-3*U+9*ve-9*oe+3*we,Re=3*ve-3*U),Math.abs(Le)<1e-12){if(Math.abs(xe)<1e-12)continue;Oe=-Re/xe,0<Oe&&Oe<1&&Ee.push(Oe)}else Ve=xe*xe-4*Re*Le,Be=Math.sqrt(Ve),!(Ve<0)&&(Ie=(-xe+Be)/(2*Le),0<Ie&&Ie<1&&Ee.push(Ie),Ne=(-xe-Be)/(2*Le),0<Ne&&Ne<1&&Ee.push(Ne));let ne,ee=Ee.length;const J=ee;for(;ee--;)Oe=Ee[ee],ne=1-Oe,_e[0][ee]=ne*ne*ne*I+3*ne*ne*Oe*ae+3*ne*Oe*Oe*Fe+Oe*Oe*Oe*de,_e[1][ee]=ne*ne*ne*U+3*ne*ne*Oe*ve+3*ne*Oe*Oe*oe+Oe*Oe*Oe*we;return _e[0][J]=I,_e[1][J]=U,_e[0][J+1]=de,_e[1][J+1]=we,_e[0].length=_e[1].length=J+2,[Math.min(..._e[0]),Math.min(..._e[1]),Math.max(..._e[0]),Math.max(..._e[1])]}}o.Util=he;const ke=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Pe(z){return decodeURIComponent(escape(z))}},(G,o,P)=>{P(3)},(G,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isNodeJS=void 0;const P=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);o.isNodeJS=P},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:G,NodeCMapReaderFactory:o,NodeStandardFontDataFactory:P}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=G,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=o,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=P}function setPDFNetworkStreamFactory(G){createPDFNetworkStream=G}function getDocument(G){const o=new PDFDocumentLoadingTask;let P;if("string"==typeof G||G instanceof URL)P={url:G};else if((0,_util.isArrayBuffer)(G))P={data:G};else if(G instanceof PDFDataRangeTransport)P={range:G};else{if("object"!=typeof G)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!G.url&&!G.data&&!G.range)throw new Error("Invalid parameter object: need either .data, .range or .url");P=G}const i=Object.create(null);let O=null,w=null;for(const E in P){const T=P[E];switch(E){case"url":if(typeof window<"u")try{i[E]=new URL(T,window.location).href;continue}catch(y){(0,_util.warn)(`Cannot create valid URL: "${y}".`)}else if("string"==typeof T||T instanceof URL){i[E]=T.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":O=T;continue;case"worker":w=T;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&T instanceof Buffer)i[E]=new Uint8Array(T);else{if(T instanceof Uint8Array)break;if("string"==typeof T)i[E]=(0,_util.stringToBytes)(T);else if("object"!=typeof T||null===T||isNaN(T.length)){if(!(0,_util.isArrayBuffer)(T))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");i[E]=new Uint8Array(T)}else i[E]=new Uint8Array(T)}continue}i[E]=T}if(i.CMapReaderFactory=i.CMapReaderFactory||DefaultCMapReaderFactory,i.StandardFontDataFactory=i.StandardFontDataFactory||DefaultStandardFontDataFactory,i.ignoreErrors=!0!==i.stopAtErrors,i.fontExtraProperties=!0===i.fontExtraProperties,i.pdfBug=!0===i.pdfBug,i.enableXfa=!0===i.enableXfa,(!Number.isInteger(i.rangeChunkSize)||i.rangeChunkSize<1)&&(i.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof i.docBaseUrl||(0,_display_utils.isDataScheme)(i.docBaseUrl))&&(i.docBaseUrl=null),(!Number.isInteger(i.maxImageSize)||i.maxImageSize<-1)&&(i.maxImageSize=-1),"string"!=typeof i.cMapUrl&&(i.cMapUrl=null),"string"!=typeof i.standardFontDataUrl&&(i.standardFontDataUrl=null),"boolean"!=typeof i.useWorkerFetch&&(i.useWorkerFetch=i.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&i.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof i.isEvalSupported&&(i.isEvalSupported=!0),"boolean"!=typeof i.disableFontFace&&(i.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof i.useSystemFonts&&(i.useSystemFonts=!_is_node.isNodeJS&&!i.disableFontFace),("object"!=typeof i.ownerDocument||null===i.ownerDocument)&&(i.ownerDocument=globalThis.document),"boolean"!=typeof i.disableRange&&(i.disableRange=!1),"boolean"!=typeof i.disableStream&&(i.disableStream=!1),"boolean"!=typeof i.disableAutoFetch&&(i.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(i.verbosity),!w){const E={verbosity:i.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};w=E.port?_PDFWorker.fromPort(E):new _PDFWorker(E),o._worker=w}const r=o.docId;return w.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");const E=_fetchDocument(w,i,O,r),T=new Promise(function(y){let N;O?N=new _transport_stream.PDFDataTransportStream({length:i.length,initialData:i.initialData,progressiveDone:i.progressiveDone,contentDispositionFilename:i.contentDispositionFilename,disableRange:i.disableRange,disableStream:i.disableStream},O):i.data||(N=createPDFNetworkStream({url:i.url,length:i.length,httpHeaders:i.httpHeaders,withCredentials:i.withCredentials,rangeChunkSize:i.rangeChunkSize,disableRange:i.disableRange,disableStream:i.disableStream})),y(N)});return Promise.all([E,T]).then(function([y,N]){if(o.destroyed)throw new Error("Loading aborted");const W=new _message_handler.MessageHandler(r,y,w.port),V=new WorkerTransport(W,o,N,i);o._transport=V,W.send("Ready",null)})}).catch(o._capability.reject),o}function _fetchDocument(G,o,P,i){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(G,o,P,i){if(G.destroyed)throw new Error("Worker was destroyed");P&&(o.length=P.length,o.initialData=P.initialData,o.progressiveDone=P.progressiveDone,o.contentDispositionFilename=P.contentDispositionFilename);const O=yield G.messageHandler.sendWithPromise("GetDocRequest",{docId:i,apiVersion:"2.14.305",source:{data:o.data,url:o.url,password:o.password,disableAutoFetch:o.disableAutoFetch,rangeChunkSize:o.rangeChunkSize,length:o.length},maxImageSize:o.maxImageSize,disableFontFace:o.disableFontFace,docBaseUrl:o.docBaseUrl,ignoreErrors:o.ignoreErrors,isEvalSupported:o.isEvalSupported,fontExtraProperties:o.fontExtraProperties,enableXfa:o.enableXfa,useSystemFonts:o.useSystemFonts,cMapUrl:o.useWorkerFetch?o.cMapUrl:null,standardFontDataUrl:o.useWorkerFetch?o.standardFontDataUrl:null});if(G.destroyed)throw new Error("Worker was destroyed");return O})).apply(this,arguments)}class PDFDocumentLoadingTask{constructor(){var o,P;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(o=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),P=o++,o)),P}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var o=this;return _asyncToGenerator(function*(){o.destroyed=!0,yield o._transport?.destroy(),o._transport=null,o._worker&&(o._worker.destroy(),o._worker=null)})()}}var _docId={writable:!0,value:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,P,i=!1,O=null){this.length=o,this.initialData=P,this.progressiveDone=i,this.contentDispositionFilename=O,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,P){for(const i of this._rangeListeners)i(o,P)}onDataProgress(o,P){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(o,P)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(const P of this._progressiveReadListeners)P(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,P){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,P){var O,i=this;this._pdfInfo=o,this._transport=P,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(O=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),i.stats||{streamTypes:{},fontTypes:{}}}),function(){return O.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(o,P,i,O,w=!1){this._pageIndex=o,this._pageInfo=P,this._ownerDocument=O,this._transport=i,this._stats=w?new _display_utils.StatTimer:null,this._pdfBug=w,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:P=this.rotate,offsetX:i=0,offsetY:O=0,dontFlip:w=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:P,offsetX:i,offsetY:O,dontFlip:w})}getAnnotations({intent:o="display"}={}){const P=this._transport.getRenderingIntent(o);let i=this._annotationPromises.get(P.cacheKey);return i||(i=this._transport.getAnnotations(this._pageIndex,P.renderingIntent),this._annotationPromises.set(P.cacheKey,i),i=i.then(O=>{for(const w of O)void 0!==w.titleObj&&Object.defineProperty(w,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),w.titleObj.str)}),void 0!==w.contentsObj&&Object.defineProperty(w,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),w.contentsObj.str)});return O})),i}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}getXfa(){var o=this;return _asyncToGenerator(function*(){return o._transport._htmlForXfa?.children[o._pageIndex]||null})()}render({canvasContext:o,viewport:P,intent:i="display",annotationMode:O=_util.AnnotationMode.ENABLE,transform:w=null,imageLayer:r=null,canvasFactory:E=null,background:T=null,optionalContentConfigPromise:y=null,annotationCanvasMap:N=null,pageColors:W=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&O===_util.AnnotationMode.ENABLE&&(O=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&O===_util.AnnotationMode.ENABLE&&(O=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const V=this._transport.getRenderingIntent(i,O);this.pendingCleanup=!1,y||(y=this._transport.getOptionalContentConfig());let D=this._intentStates.get(V.cacheKey);D||(D=Object.create(null),this._intentStates.set(V.cacheKey,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const H=E||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),_=!!(V.renderingIntent&_util.RenderingIntentFlag.PRINT);D.displayReadyCapability||(D.displayReadyCapability=(0,_util.createPromiseCapability)(),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(V));const x=A=>{D.renderTasks.delete(b),(this.cleanupAfterRender||_)&&(this.pendingCleanup=!0),this._tryCleanup(),A?(b.capability.reject(A),this._abortOperatorList({intentState:D,reason:A instanceof Error?A:new Error(A)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},b=new InternalRenderTask({callback:x,params:{canvasContext:o,viewport:P,transform:w,imageLayer:r,background:T},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:N,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:H,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:W});(D.renderTasks||=new Set).add(b);const C=b.task;return Promise.all([D.displayReadyCapability.promise,y]).then(([A,v])=>{this.pendingCleanup?x():(this._stats&&this._stats.time("Rendering"),b.initializeGraphics({transparency:A,optionalContentConfig:v}),b.operatorListChanged())}).catch(x),C}getOperatorList({intent:o="display",annotationMode:P=_util.AnnotationMode.ENABLE}={}){const O=this._transport.getRenderingIntent(o,P,!0);let r,w=this._intentStates.get(O.cacheKey);return w||(w=Object.create(null),this._intentStates.set(O.cacheKey,w)),w.opListReadCapability||(r=Object.create(null),r.operatorListChanged=function i(){w.operatorList.lastChunk&&(w.opListReadCapability.resolve(w.operatorList),w.renderTasks.delete(r))},w.opListReadCapability=(0,_util.createPromiseCapability)(),(w.renderTasks||=new Set).add(r),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(O)),w.opListReadCapability.promise}streamTextContent({disableCombineTextItems:o=!1,includeMarkedContent:P=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==o,includeMarkedContent:!0===P},{highWaterMark:100,size:O=>O.items.length})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>_xfa_text.XfaText.textContent(i));const P=this.streamTextContent(o);return new Promise(function(i,O){const r=P.getReader(),E={items:[],styles:Object.create(null)};!function w(){r.read().then(function({value:T,done:y}){y?i(E):(Object.assign(E.styles,T.styles),E.items.push(...T.items),w())},O)}()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const o=[];for(const P of this._intentStates.values())if(this._abortOperatorList({intentState:P,reason:new Error("Page was destroyed."),force:!0}),!P.opListReadCapability)for(const i of P.renderTasks)o.push(i.completed),i.cancel();this.objs.clear();for(const P of this._bitmaps)P.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(o)}cleanup(o=!1){return this.pendingCleanup=!0,this._tryCleanup(o)}_tryCleanup(o=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:P,operatorList:i}of this._intentStates.values())if(P.size>0||!i.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,o&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const P of this._bitmaps)P.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(o,P){const i=this._intentStates.get(P);i&&(this._stats&&this._stats.timeEnd("Page Request"),i.displayReadyCapability&&i.displayReadyCapability.resolve(o))}_renderPageChunk(o,P){for(let i=0,O=o.length;i<O;i++)P.operatorList.fnArray.push(o.fnArray[i]),P.operatorList.argsArray.push(o.argsArray[i]);P.operatorList.lastChunk=o.lastChunk;for(const i of P.renderTasks)i.operatorListChanged();o.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:o,cacheKey:P}){const O=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:P,annotationStorage:o&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),w=this._intentStates.get(P);w.streamReader=O;const r=()=>{O.read().then(({value:E,done:T})=>{T?w.streamReader=null:this._transport.destroyed||(this._renderPageChunk(E,w),r())},E=>{if(w.streamReader=null,!this._transport.destroyed){if(w.operatorList){w.operatorList.lastChunk=!0;for(const T of w.renderTasks)T.operatorListChanged();this._tryCleanup()}if(w.displayReadyCapability)w.displayReadyCapability.reject(E);else{if(!w.opListReadCapability)throw E;w.opListReadCapability.reject(E)}}})};r()}_abortOperatorList({intentState:o,reason:P,force:i=!1}){if(o.streamReader){if(!i){if(o.renderTasks.size>0)return;if(P instanceof _display_utils.RenderingCancelledException)return void(o.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:o,reason:P,force:!0}),o.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(o.streamReader.cancel(new _util.AbortException(P.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(const[O,w]of this._intentStates)if(w===o){this._intentStates.delete(O);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(o,P){const i={data:structuredClone(o,P)};this._deferred.then(()=>{for(const O of this._listeners)O.call(this,i)})}addEventListener(o,P){this._listeners.push(P)}removeEventListener(o,P){const i=this._listeners.indexOf(P);this._listeners.splice(i,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const G=document?.currentScript?.src;G&&(PDFWorkerUtil.fallbackWorkerSrc=G.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(G,o){let P;try{if(P=new URL(G),!P.origin||"null"===P.origin)return!1}catch{return!1}const i=new URL(o,P);return P.origin===i.origin},PDFWorkerUtil.createCDNWrapper=function(G){return URL.createObjectURL(new Blob([`importScripts("${G}");`]))};class _PDFWorker{constructor({name:G=null,port:o=null,verbosity:P=(0,_util.getVerbosityLevel)()}={}){if(o&&_classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).has(o))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=G,this.destroyed=!1,this.verbosity=P,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,o)return _classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).set(o,this),void this._initializeFromPort(o);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(G){this._port=G,this._messageHandler=new _message_handler.MessageHandler("main","worker",G),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let G=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,G)||(G=PDFWorkerUtil.createCDNWrapper(new URL(G,window.location).href));const o=new Worker(G),P=new _message_handler.MessageHandler("main","worker",o),i=()=>{o.removeEventListener("error",O),P.destroy(),o.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},O=()=>{this._webWorker||i()};o.addEventListener("error",O),P.on("test",r=>{o.removeEventListener("error",O),this.destroyed?i():r?(this._messageHandler=P,this._port=o,this._webWorker=o,this._readyCapability.resolve(),P.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),P.destroy(),o.terminate())}),P.on("ready",r=>{if(o.removeEventListener("error",O),this.destroyed)i();else try{w()}catch{this._setupFakeWorker()}});const w=()=>{const r=new Uint8Array;P.send("test",r,[r.buffer])};return void w()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(G=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const o=new LoopbackPort;this._port=o;const P="fake"+PDFWorkerUtil.fakeWorkerId++,i=new _message_handler.MessageHandler(P+"_worker",P,o);G.setup(i,o);const O=new _message_handler.MessageHandler(P,P+"_worker",o);this._messageHandler=O,this._readyCapability.resolve(),O.send("configure",{verbosity:this.verbosity})}).catch(G=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${G.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(G){if(!G?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,_PDFWorker,_workerPorts).has(G.port)?_classStaticPrivateFieldSpecGet(this,_PDFWorker,_workerPorts).get(G.port):new _PDFWorker(G)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function G(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}var _workerPorts={writable:!0,value:new WeakMap};exports.PDFWorker=_PDFWorker,_PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(o,P,i,O){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=o,this.loadingTask=P,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:P.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:O.ownerDocument,styleElement:O.styleElement}),this._params=O,O.useWorkerFetch||(this.CMapReaderFactory=new O.CMapReaderFactory({baseUrl:O.cMapUrl,isCompressed:O.cMapPacked}),this.StandardFontDataFactory=new O.StandardFontDataFactory({baseUrl:O.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(o,P=_util.AnnotationMode.ENABLE,i=!1){let O=_util.RenderingIntentFlag.DISPLAY,w="";switch(o){case"any":O=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":O=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(P){case _util.AnnotationMode.DISABLE:O+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:O+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:O+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,w=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${P}`)}return i&&(O+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:O,cacheKey:`${O}_${w}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const o=[];for(const i of _classPrivateFieldGet(this,_pageCache).values())o.push(i._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const P=this.messageHandler.sendWithPromise("Terminate",null);return o.push(P),Promise.all(o).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:o,loadingTask:P}=this;o.on("GetReader",(i,O)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=w=>{this._lastProgress={loaded:w.loaded,total:w.total}},O.onPull=()=>{this._fullReader.read().then(function({value:w,done:r}){r?O.close():((0,_util.assert)((0,_util.isArrayBuffer)(w),"GetReader - expected an ArrayBuffer."),O.enqueue(new Uint8Array(w),1,[w]))}).catch(w=>{O.error(w)})},O.onCancel=w=>{this._fullReader.cancel(w),O.ready.catch(r=>{if(!this.destroyed)throw r})}}),o.on("ReaderHeadersReady",i=>{const O=(0,_util.createPromiseCapability)(),w=this._fullReader;return w.headersReady.then(()=>{(!w.isStreamingSupported||!w.isRangeSupported)&&(this._lastProgress&&P.onProgress?.(this._lastProgress),w.onProgress=r=>{P.onProgress?.({loaded:r.loaded,total:r.total})}),O.resolve({isStreamingSupported:w.isStreamingSupported,isRangeSupported:w.isRangeSupported,contentLength:w.contentLength})},O.reject),O.promise}),o.on("GetRangeReader",(i,O)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const w=this._networkStream.getRangeReader(i.begin,i.end);w?(O.onPull=()=>{w.read().then(function({value:r,done:E}){E?O.close():((0,_util.assert)((0,_util.isArrayBuffer)(r),"GetRangeReader - expected an ArrayBuffer."),O.enqueue(new Uint8Array(r),1,[r]))}).catch(r=>{O.error(r)})},O.onCancel=r=>{w.cancel(r),O.ready.catch(E=>{if(!this.destroyed)throw E})}):O.close()}),o.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,P._capability.resolve(new PDFDocumentProxy(i,this))}),o.on("DocException",function(i){let O;switch(i.name){case"PasswordException":O=new _util.PasswordException(i.message,i.code);break;case"InvalidPDFException":O=new _util.InvalidPDFException(i.message);break;case"MissingPDFException":O=new _util.MissingPDFException(i.message);break;case"UnexpectedResponseException":O=new _util.UnexpectedResponseException(i.message,i.status);break;case"UnknownErrorException":O=new _util.UnknownErrorException(i.message,i.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}P._capability.reject(O)}),o.on("PasswordRequest",i=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),P.onPassword){const O=w=>{w instanceof Error?this._passwordCapability.reject(w):this._passwordCapability.resolve({password:w})};try{P.onPassword(O,i.code)}catch(w){this._passwordCapability.reject(w)}}else this._passwordCapability.reject(new _util.PasswordException(i.message,i.code));return this._passwordCapability.promise}),o.on("DataLoaded",i=>{P.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),o.on("StartRenderPage",i=>{this.destroyed||_classPrivateFieldGet(this,_pageCache).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),o.on("commonobj",([i,O,w])=>{if(!this.destroyed&&!this.commonObjs.has(i))switch(O){case"Font":const r=this._params;if("error"in w){const y=w.error;(0,_util.warn)(`Error during font loading: ${y}`),this.commonObjs.resolve(i,y);break}let E=null;r.pdfBug&&globalThis.FontInspector?.enabled&&(E={registerFont(y,N){globalThis.FontInspector.fontAdded(y,N)}});const T=new _font_loader.FontFaceObject(w,{isEvalSupported:r.isEvalSupported,disableFontFace:r.disableFontFace,ignoreErrors:r.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:E});this.fontLoader.bind(T).catch(y=>o.sendWithPromise("FontFallback",{id:i})).finally(()=>{!r.fontExtraProperties&&T.data&&(T.data=null),this.commonObjs.resolve(i,T)});break;case"FontPath":case"Image":this.commonObjs.resolve(i,w);break;default:throw new Error(`Got unknown common object type ${O}`)}}),o.on("obj",([i,O,w,r])=>{if(this.destroyed)return;const E=_classPrivateFieldGet(this,_pageCache).get(O);if(!E.objs.has(i))switch(w){case"Image":E.objs.resolve(i,r);const T=8e6;if(r){let y;if(r.bitmap){const{bitmap:N,width:W,height:V}=r;y=W*V*4,E._bitmaps.add(N)}else y=r.data?.length||0;y>T&&(E.cleanupAfterRender=!0)}break;case"Pattern":E.objs.resolve(i,r);break;default:throw new Error(`Got unknown object type ${w}`)}}),o.on("DocProgress",i=>{this.destroyed||P.onProgress?.({loaded:i.loaded,total:i.total})}),o.on("DocStats",i=>{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(i.streamTypes),fontTypes:Object.freeze(i.fontTypes)}))}),o.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),o.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:o}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(o)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(new Error("Invalid page request."));const P=o-1,i=_classPrivateFieldGet(this,_pagePromises).get(P);if(i)return i;const O=this.messageHandler.sendWithPromise("GetPage",{pageIndex:P}).then(w=>{if(this.destroyed)throw new Error("Transport destroyed");const r=new PDFPageProxy(P,w,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(P,r),r});return _classPrivateFieldGet(this,_pagePromises).set(P,O),O}getPageIndex(o){return"object"!=typeof o||null===o||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,P){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:P})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return"string"!=typeof o?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(o=>({info:o[0],metadata:o[1]?new _metadata.Metadata(o[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(o=!1){var P=this;return _asyncToGenerator(function*(){if(yield P.messageHandler.sendWithPromise("Cleanup",null),!P.destroyed){for(const i of _classPrivateFieldGet(P,_pageCache).values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);P.commonObjs.clear(),o||P.fontLoader.clear(),_classPrivateFieldSet(P,_metadataPromise,null),P._getFieldObjectsPromise=null,P._hasJSActionsPromise=null}})()}get loadingParams(){const o=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o.disableAutoFetch,enableXfa:o.enableXfa})}}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(o,P=null){if(P){const O=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,o);return O.capability.promise.then(()=>P(O.data)),null}const i=_classPrivateFieldGet(this,_objs)[o];if(!i?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${o}.`);return i.data}has(o){return _classPrivateFieldGet(this,_objs)[o]?.capability.settled||!1}resolve(o,P=null){const i=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,o);i.data=P,i.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(G){return _classPrivateFieldGet(this,_objs)[G]||(_classPrivateFieldGet(this,_objs)[G]={capability:(0,_util.createPromiseCapability)(),data:null})}class RenderTask{constructor(o){this._internalRenderTask=o,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor({callback:o,params:P,objs:i,commonObjs:O,annotationCanvasMap:w,operatorList:r,pageIndex:E,canvasFactory:T,useRequestAnimationFrame:y=!1,pdfBug:N=!1,pageColors:W=null}){this.callback=o,this.params=P,this.objs=i,this.commonObjs=O,this.annotationCanvasMap=w,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=E,this.canvasFactory=T,this._pdfBug=N,this.pageColors=W,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===y&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=P.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:P}){if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:O,transform:w,imageLayer:r,background:E}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,r,P,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:w,viewport:O,transparency:o,background:E}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(o=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var o=this;return _asyncToGenerator(function*(){o.cancelled||(o.operatorListIdx=o.gfx.executeOperatorList(o.operatorList,o.operatorListIdx,o._continueBound,o.stepper),o.operatorListIdx===o.operatorList.argsArray.length&&(o.running=!1,o.operatorList.lastChunk&&(o.gfx.endDrawing(),o._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(o._canvas),o.callback())))})()}}var _canvasInUse={writable:!0,value:new WeakSet};const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StatTimer=o.RenderingCancelledException=o.PixelsPerInch=o.PageViewport=o.PDFDateString=o.DOMStandardFontDataFactory=o.DOMSVGFactory=o.DOMCanvasFactory=o.DOMCMapReaderFactory=void 0,o.deprecated=function n(m){console.log("Deprecated API usage: "+m)},o.getFilenameFromUrl=function b(m){const g=m.indexOf("#"),d=m.indexOf("?"),R=Math.min(g>0?g:m.length,d>0?d:m.length);return m.substring(m.lastIndexOf("/",R)+1,R)},o.getPdfFilenameFromUrl=function C(m,g="document.pdf"){if("string"!=typeof m)return g;if(_(m))return(0,O.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),g;const R=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,k=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(m);let j=R.exec(k[1])||R.exec(k[2])||R.exec(k[3]);if(j&&(j=j[0],j.includes("%")))try{j=R.exec(decodeURIComponent(j))[0]}catch{}return j||g},o.getXfaPageViewport=function u(m,{scale:g=1,rotation:d=0}){const{width:R,height:k}=m.attributes.style,j=[0,0,parseInt(R),parseInt(k)];return new D({viewBox:j,scale:g,rotation:d})},o.isDataScheme=_,o.isPdfFile=function x(m){return"string"==typeof m&&/\.pdf$/i.test(m)},o.isValidFetchUrl=v,o.loadScript=function t(m,g=!1){return new Promise((d,R)=>{const k=document.createElement("script");k.src=m,k.onload=function(j){g&&k.remove(),d(j)},k.onerror=function(){R(new Error(`Cannot load script at: ${k.src}`))},(document.head||document.documentElement).appendChild(k)})};var i=P(6),O=P(1);class r{}function T(m){return y.apply(this,arguments)}function y(){return(y=_asyncToGenerator(function*(m,g=!1){if(v(m,document.baseURI)){const d=yield fetch(m);if(!d.ok)throw new Error(d.statusText);return g?new Uint8Array(yield d.arrayBuffer()):(0,O.stringToBytes)(yield d.text())}return new Promise((d,R)=>{const k=new XMLHttpRequest;k.open("GET",m,!0),g&&(k.responseType="arraybuffer"),k.onreadystatechange=()=>{if(k.readyState===XMLHttpRequest.DONE){if(200===k.status||0===k.status){let j;if(g&&k.response?j=new Uint8Array(k.response):!g&&k.responseText&&(j=(0,O.stringToBytes)(k.responseText)),j)return void d(j)}R(new Error(k.statusText))}},k.send(null)})})).apply(this,arguments)}_defineProperty(r,"CSS",96),_defineProperty(r,"PDF",72),_defineProperty(r,"PDF_TO_CSS_UNITS",r.CSS/r.PDF),o.PixelsPerInch=r,o.DOMCanvasFactory=class E extends i.BaseCanvasFactory{constructor({ownerDocument:g=globalThis.document}={}){super(),this._document=g}_createCanvas(g,d){const R=this._document.createElement("canvas");return R.width=g,R.height=d,R}},o.DOMCMapReaderFactory=class N extends i.BaseCMapReaderFactory{_fetchData(g,d){return T(g,this.isCompressed).then(R=>({cMapData:R,compressionType:d}))}},o.DOMStandardFontDataFactory=class W extends i.BaseStandardFontDataFactory{_fetchData(g){return T(g,!0)}},o.DOMSVGFactory=class V extends i.BaseSVGFactory{_createSVG(g){return document.createElementNS("http://www.w3.org/2000/svg",g)}};class D{constructor({viewBox:g,scale:d,rotation:R,offsetX:k=0,offsetY:j=0,dontFlip:$=!1}){this.viewBox=g,this.scale=d,this.rotation=R,this.offsetX=k,this.offsetY=j;const Q=(g[2]+g[0])/2,K=(g[3]+g[1])/2;let re,fe,ue,F,a,e,s,l;switch((R%=360)<0&&(R+=360),R){case 180:re=-1,fe=0,ue=0,F=1;break;case 90:re=0,fe=1,ue=1,F=0;break;case 270:re=0,fe=-1,ue=-1,F=0;break;case 0:re=1,fe=0,ue=0,F=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}$&&(ue=-ue,F=-F),0===re?(a=Math.abs(K-g[1])*d+k,e=Math.abs(Q-g[0])*d+j,s=Math.abs(g[3]-g[1])*d,l=Math.abs(g[2]-g[0])*d):(a=Math.abs(Q-g[0])*d+k,e=Math.abs(K-g[1])*d+j,s=Math.abs(g[2]-g[0])*d,l=Math.abs(g[3]-g[1])*d),this.transform=[re*d,fe*d,ue*d,F*d,a-re*d*Q-ue*d*K,e-fe*d*Q-F*d*K],this.width=s,this.height=l}clone({scale:g=this.scale,rotation:d=this.rotation,offsetX:R=this.offsetX,offsetY:k=this.offsetY,dontFlip:j=!1}={}){return new D({viewBox:this.viewBox.slice(),scale:g,rotation:d,offsetX:R,offsetY:k,dontFlip:j})}convertToViewportPoint(g,d){return O.Util.applyTransform([g,d],this.transform)}convertToViewportRectangle(g){const d=O.Util.applyTransform([g[0],g[1]],this.transform),R=O.Util.applyTransform([g[2],g[3]],this.transform);return[d[0],d[1],R[0],R[1]]}convertToPdfPoint(g,d){return O.Util.applyInverseTransform([g,d],this.transform)}}function _(m){const g=m.length;let d=0;for(;d<g&&""===m[d].trim();)d++;return"data:"===m.substring(d,d+5).toLowerCase()}function v(m,g){try{const{protocol:d}=g?new URL(m,g):new URL(m);return"http:"===d||"https:"===d}catch{return!1}}let h;o.PageViewport=D,o.RenderingCancelledException=class H extends O.BaseException{constructor(g,d){super(g,"RenderingCancelledException"),this.type=d}},o.StatTimer=class A{constructor(){this.started=Object.create(null),this.times=[]}time(g){g in this.started&&(0,O.warn)(`Timer is already running for ${g}`),this.started[g]=Date.now()}timeEnd(g){g in this.started||(0,O.warn)(`Timer has not been started for ${g}`),this.times.push({name:g,start:this.started[g],end:Date.now()}),delete this.started[g]}toString(){const g=[];let d=0;for(const R of this.times){const k=R.name;k.length>d&&(d=k.length)}for(const R of this.times){const k=R.end-R.start;g.push(`${R.name.padEnd(d)} ${k}ms\n`)}return g.join("")}},o.PDFDateString=class S{static toDateObject(g){if(!g||"string"!=typeof g)return null;h||(h=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const d=h.exec(g);if(!d)return null;const R=parseInt(d[1],10);let k=parseInt(d[2],10);k=k>=1&&k<=12?k-1:0;let j=parseInt(d[3],10);j=j>=1&&j<=31?j:1;let $=parseInt(d[4],10);$=$>=0&&$<=23?$:0;let Q=parseInt(d[5],10);Q=Q>=0&&Q<=59?Q:0;let K=parseInt(d[6],10);K=K>=0&&K<=59?K:0;const re=d[7]||"Z";let fe=parseInt(d[8],10);fe=fe>=0&&fe<=23?fe:0;let ue=parseInt(d[9],10)||0;return ue=ue>=0&&ue<=59?ue:0,"-"===re?($+=fe,Q+=ue):"+"===re&&($-=fe,Q-=ue),new Date(Date.UTC(R,k,j,$,Q,K))}}},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseStandardFontDataFactory=o.BaseSVGFactory=o.BaseCanvasFactory=o.BaseCMapReaderFactory=void 0;var i=P(1);class O{constructor(){this.constructor===O&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(y,N){if(y<=0||N<=0)throw new Error("Invalid canvas size");const W=this._createCanvas(y,N);return{canvas:W,context:W.getContext("2d")}}reset(y,N,W){if(!y.canvas)throw new Error("Canvas is not specified");if(N<=0||W<=0)throw new Error("Invalid canvas size");y.canvas.width=N,y.canvas.height=W}destroy(y){if(!y.canvas)throw new Error("Canvas is not specified");y.canvas.width=0,y.canvas.height=0,y.canvas=null,y.context=null}_createCanvas(y,N){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}o.BaseCanvasFactory=O;class w{constructor({baseUrl:y=null,isCompressed:N=!1}){this.constructor===w&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=y,this.isCompressed=N}fetch({name:y}){var N=this;return _asyncToGenerator(function*(){if(!N.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!y)throw new Error("CMap name must be specified.");const W=N.baseUrl+y+(N.isCompressed?".bcmap":"");return N._fetchData(W,N.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE).catch(D=>{throw new Error(`Unable to load ${N.isCompressed?"binary ":""}CMap at: ${W}`)})})()}_fetchData(y,N){(0,i.unreachable)("Abstract method `_fetchData` called.")}}o.BaseCMapReaderFactory=w;class r{constructor({baseUrl:y=null}){this.constructor===r&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=y}fetch({filename:y}){var N=this;return _asyncToGenerator(function*(){if(!N.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!y)throw new Error("Font filename must be specified.");const W=`${N.baseUrl}${y}`;return N._fetchData(W).catch(V=>{throw new Error(`Unable to load font data at: ${W}`)})})()}_fetchData(y){(0,i.unreachable)("Abstract method `_fetchData` called.")}}o.BaseStandardFontDataFactory=r;class E{constructor(){this.constructor===E&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(y,N){if(y<=0||N<=0)throw new Error("Invalid SVG dimensions");const W=this._createSVG("svg:svg");return W.setAttribute("version","1.1"),W.setAttribute("width",`${y}px`),W.setAttribute("height",`${N}px`),W.setAttribute("preserveAspectRatio","none"),W.setAttribute("viewBox",`0 0 ${y} ${N}`),W}createElement(y){if("string"!=typeof y)throw new Error("Invalid SVG element type");return this._createSVG(y)}_createSVG(y){(0,i.unreachable)("Abstract method `_createSVG` called.")}}o.BaseSVGFactory=E},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FontLoader=o.FontFaceObject=void 0;var i=P(1);class O{constructor({docId:T,onUnsupportedFeature:y,ownerDocument:N=globalThis.document,styleElement:W=null}){this.constructor===O&&(0,i.unreachable)("Cannot initialize BaseFontLoader."),this.docId=T,this._onUnsupportedFeature=y,this._document=N,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(T){this.nativeFontFaces.push(T),this._document.fonts.add(T)}insertRule(T){let y=this.styleElement;y||(y=this.styleElement=this._document.createElement("style"),y.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(y));const N=y.sheet;N.insertRule(T,N.cssRules.length)}clear(){for(const T of this.nativeFontFaces)this._document.fonts.delete(T);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(T){var y=this;return _asyncToGenerator(function*(){if(T.attached||T.missingFile)return;if(T.attached=!0,y.isFontLoadingAPISupported){const W=T.createNativeFontFace();if(W){y.addNativeFontFace(W);try{yield W.loaded}catch(V){throw y._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,i.warn)(`Failed to load font '${W.family}': '${V}'.`),T.disableFontFace=!0,V}}return}const N=T.createFontFaceRule();if(N){if(y.insertRule(N),y.isSyncFontLoadingSupported)return;yield new Promise(W=>{const V=y._queueLoadingCallback(W);y._prepareFontLoadEvent([N],[T],V)})}})()}_queueLoadingCallback(T){(0,i.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){return(0,i.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){(0,i.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,i.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(T,y,N){(0,i.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let w;o.FontLoader=w,o.FontLoader=w=class extends O{constructor(T){super(T),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let T=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(T=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",T)}_queueLoadingCallback(T){const N=this.loadingContext,W={id:"pdfjs-font-loading-"+N.nextRequestId++,done:!1,complete:function y(){for((0,i.assert)(!W.done,"completeRequest() cannot be called twice."),W.done=!0;N.requests.length>0&&N.requests[0].done;){const V=N.requests.shift();setTimeout(V.callback,0)}},callback:T};return N.requests.push(W),W}get _loadTestFont(){return(0,i.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(T,y,N){function W(R,k){return R.charCodeAt(k)<<24|R.charCodeAt(k+1)<<16|R.charCodeAt(k+2)<<8|255&R.charCodeAt(k+3)}function V(R,k,j,$){return R.substring(0,k)+$+R.substring(k+j)}let D,H;const _=this._document.createElement("canvas");_.width=1,_.height=1;const x=_.getContext("2d");let b=0;const A=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=V(v,976,A.length,A);const h=1482184792;let S=W(v,16);for(D=0,H=A.length-3;D<H;D+=4)S=S-h+W(A,D)|0;D<A.length&&(S=S-h+W(A+"XXX",D)|0),v=V(v,16,4,(0,i.string32)(S));const u=`url(data:font/opentype;base64,${btoa(v)});`;this.insertRule(`@font-face {font-family:"${A}";src:${u}}`);const g=[];for(const R of y)g.push(R.loadedName);g.push(A);const d=this._document.createElement("div");d.style.visibility="hidden",d.style.width=d.style.height="10px",d.style.position="absolute",d.style.top=d.style.left="0px";for(const R of g){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=R,d.appendChild(k)}this._document.body.appendChild(d),function C(R,k){if(b++,b>30)return(0,i.warn)("Load test font never loaded."),void k();x.font="30px "+R,x.fillText(".",0,20),x.getImageData(0,0,1,1).data[3]>0?k():setTimeout(C.bind(null,R,k))}(A,()=>{d.remove(),N.complete()})}},o.FontFaceObject=class r{constructor(T,{isEvalSupported:y=!0,disableFontFace:N=!1,ignoreErrors:W=!1,onUnsupportedFeature:V,fontRegistry:D=null}){this.compiledGlyphs=Object.create(null);for(const H in T)this[H]=T[H];this.isEvalSupported=!1!==y,this.disableFontFace=!0===N,this.ignoreErrors=!0===W,this._onUnsupportedFeature=V,this.fontRegistry=D}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let T;if(this.cssFontInfo){const y={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(y.style=`oblique ${this.cssFontInfo.italicAngle}deg`),T=new FontFace(this.cssFontInfo.fontFamily,this.data,y)}else T=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),T}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const T=(0,i.bytesToString)(this.data),y=`url(data:${this.mimetype};base64,${btoa(T)});`;let N;if(this.cssFontInfo){let W=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(W+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),N=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${W}src:${y}}`}else N=`@font-face {font-family:"${this.loadedName}";src:${y}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,y),N}getPathGenerator(T,y){if(void 0!==this.compiledGlyphs[y])return this.compiledGlyphs[y];let N;try{N=T.get(this.loadedName+"_path_"+y)}catch(W){if(!this.ignoreErrors)throw W;return this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,i.warn)(`getPathGenerator - ignoring character: "${W}".`),this.compiledGlyphs[y]=function(V,D){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const W=[];for(const V of N){const D=void 0!==V.args?V.args.join(","):"";W.push("c.",V.cmd,"(",D,");\n")}return this.compiledGlyphs[y]=new Function("c","size",W.join(""))}return this.compiledGlyphs[y]=function(W,V){for(const D of N)"scale"===D.cmd&&(D.args=[V,-V]),W[D.cmd].apply(W,D.args)}}}},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationStorage=void 0;var i=P(9),O=P(1);o.AnnotationStorage=class w{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(E,T){const y=this._storage.get(E);return void 0===y?T:Object.assign(T,y)}getRawValue(E){return this._storage.get(E)}setValue(E,T){const y=this._storage.get(E);let N=!1;if(void 0!==y)for(const[W,V]of Object.entries(T))y[W]!==V&&(N=!0,y[W]=V);else N=!0,this._storage.set(E,T);N&&this._setModified()}getAll(){return this._storage.size>0?(0,O.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const E=new i.MurmurHash3_64;for(const[T,y]of this._storage)E.update(`${T}:${JSON.stringify(y)}`);return E.hexdigest()}}},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MurmurHash3_64=void 0;var i=P(1);const O=3285377520,w=4294901760,r=65535;o.MurmurHash3_64=class E{constructor(y){this.h1=y?4294967295&y:O,this.h2=y?4294967295&y:O}update(y){let N,W;if("string"==typeof y){N=new Uint8Array(2*y.length),W=0;for(let h=0,S=y.length;h<S;h++){const u=y.charCodeAt(h);u<=255?N[W++]=u:(N[W++]=u>>>8,N[W++]=255&u)}}else{if(!(0,i.isArrayBuffer)(y))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");N=y.slice(),W=N.byteLength}const V=W>>2,D=W-4*V,H=new Uint32Array(N.buffer,0,V);let _=0,x=0,b=this.h1,C=this.h2;const A=3432918353,v=461845907,t=A&r,n=v&r;for(let h=0;h<V;h++)1&h?(_=H[h],_=_*A&w|_*t&r,_=_<<15|_>>>17,_=_*v&w|_*n&r,b^=_,b=b<<13|b>>>19,b=5*b+3864292196):(x=H[h],x=x*A&w|x*t&r,x=x<<15|x>>>17,x=x*v&w|x*n&r,C^=x,C=C<<13|C>>>19,C=5*C+3864292196);switch(_=0,D){case 3:_^=N[4*V+2]<<16;case 2:_^=N[4*V+1]<<8;case 1:_^=N[4*V],_=_*A&w|_*t&r,_=_<<15|_>>>17,_=_*v&w|_*n&r,1&V?b^=_:C^=_}this.h1=b,this.h2=C}hexdigest(){let y=this.h1,N=this.h2;y^=N>>>1,y=3981806797*y&w|36045*y&r,N=4283543511*N&w|(2950163797*(N<<16|y>>>16)&w)>>>16,y^=N>>>1,y=444984403*y&w|60499*y&r,N=3301882366*N&w|(3120437893*(N<<16|y>>>16)&w)>>>16,y^=N>>>1;const W=(y>>>0).toString(16),V=(N>>>0).toString(16);return W.padStart(8,"0")+V.padStart(8,"0")}}},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CanvasGraphics=void 0;var i=P(1),O=P(11),w=P(12),r=P(3),E=P(5);const N=4096,_=16,x=1.000001;function C(F){if(F._transformStack&&(F._transformStack=[]),!F.mozCurrentTransform){F._originalSave=F.save,F._originalRestore=F.restore,F._originalRotate=F.rotate,F._originalScale=F.scale,F._originalTranslate=F.translate,F._originalTransform=F.transform,F._originalSetTransform=F.setTransform,F._originalResetTransform=F.resetTransform,F._transformMatrix=F._transformMatrix||[1,0,0,1,0,0],F._transformStack=[];try{const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(F),"lineWidth");F._setLineWidth=a.set,F._getLineWidth=a.get,Object.defineProperty(F,"lineWidth",{set:function(s){this._setLineWidth(s*x)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(F,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(F,"mozCurrentTransformInverse",{get:function(){const[e,s,l,f,p,c]=this._transformMatrix,L=e*f-s*l,q=s*l-e*f;return[f/L,s/q,l/q,e/L,(f*p-l*c)/q,(s*p-e*c)/L]}}),F.save=function(){const e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},F.restore=function(){0===this._transformStack.length&&(0,i.warn)("Tried to restore a ctx when the stack was already empty.");const e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},F.translate=function(e,s){const l=this._transformMatrix;l[4]=l[0]*e+l[2]*s+l[4],l[5]=l[1]*e+l[3]*s+l[5],this._originalTranslate(e,s)},F.scale=function(e,s){const l=this._transformMatrix;l[0]*=e,l[1]*=e,l[2]*=s,l[3]*=s,this._originalScale(e,s)},F.transform=function(e,s,l,f,p,c){const L=this._transformMatrix;this._transformMatrix=[L[0]*e+L[2]*s,L[1]*e+L[3]*s,L[0]*l+L[2]*f,L[1]*l+L[3]*f,L[0]*p+L[2]*c+L[4],L[1]*p+L[3]*c+L[5]],F._originalTransform(e,s,l,f,p,c)},F.setTransform=function(e,s,l,f,p,c){this._transformMatrix=[e,s,l,f,p,c],F._originalSetTransform(e,s,l,f,p,c)},F.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],F._originalResetTransform()},F.rotate=function(e){const s=Math.cos(e),l=Math.sin(e),f=this._transformMatrix;this._transformMatrix=[f[0]*s+f[2]*l,f[1]*s+f[3]*l,f[0]*-l+f[2]*s,f[1]*-l+f[3]*s,f[4],f[5]],this._originalRotate(e)}}}class A{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,e,s,l){let f;return void 0!==this.cache[a]?(f=this.cache[a],this.canvasFactory.reset(f,e,s),f.context.setTransform(1,0,0,1,0,0)):(f=this.canvasFactory.create(e,s),this.cache[a]=f),l&&C(f.context),f}delete(a){delete this.cache[a]}clear(){for(const a in this.cache)this.canvasFactory.destroy(this.cache[a]),delete this.cache[a]}}function v(F,a,e,s,l,f,p,c,L,q){const[B,Y,X,te,ie,pe]=F.mozCurrentTransform;if(0===Y&&0===X){const he=Math.round(p*B+ie),Te=Math.round(c*te+pe),le=Math.abs(Math.round((p+L)*B+ie)-he)||1,Pe=Math.abs(Math.round((c+q)*te+pe)-Te)||1;return F.setTransform(Math.sign(B),0,0,Math.sign(te),he,Te),F.drawImage(a,e,s,l,f,0,0,le,Pe),F.setTransform(B,Y,X,te,ie,pe),[le,Pe]}if(0===B&&0===te){const he=Math.round(c*X+ie),Te=Math.round(p*Y+pe),le=Math.abs(Math.round((c+q)*X+ie)-he)||1,Pe=Math.abs(Math.round((p+L)*Y+pe)-Te)||1;return F.setTransform(0,Math.sign(Y),Math.sign(X),0,he,Te),F.drawImage(a,e,s,l,f,0,0,Pe,le),F.setTransform(B,Y,X,te,ie,pe),[Pe,le]}return F.drawImage(a,e,s,l,f,p,c,L,q),[Math.hypot(B,Y)*L,Math.hypot(X,te)*q]}class n{constructor(a,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,a,e])}clone(){const a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,e){this.x=a,this.y=e}updatePathMinMax(a,e,s){[e,s]=i.Util.applyTransform([e,s],a),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(a,e){const s=i.Util.applyTransform(e,a),l=i.Util.applyTransform(e.slice(2),a);this.minX=Math.min(this.minX,s[0],l[0]),this.minY=Math.min(this.minY,s[1],l[1]),this.maxX=Math.max(this.maxX,s[0],l[0]),this.maxY=Math.max(this.maxY,s[1],l[1])}updateScalingPathMinMax(a,e){i.Util.scaleMinMax(a,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(a,e,s,l,f,p,c,L,q,B){const Y=i.Util.bezierBoundingBox(e,s,l,f,p,c,L,q);if(B)return B[0]=Math.min(B[0],Y[0],Y[2]),B[1]=Math.max(B[1],Y[0],Y[2]),B[2]=Math.min(B[2],Y[1],Y[3]),void(B[3]=Math.max(B[3],Y[1],Y[3]));this.updateRectMinMax(a,Y)}getPathBoundingBox(a=O.PathType.FILL,e=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(a===O.PathType.STROKE){e||(0,i.unreachable)("Stroke bounding box must include transform.");const l=i.Util.singularValueDecompose2dScale(e),f=l[0]*this.lineWidth/2,p=l[1]*this.lineWidth/2;s[0]-=f,s[1]-=p,s[2]+=f,s[3]+=p}return s}updateClipFromPath(){const a=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=O.PathType.FILL,e=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(a,e))}}function h(F,a,e=null){if(typeof ImageData<"u"&&a instanceof ImageData)return void F.putImageData(a,0,0);const s=a.height,l=a.width,f=s%_,p=(s-f)/_,c=0===f?p:p+1,L=F.createImageData(l,_);let B,q=0;const Y=a.data,X=L.data;let te,ie,pe,Ae,Ce,ye,he,ke;if(e)switch(e.length){case 1:Ce=e[0],ye=e[0],he=e[0],ke=e[0];break;case 4:Ce=e[0],ye=e[1],he=e[2],ke=e[3]}if(a.kind===i.ImageKind.GRAYSCALE_1BPP){const Te=Y.byteLength,me=new Uint32Array(X.buffer,0,X.byteLength>>2),le=me.length,ge=l+7>>3;let Pe=4294967295,se=i.FeatureTest.isLittleEndian?4278190080:255;for(ke&&255===ke[0]&&0===ke[255]&&([Pe,se]=[se,Pe]),te=0;te<c;te++){for(pe=te<p?_:f,B=0,ie=0;ie<pe;ie++){const M=Te-q;let Z=0;const ce=M>ge?l:8*M-7,be=-8&ce;let z=0,I=0;for(;Z<be;Z+=8)I=Y[q++],me[B++]=128&I?Pe:se,me[B++]=64&I?Pe:se,me[B++]=32&I?Pe:se,me[B++]=16&I?Pe:se,me[B++]=8&I?Pe:se,me[B++]=4&I?Pe:se,me[B++]=2&I?Pe:se,me[B++]=1&I?Pe:se;for(;Z<ce;Z++)0===z&&(I=Y[q++],z=128),me[B++]=I&z?Pe:se,z>>=1}for(;B<le;)me[B++]=0;F.putImageData(L,0,te*_)}}else if(a.kind===i.ImageKind.RGBA_32BPP){const Te=!!(Ce||ye||he);for(ie=0,Ae=l*_*4,te=0;te<p;te++){if(X.set(Y.subarray(q,q+Ae)),q+=Ae,Te)for(let me=0;me<Ae;me+=4)Ce&&(X[me+0]=Ce[X[me+0]]),ye&&(X[me+1]=ye[X[me+1]]),he&&(X[me+2]=he[X[me+2]]);F.putImageData(L,0,ie),ie+=_}if(te<c){if(Ae=l*f*4,X.set(Y.subarray(q,q+Ae)),Te)for(let me=0;me<Ae;me+=4)Ce&&(X[me+0]=Ce[X[me+0]]),ye&&(X[me+1]=ye[X[me+1]]),he&&(X[me+2]=he[X[me+2]]);F.putImageData(L,0,ie)}}else{if(a.kind!==i.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${a.kind}`);{const Te=!!(Ce||ye||he);for(pe=_,Ae=l*pe,te=0;te<c;te++){for(te>=p&&(pe=f,Ae=l*pe),B=0,ie=Ae;ie--;)X[B++]=Y[q++],X[B++]=Y[q++],X[B++]=Y[q++],X[B++]=255;if(Te)for(let me=0;me<B;me+=4)Ce&&(X[me+0]=Ce[X[me+0]]),ye&&(X[me+1]=ye[X[me+1]]),he&&(X[me+2]=he[X[me+2]]);F.putImageData(L,0,te*_)}}}}function S(F,a){if(a.bitmap)return void F.drawImage(a.bitmap,0,0);const e=a.height,s=a.width,l=e%_,f=(e-l)/_,p=0===l?f:f+1,c=F.createImageData(s,_);let L=0;const q=a.data,B=c.data;for(let Y=0;Y<p;Y++){const X=Y<f?_:l;({srcPos:L}=(0,w.applyMaskImageData)({src:q,srcPos:L,dest:B,width:s,height:X})),F.putImageData(c,0,Y*_)}}function u(F,a){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let s=0,l=e.length;s<l;s++){const f=e[s];void 0!==F[f]&&(a[f]=F[f])}void 0!==F.setLineDash&&(a.setLineDash(F.getLineDash()),a.lineDashOffset=F.lineDashOffset)}function m(F,a){F.strokeStyle=F.fillStyle=a||"#000000",F.fillRule="nonzero",F.globalAlpha=1,F.lineWidth=1,F.lineCap="butt",F.lineJoin="miter",F.miterLimit=10,F.globalCompositeOperation="source-over",F.font="10px sans-serif",void 0!==F.setLineDash&&(F.setLineDash([]),F.lineDashOffset=0)}function g(F,a,e,s){const l=F.length;for(let f=3;f<l;f+=4){const p=F[f];if(0===p)F[f-3]=a,F[f-2]=e,F[f-1]=s;else if(p<255){const c=255-p;F[f-3]=F[f-3]*p+a*c>>8,F[f-2]=F[f-2]*p+e*c>>8,F[f-1]=F[f-1]*p+s*c>>8}}}function d(F,a,e){const s=F.length;for(let f=3;f<s;f+=4)a[f]=a[f]*(e?e[F[f]]:F[f])*.00392156862745098|0}function R(F,a,e){const s=F.length;for(let l=3;l<s;l+=4){const f=77*F[l-3]+152*F[l-2]+28*F[l-1];a[l]=e?a[l]*e[f>>8]>>8:a[l]*f>>16}}function $(F,a){const e=i.Util.singularValueDecompose2dScale(F);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*E.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==a?a:e[0]<=s||e[1]<=s}const Q=["butt","round","square"],K=["miter","round","bevel"],re={},fe={};class ue{constructor(a,e,s,l,f,p,c,L){this.ctx=a,this.current=new n(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=l,this.imageLayer=f,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=p,this.cachedCanvases=new A(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=L?.background||null,this.foregroundColor=L?.foreground||null,a&&C(a),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,e=null){return"string"==typeof a?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):e}beginDrawing({transform:a,viewport:e,transparency:s=!1,background:l=null}){const f=this.ctx.canvas.width,p=this.ctx.canvas.height,c=l||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const L=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const q=this.backgroundColor=this.ctx.fillStyle;let B=!0,Y=c;if(this.ctx.fillStyle=c,Y=this.ctx.fillStyle,B="string"==typeof Y&&/^#[0-9A-Fa-f]{6}$/.test(Y),"#000000"===L&&"#ffffff"===q||L===q||!B)this.foregroundColor=this.backgroundColor=null;else{const X=parseInt(Y.slice(1),16),ie=(X&&65280)>>8,pe=X&&255,Ae=ye=>(ye/=255)<=.03928?ye/12.92:((ye+.055)/1.055)**2.4,Ce=Math.round(.2126*Ae((X&&16711680)>>16)+.7152*Ae(ie)+.0722*Ae(pe));this.selectColor=(ye,he,ke)=>{const Te=.2126*Ae(ye)+.7152*Ae(he)+.0722*Ae(ke);return Math.round(Te)===Ce?q:L}}}if(this.ctx.fillStyle=this.backgroundColor||c,this.ctx.fillRect(0,0,f,p),this.ctx.restore(),s){const L=this.cachedCanvases.getCanvas("transparent",f,p,!0);this.compositeCtx=this.ctx,this.transparentCanvas=L.canvas,this.ctx=L.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),m(this.ctx,this.foregroundColor),a&&(this.ctx.transform.apply(this.ctx,a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform.apply(this.ctx,e.transform),this.viewportScale=e.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(a,e,s,l){const f=a.argsArray,p=a.fnArray;let c=e||0;const L=f.length;if(L===c)return c;const q=L-c>10&&"function"==typeof s,B=q?Date.now()+15:0;let Y=0;const X=this.commonObjs,te=this.objs;let ie;for(;;){if(void 0!==l&&c===l.nextBreakPoint)return l.breakIt(c,s),c;if(ie=p[c],ie!==i.OPS.dependency)this[ie].apply(this,f[c]);else for(const pe of f[c]){const Ae=pe.startsWith("g_")?X:te;if(!Ae.has(pe))return Ae.get(pe,s),c}if(c++,c===L)return c;if(q&&++Y>10){if(Date.now()>B)return s(),c;Y=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const a of this._cachedBitmapsMap.values()){for(const e of a.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);a.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(a,e){const s=a.width,l=a.height;let B,Y,f=Math.max(Math.hypot(e[0],e[1]),1),p=Math.max(Math.hypot(e[2],e[3]),1),c=s,L=l,q="prescale1";for(;f>2&&c>1||p>2&&L>1;){let X=c,te=L;f>2&&c>1&&(X=Math.ceil(c/2),f/=c/X),p>2&&L>1&&(te=Math.ceil(L/2),p/=L/te),B=this.cachedCanvases.getCanvas(q,X,te,!1),Y=B.context,Y.clearRect(0,0,X,te),Y.drawImage(a,0,0,c,L,0,0,X,te),a=B.canvas,c=X,L=te,q="prescale1"===q?"prescale2":"prescale1"}return{img:a,paintWidth:c,paintHeight:L}}_createMaskCanvas(a){const e=this.ctx,{width:s,height:l}=a,f=this.current.fillColor,p=this.current.patternFill,c=e.mozCurrentTransform;let L,q,B,Y;if((a.bitmap||a.data)&&a.count>1){const le=a.bitmap||a.data.buffer,ge=c.slice(0,4);q=JSON.stringify(p?ge:[ge,f]),L=this._cachedBitmapsMap.get(le),L||(L=new Map,this._cachedBitmapsMap.set(le,L));const Pe=L.get(q);if(Pe&&!p)return{canvas:Pe,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};B=Pe}B||(Y=this.cachedCanvases.getCanvas("maskCanvas",s,l,!1),S(Y.context,a));let X=i.Util.transform(c,[1/s,0,0,-1/l,0,0]);X=i.Util.transform(X,[1,0,0,1,0,-l]);const te=i.Util.applyTransform([0,0],X),ie=i.Util.applyTransform([s,l],X),pe=i.Util.normalizeRect([te[0],te[1],ie[0],ie[1]]),Ae=Math.round(pe[2]-pe[0])||1,Ce=Math.round(pe[3]-pe[1])||1,ye=this.cachedCanvases.getCanvas("fillCanvas",Ae,Ce,!0),he=ye.context,ke=Math.min(te[0],ie[0]),Te=Math.min(te[1],ie[1]);he.translate(-ke,-Te),he.transform.apply(he,X),B||(B=this._scaleImage(Y.canvas,he.mozCurrentTransformInverse),B=B.img,L&&p&&L.set(q,B)),he.imageSmoothingEnabled=$(he.mozCurrentTransform,a.interpolate),v(he,B,0,0,B.width,B.height,0,0,s,l),he.globalCompositeOperation="source-in";const me=i.Util.transform(he.mozCurrentTransformInverse,[1,0,0,1,-ke,-Te]);return he.fillStyle=p?f.getPattern(e,this,me,O.PathType.FILL):f,he.fillRect(0,0,s,l),L&&!p&&(this.cachedCanvases.delete("fillCanvas"),L.set(q,ye.canvas)),{canvas:ye.canvas,offsetX:Math.round(ke),offsetY:Math.round(Te)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=Q[a]}setLineJoin(a){this.ctx.lineJoin=K[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,e){const s=this.ctx;void 0!==s.setLineDash&&(s.setLineDash(a),s.lineDashOffset=e)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(let e=0,s=a.length;e<s;e++){const l=a[e],p=l[1];switch(l[0]){case"LW":this.setLineWidth(p);break;case"LC":this.setLineCap(p);break;case"LJ":this.setLineJoin(p);break;case"ML":this.setMiterLimit(p);break;case"D":this.setDash(p[0],p[1]);break;case"RI":this.setRenderingIntent(p);break;case"FL":this.setFlatness(p);break;case"Font":this.setFont(p[0],p[1]);break;case"CA":this.current.strokeAlpha=l[1];break;case"ca":this.current.fillAlpha=l[1],this.ctx.globalAlpha=l[1];break;case"BM":this.ctx.globalCompositeOperation=p;break;case"SMask":this.current.activeSMask=p?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=p}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const l=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height,!0);this.suspendedCtx=this.ctx,this.ctx=l.context;const f=this.ctx;f.setTransform.apply(f,this.suspendedCtx.mozCurrentTransform),u(this.suspendedCtx,f),function b(F,a){if(F._removeMirroring)throw new Error("Context is already forwarding operations.");F.__originalSave=F.save,F.__originalRestore=F.restore,F.__originalRotate=F.rotate,F.__originalScale=F.scale,F.__originalTranslate=F.translate,F.__originalTransform=F.transform,F.__originalSetTransform=F.setTransform,F.__originalResetTransform=F.resetTransform,F.__originalClip=F.clip,F.__originalMoveTo=F.moveTo,F.__originalLineTo=F.lineTo,F.__originalBezierCurveTo=F.bezierCurveTo,F.__originalRect=F.rect,F.__originalClosePath=F.closePath,F.__originalBeginPath=F.beginPath,F._removeMirroring=()=>{F.save=F.__originalSave,F.restore=F.__originalRestore,F.rotate=F.__originalRotate,F.scale=F.__originalScale,F.translate=F.__originalTranslate,F.transform=F.__originalTransform,F.setTransform=F.__originalSetTransform,F.resetTransform=F.__originalResetTransform,F.clip=F.__originalClip,F.moveTo=F.__originalMoveTo,F.lineTo=F.__originalLineTo,F.bezierCurveTo=F.__originalBezierCurveTo,F.rect=F.__originalRect,F.closePath=F.__originalClosePath,F.beginPath=F.__originalBeginPath,delete F._removeMirroring},F.save=function(){a.save(),this.__originalSave()},F.restore=function(){a.restore(),this.__originalRestore()},F.translate=function(s,l){a.translate(s,l),this.__originalTranslate(s,l)},F.scale=function(s,l){a.scale(s,l),this.__originalScale(s,l)},F.transform=function(s,l,f,p,c,L){a.transform(s,l,f,p,c,L),this.__originalTransform(s,l,f,p,c,L)},F.setTransform=function(s,l,f,p,c,L){a.setTransform(s,l,f,p,c,L),this.__originalSetTransform(s,l,f,p,c,L)},F.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},F.rotate=function(s){a.rotate(s),this.__originalRotate(s)},F.clip=function(s){a.clip(s),this.__originalClip(s)},F.moveTo=function(e,s){a.moveTo(e,s),this.__originalMoveTo(e,s)},F.lineTo=function(e,s){a.lineTo(e,s),this.__originalLineTo(e,s)},F.bezierCurveTo=function(e,s,l,f,p,c){a.bezierCurveTo(e,s,l,f,p,c),this.__originalBezierCurveTo(e,s,l,f,p,c)},F.rect=function(e,s,l,f){a.rect(e,s,l,f),this.__originalRect(e,s,l,f)},F.closePath=function(){a.closePath(),this.__originalClosePath()},F.beginPath=function(){a.beginPath(),this.__originalBeginPath()}}(f,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),u(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){this.current.activeSMask&&(a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function j(F,a,e,s){const l=s[0],f=s[1],p=s[2]-l,c=s[3]-f;0===p||0===c||(function k(F,a,e,s,l,f,p,c,L,q,B){const Y=!!f,X=Y?f[0]:0,te=Y?f[1]:0,ie=Y?f[2]:0;let pe;pe="Luminosity"===l?R:d;const Ce=Math.min(s,Math.ceil(1048576/e));for(let ye=0;ye<s;ye+=Ce){const he=Math.min(Ce,s-ye),ke=F.getImageData(c-q,ye+(L-B),e,he),Te=a.getImageData(c,ye+L,e,he);Y&&g(ke.data,X,te,ie),pe(ke.data,Te.data,p),a.putImageData(Te,c,ye+L)}}(a.context,e,p,c,a.subtype,a.backdrop,a.transferMap,l,f,a.offsetX,a.offsetY),F.save(),F.globalAlpha=1,F.globalCompositeOperation="source-over",F.setTransform(1,0,0,1,0,0),F.drawImage(e.canvas,0,0),F.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(u(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),u(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(a,e,s,l,f,p){this.ctx.transform(a,e,s,l,f,p),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(a,e,s){const l=this.ctx,f=this.current;let L,q,p=f.x,c=f.y;const B=l.mozCurrentTransform,Y=0===B[0]&&0===B[3]||0===B[1]&&0===B[2],X=Y?s.slice(0):null;for(let te=0,ie=0,pe=a.length;te<pe;te++)switch(0|a[te]){case i.OPS.rectangle:p=e[ie++],c=e[ie++];const Ae=e[ie++],Ce=e[ie++],ye=p+Ae,he=c+Ce;l.moveTo(p,c),0===Ae||0===Ce?l.lineTo(ye,he):(l.lineTo(ye,c),l.lineTo(ye,he),l.lineTo(p,he)),Y||f.updateRectMinMax(B,[p,c,ye,he]),l.closePath();break;case i.OPS.moveTo:p=e[ie++],c=e[ie++],l.moveTo(p,c),Y||f.updatePathMinMax(B,p,c);break;case i.OPS.lineTo:p=e[ie++],c=e[ie++],l.lineTo(p,c),Y||f.updatePathMinMax(B,p,c);break;case i.OPS.curveTo:L=p,q=c,p=e[ie+4],c=e[ie+5],l.bezierCurveTo(e[ie],e[ie+1],e[ie+2],e[ie+3],p,c),f.updateCurvePathMinMax(B,L,q,e[ie],e[ie+1],e[ie+2],e[ie+3],p,c,X),ie+=6;break;case i.OPS.curveTo2:L=p,q=c,l.bezierCurveTo(p,c,e[ie],e[ie+1],e[ie+2],e[ie+3]),f.updateCurvePathMinMax(B,L,q,p,c,e[ie],e[ie+1],e[ie+2],e[ie+3],X),p=e[ie+2],c=e[ie+3],ie+=4;break;case i.OPS.curveTo3:L=p,q=c,p=e[ie+2],c=e[ie+3],l.bezierCurveTo(e[ie],e[ie+1],p,c,p,c),f.updateCurvePathMinMax(B,L,q,e[ie],e[ie+1],p,c,p,c,X),ie+=4;break;case i.OPS.closePath:l.closePath()}Y&&f.updateScalingPathMinMax(B,X),f.setCurrentPoint(p,c)}closePath(){this.ctx.closePath()}stroke(a){a=!(typeof a<"u")||a;const e=this.ctx,s=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof s&&s?.getPattern?(e.save(),e.strokeStyle=s.getPattern(e,this,e.mozCurrentTransformInverse,O.PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a){a=!(typeof a<"u")||a;const e=this.ctx,s=this.current.fillColor;let f=!1;this.current.patternFill&&(e.save(),e.fillStyle=s.getPattern(e,this,e.mozCurrentTransformInverse,O.PathType.FILL),f=!0);const p=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==p&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),f&&e.restore(),a&&this.consumePath(p)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=re}eoClip(){this.pendingClip=fe}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const a=this.pendingTextPaths,e=this.ctx;if(void 0!==a){e.save(),e.beginPath();for(let s=0;s<a.length;s++){const l=a[s];e.setTransform.apply(e,l.transform),e.translate(l.x,l.y),l.addToPath(e,l.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,e){const s=this.commonObjs.get(a),l=this.current;if(!s)throw new Error(`Can't find font for ${a}`);if(l.fontMatrix=s.fontMatrix||i.FONT_IDENTITY_MATRIX,(0===l.fontMatrix[0]||0===l.fontMatrix[3])&&(0,i.warn)("Invalid font matrix for font "+a),e<0?(e=-e,l.fontDirection=-1):l.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;let p="normal";s.black?p="900":s.bold&&(p="bold");const c=s.italic?"italic":"normal",L=`"${s.loadedName||"sans-serif"}", ${s.fallbackName}`;let q=e;e<16?q=16:e>100&&(q=100),this.current.fontSizeScale=e/q,this.ctx.font=`${c} ${p} ${q}px ${L}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,e){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=e}setLeadingMoveText(a,e){this.setLeading(-e),this.moveText(a,e)}setTextMatrix(a,e,s,l,f,p){this.current.textMatrix=[a,e,s,l,f,p],this.current.textMatrixScale=Math.hypot(a,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,e,s,l){const f=this.ctx,p=this.current,c=p.font,L=p.textRenderingMode,q=p.fontSize/p.fontSizeScale,B=L&i.TextRenderingMode.FILL_STROKE_MASK,Y=!!(L&i.TextRenderingMode.ADD_TO_PATH_FLAG),X=p.patternFill&&!c.missingFile;let te;(c.disableFontFace||Y||X)&&(te=c.getPathGenerator(this.commonObjs,a)),c.disableFontFace||X?(f.save(),f.translate(e,s),f.beginPath(),te(f,q),l&&f.setTransform.apply(f,l),(B===i.TextRenderingMode.FILL||B===i.TextRenderingMode.FILL_STROKE)&&f.fill(),(B===i.TextRenderingMode.STROKE||B===i.TextRenderingMode.FILL_STROKE)&&f.stroke(),f.restore()):((B===i.TextRenderingMode.FILL||B===i.TextRenderingMode.FILL_STROKE)&&f.fillText(a,e,s),(B===i.TextRenderingMode.STROKE||B===i.TextRenderingMode.FILL_STROKE)&&f.strokeText(a,e,s)),Y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:f.mozCurrentTransform,x:e,y:s,fontSize:q,addToPath:te})}get isFontSubpixelAAEnabled(){const{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);a.scale(1.5,1),a.fillText("I",0,10);const e=a.getImageData(0,0,10,10).data;let s=!1;for(let l=3;l<e.length;l+=4)if(e[l]>0&&e[l]<255){s=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",s)}showText(a){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(a);const l=e.fontSize;if(0===l)return;const f=this.ctx,p=e.fontSizeScale,c=e.charSpacing,L=e.wordSpacing,q=e.fontDirection,B=e.textHScale*q,Y=a.length,X=s.vertical,te=X?1:-1,ie=s.defaultVMetrics,pe=l*e.fontMatrix[0],Ae=e.textRenderingMode===i.TextRenderingMode.FILL&&!s.disableFontFace&&!e.patternFill;let Ce;if(f.save(),f.transform.apply(f,e.textMatrix),f.translate(e.x,e.y+e.textRise),f.scale(B,q>0?-1:1),e.patternFill){f.save();const me=e.fillColor.getPattern(f,this,f.mozCurrentTransformInverse,O.PathType.FILL);Ce=f.mozCurrentTransform,f.restore(),f.fillStyle=me}let ye=e.lineWidth;const he=e.textMatrixScale;if(0===he||0===ye){const me=e.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(me===i.TextRenderingMode.STROKE||me===i.TextRenderingMode.FILL_STROKE)&&(ye=this.getSinglePixelWidth())}else ye/=he;1!==p&&(f.scale(p,p),ye/=p),f.lineWidth=ye;let Te,ke=0;for(Te=0;Te<Y;++Te){const me=a[Te];if("number"==typeof me){ke+=te*me*l/1e3;continue}let le=!1;const ge=(me.isSpace?L:0)+c,Pe=me.fontChar,se=me.accent;let M,Z,be,ce=me.width;if(X){const z=me.vmetric||ie,I=-(me.vmetric?z[1]:.5*ce)*pe;ce=z?-z[0]:ce,M=I/p,Z=(ke+z[2]*pe)/p}else M=ke/p,Z=0;if(s.remeasure&&ce>0){const z=1e3*f.measureText(Pe).width/l*p;if(ce<z&&this.isFontSubpixelAAEnabled){const I=ce/z;le=!0,f.save(),f.scale(I,1),M/=I}else ce!==z&&(M+=(ce-z)/2e3*l/p)}this.contentVisible&&(me.isInFont||s.missingFile)&&(Ae&&!se?f.fillText(Pe,M,Z):(this.paintChar(Pe,M,Z,Ce),se&&this.paintChar(se.fontChar,M+l*se.offset.x/p,Z-l*se.offset.y/p,Ce))),be=X?ce*pe-ge*q:ce*pe+ge*q,ke+=be,le&&f.restore()}X?e.y-=ke:e.x+=ke*B,f.restore(),this.compose()}showType3Text(a){const e=this.ctx,s=this.current,l=s.font,f=s.fontSize,p=s.fontDirection,c=l.vertical?1:-1,L=s.charSpacing,q=s.wordSpacing,B=s.textHScale*p,Y=s.fontMatrix||i.FONT_IDENTITY_MATRIX,X=a.length;let ie,pe,Ae,Ce;if(s.textRenderingMode!==i.TextRenderingMode.INVISIBLE&&0!==f){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,e.save(),e.transform.apply(e,s.textMatrix),e.translate(s.x,s.y),e.scale(B,p),ie=0;ie<X;++ie){if(pe=a[ie],"number"==typeof pe){Ce=c*pe*f/1e3,this.ctx.translate(Ce,0),s.x+=Ce*B;continue}const ye=(pe.isSpace?q:0)+L,he=l.charProcOperatorList[pe.operatorListId];he?(this.contentVisible&&(this.processingType3=pe,this.save(),e.scale(f,f),e.transform.apply(e,Y),this.executeOperatorList(he),this.restore()),Ae=i.Util.applyTransform([pe.width,0],Y)[0]*f+ye,e.translate(Ae,0),s.x+=Ae*B):(0,i.warn)(`Type3 character "${pe.operatorListId}" is not available.`)}e.restore(),this.processingType3=null}}setCharWidth(a,e){}setCharWidthAndBounds(a,e,s,l,f,p){this.ctx.rect(s,l,f-s,p-l),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let e;if("TilingPattern"===a[0]){const s=a[1],l=this.baseTransform||this.ctx.mozCurrentTransform.slice();e=new O.TilingPattern(a,s,this.ctx,{createCanvasGraphics:p=>new ue(p,this.commonObjs,this.objs,this.canvasFactory)},l)}else e=this._getPattern(a[1],a[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,e,s){const l=this.selectColor?.(a,e,s)||i.Util.makeHexColor(a,e,s);this.ctx.strokeStyle=l,this.current.strokeColor=l}setFillRGBColor(a,e,s){const l=this.selectColor?.(a,e,s)||i.Util.makeHexColor(a,e,s);this.ctx.fillStyle=l,this.current.fillColor=l,this.current.patternFill=!1}_getPattern(a,e=null){let s;return this.cachedPatterns.has(a)?s=this.cachedPatterns.get(a):(s=(0,O.getShadingPattern)(this.objs.get(a)),this.cachedPatterns.set(a,s)),e&&(s.matrix=e),s}shadingFill(a){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(a);e.fillStyle=s.getPattern(e,this,e.mozCurrentTransformInverse,O.PathType.SHADING);const l=e.mozCurrentTransformInverse;if(l){const f=e.canvas,p=f.width,c=f.height,L=i.Util.applyTransform([0,0],l),q=i.Util.applyTransform([0,c],l),B=i.Util.applyTransform([p,0],l),Y=i.Util.applyTransform([p,c],l),X=Math.min(L[0],q[0],B[0],Y[0]),te=Math.min(L[1],q[1],B[1],Y[1]),ie=Math.max(L[0],q[0],B[0],Y[0]),pe=Math.max(L[1],q[1],B[1],Y[1]);this.ctx.fillRect(X,te,ie-X,pe-te)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(a,e){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&6===a.length&&this.transform.apply(this,a),this.baseTransform=this.ctx.mozCurrentTransform,e)&&(this.ctx.rect(e[0],e[1],e[2]-e[0],e[3]-e[1]),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,e),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;a.isolated||(0,i.info)("TODO: Support non-isolated groups."),a.knockout&&(0,i.warn)("Knockout groups not supported.");const s=e.mozCurrentTransform;if(a.matrix&&e.transform.apply(e,a.matrix),!a.bbox)throw new Error("Bounding box is required.");let l=i.Util.getAxialAlignedBoundingBox(a.bbox,e.mozCurrentTransform);l=i.Util.intersect(l,[0,0,e.canvas.width,e.canvas.height])||[0,0,0,0];const p=Math.floor(l[0]),c=Math.floor(l[1]);let L=Math.max(Math.ceil(l[2])-p,1),q=Math.max(Math.ceil(l[3])-c,1),B=1,Y=1;L>N&&(B=L/N,L=N),q>N&&(Y=q/N,q=N),this.current.startNewPathAndClipBox([0,0,L,q]);let X="groupAt"+this.groupLevel;a.smask&&(X+="_smask_"+this.smaskCounter++%2);const te=this.cachedCanvases.getCanvas(X,L,q,!0),ie=te.context;ie.scale(1/B,1/Y),ie.translate(-p,-c),ie.transform.apply(ie,s),a.smask?this.smaskStack.push({canvas:te.canvas,context:ie,offsetX:p,offsetY:c,scaleX:B,scaleY:Y,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(p,c),e.scale(B,Y),e.save()),u(e,ie),this.ctx=ie,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const l=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,l);const f=i.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],l);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(f)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(a,e,s,l,f){if(this.save(),Array.isArray(e)&&4===e.length){const p=e[2]-e[0],c=e[3]-e[1];if(f&&this.annotationCanvasMap){(s=s.slice())[4]-=e[0],s[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=p,e[3]=c;const[L,q]=i.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:B}=this,Y=Math.ceil(p*this.outputScaleX*B),X=Math.ceil(c*this.outputScaleY*B);this.annotationCanvas=this.canvasFactory.create(Y,X);const{canvas:te,context:ie}=this.annotationCanvas,pe=`var(--zoom-factor) * ${E.PixelsPerInch.PDF_TO_CSS_UNITS}`;te.style.width=`calc(${p}px * ${pe})`,te.style.height=`calc(${c}px * ${pe})`,this.annotationCanvasMap.set(a,te),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ie,this.ctx.setTransform(L,0,0,-q,0,c*q),C(this.ctx),m(this.ctx,this.foregroundColor)}else m(this.ctx,this.foregroundColor),this.ctx.rect(e[0],e[1],p,c),this.ctx.clip(),this.endPath()}this.current=new n(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,s),this.transform.apply(this,l)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(a){if(!this.contentVisible)return;const e=a.count;(a=this.getObject(a.data,a)).count=e;const s=this.ctx,l=this.processingType3;if(l&&(void 0===l.compiled&&(l.compiled=function t(F){const{width:a,height:e}=F;if(a>1e3||e>1e3)return null;const l=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),f=a+1;let c,L,q,p=new Uint8Array(f*(e+1));const B=a+7&-8;let Y=new Uint8Array(B*e),X=0;for(const he of F.data){let ke=128;for(;ke>0;)Y[X++]=he&ke?0:255,ke>>=1}let te=0;for(X=0,0!==Y[X]&&(p[0]=1,++te),L=1;L<a;L++)Y[X]!==Y[X+1]&&(p[L]=Y[X]?2:1,++te),X++;for(0!==Y[X]&&(p[L]=2,++te),c=1;c<e;c++){X=c*B,q=c*f,Y[X-B]!==Y[X]&&(p[q]=Y[X]?1:8,++te);let he=(Y[X]?4:0)+(Y[X-B]?8:0);for(L=1;L<a;L++)he=(he>>2)+(Y[X+1]?4:0)+(Y[X-B+1]?8:0),l[he]&&(p[q+L]=l[he],++te),X++;if(Y[X-B]!==Y[X]&&(p[q+L]=Y[X]?2:4,++te),te>1e3)return null}for(X=B*(e-1),q=c*f,0!==Y[X]&&(p[q]=8,++te),L=1;L<a;L++)Y[X]!==Y[X+1]&&(p[q+L]=Y[X]?4:8,++te),X++;if(0!==Y[X]&&(p[q+L]=4,++te),te>1e3)return null;const ie=new Int32Array([0,f,-1,0,-f,0,0,0,1]);let pe,Ae,Ce;for(r.isNodeJS?Ae=[]:pe=new Path2D,c=0;te&&c<=e;c++){let he=c*f;const ke=he+a;for(;he<ke&&!p[he];)he++;if(he===ke)continue;pe?pe.moveTo(he%f,c):Ce=[he%f,c];const Te=he;let me=p[he];do{const le=ie[me];do{he+=le}while(!p[he]);const ge=p[he];5!==ge&&10!==ge?(me=ge,p[he]=0):(me=ge&51*me>>4,p[he]&=me>>2|me<<2),pe?pe.lineTo(he%f,he/f|0):Ce.push(he%f,he/f|0),p[he]||--te}while(Te!==he);pe||Ae.push(Ce),--c}return Y=null,p=null,function(he){if(he.save(),he.scale(1/a,-1/e),he.translate(0,-e),pe)he.fill(pe);else{he.beginPath();for(const ke of Ae){he.moveTo(ke[0],ke[1]);for(let Te=2,me=ke.length;Te<me;Te+=2)he.lineTo(ke[Te],ke[Te+1])}he.fill()}he.beginPath(),he.restore()}}(a)),l.compiled))return void l.compiled(s);const f=this._createMaskCanvas(a),p=f.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(p,f.offsetX,f.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(a,e,s=0,l=0,f,p){if(!this.contentVisible)return;a=this.getObject(a.data,a);const c=this.ctx;c.save();const L=c.mozCurrentTransform;c.transform(e,s,l,f,0,0);const q=this._createMaskCanvas(a);c.setTransform(1,0,0,1,0,0);for(let B=0,Y=p.length;B<Y;B+=2){const X=i.Util.transform(L,[e,s,l,f,p[B],p[B+1]]),[te,ie]=i.Util.applyTransform([0,0],X);c.drawImage(q.canvas,te,ie)}c.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,l=this.current.patternFill;for(let f=0,p=a.length;f<p;f++){const c=a[f],L=c.width,q=c.height,B=this.cachedCanvases.getCanvas("maskCanvas",L,q,!1),Y=B.context;Y.save(),S(Y,c),Y.globalCompositeOperation="source-in",Y.fillStyle=l?s.getPattern(Y,this,e.mozCurrentTransformInverse,O.PathType.FILL):s,Y.fillRect(0,0,L,q),Y.restore(),e.save(),e.transform.apply(e,c.transform),e.scale(1,-1),v(e,B.canvas,0,0,L,q,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;const e=this.getObject(a);e?this.paintInlineImageXObject(e):(0,i.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(a,e,s,l){if(!this.contentVisible)return;const f=this.getObject(a);if(!f)return void(0,i.warn)("Dependent image isn't ready yet");const p=f.width,c=f.height,L=[];for(let q=0,B=l.length;q<B;q+=2)L.push({transform:[e,0,0,s,l[q],l[q+1]],x:0,y:0,w:p,h:c});this.paintInlineImageXObjectGroup(f,L)}paintInlineImageXObject(a){if(!this.contentVisible)return;const e=a.width,s=a.height,l=this.ctx;let f;if(this.save(),l.scale(1/e,-1/s),"function"==typeof HTMLElement&&a instanceof HTMLElement||!a.data)f=a;else{const q=this.cachedCanvases.getCanvas("inlineImage",e,s,!1);h(q.context,a,this.current.transferMaps),f=q.canvas}const p=this._scaleImage(f,l.mozCurrentTransformInverse);l.imageSmoothingEnabled=$(l.mozCurrentTransform,a.interpolate);const[c,L]=v(l,p.img,0,0,p.paintWidth,p.paintHeight,0,-s,e,s);if(this.imageLayer){const q=this.getCanvasPosition(0,-s);this.imageLayer.appendImage({imgData:a,left:q[0],top:q[1],width:c,height:L})}this.compose(),this.restore()}paintInlineImageXObjectGroup(a,e){if(!this.contentVisible)return;const s=this.ctx,l=a.width,f=a.height,p=this.cachedCanvases.getCanvas("inlineImage",l,f,!1);h(p.context,a,this.current.transferMaps);for(let L=0,q=e.length;L<q;L++){const B=e[L];if(s.save(),s.transform.apply(s,B.transform),s.scale(1,-1),v(s,p.canvas,B.x,B.y,B.w,B.h,0,-1,1,1),this.imageLayer){const Y=this.getCanvasPosition(B.x,B.y);this.imageLayer.appendImage({imgData:a,left:Y[0],top:Y[1],width:l,height:f})}s.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,e){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,e){this.markedContentStack.push("OC"===a?{visible:this.optionalContentConfig.isVisible(e)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const s=this.ctx;this.pendingClip&&(e||(this.pendingClip===fe?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const a=this.ctx.mozCurrentTransform;if(0===a[1]&&0===a[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{const e=Math.abs(a[0]*a[3]-a[2]*a[1]),s=Math.hypot(a[0],a[2]),l=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(s,l)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:a}=this.current,e=this.ctx.mozCurrentTransform;let s,l;if(0===e[1]&&0===e[2]){const f=Math.abs(e[0]),p=Math.abs(e[3]);if(0===a)s=1/f,l=1/p;else{const c=f*a,L=p*a;s=c<1?1/c:1,l=L<1?1/L:1}}else{const f=Math.abs(e[0]*e[3]-e[2]*e[1]),p=Math.hypot(e[0],e[1]),c=Math.hypot(e[2],e[3]);if(0===a)s=c/f,l=p/f;else{const L=a*f;s=c>L?c/L:1,l=p>L?p/L:1}}this._cachedScaleForStroking=[s,l]}return this._cachedScaleForStroking}rescaleAndStroke(a){const{ctx:e}=this,{lineWidth:s}=this.current,[l,f]=this.getScaleForStroking();if(e.lineWidth=s||1,1===l&&1===f)return void e.stroke();let p,c,L;a&&(p=e.mozCurrentTransform.slice(),c=e.getLineDash().slice(),L=e.lineDashOffset),e.scale(l,f);const q=Math.max(l,f);e.setLineDash(e.getLineDash().map(B=>B/q)),e.lineDashOffset/=q,e.stroke(),a&&(e.setTransform(...p),e.setLineDash(c),e.lineDashOffset=L)}getCanvasPosition(a,e){const s=this.ctx.mozCurrentTransform;return[s[0]*a+s[2]*e+s[4],s[1]*a+s[3]*e+s[5]]}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}}o.CanvasGraphics=ue;for(const F in i.OPS)void 0!==ue.prototype[F]&&(ue.prototype[i.OPS[F]]=ue.prototype[F])},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TilingPattern=o.PathType=void 0,o.getShadingPattern=function D(x){switch(x[0]){case"RadialAxial":return new T(x);case"Mesh":return new W(x);case"Dummy":return new V}throw new Error(`Unknown IR type: ${x[0]}`)};var i=P(1),O=P(3);const w={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function r(x,b){if(!b||O.isNodeJS)return;const C=b[2]-b[0],A=b[3]-b[1],v=new Path2D;v.rect(b[0],b[1],C,A),x.clip(v)}o.PathType=w;class E{constructor(){this.constructor===E&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class T extends E{constructor(b){super(),this._type=b[1],this._bbox=b[2],this._colorStops=b[3],this._p0=b[4],this._p1=b[5],this._r0=b[6],this._r1=b[7],this.matrix=null}_createGradient(b){let C;"axial"===this._type?C=b.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(C=b.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const A of this._colorStops)C.addColorStop(A[0],A[1]);return C}getPattern(b,C,A,v){let t;if(v===w.STROKE||v===w.FILL){const n=C.current.getClippedPathBoundingBox(v,b.mozCurrentTransform)||[0,0,0,0],h=Math.ceil(n[2]-n[0])||1,S=Math.ceil(n[3]-n[1])||1,u=C.cachedCanvases.getCanvas("pattern",h,S,!0),m=u.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-n[0],-n[1]),A=i.Util.transform(A,[1,0,0,1,n[0],n[1]]),m.transform.apply(m,C.baseTransform),this.matrix&&m.transform.apply(m,this.matrix),r(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),t=b.createPattern(u.canvas,"no-repeat");const g=new DOMMatrix(A);try{t.setTransform(g)}catch(d){(0,i.warn)(`RadialAxialShadingPattern.getPattern: "${d?.message}".`)}}else r(b,this._bbox),t=this._createGradient(b);return t}}function y(x,b,C,A,v,t,n,h){const S=b.coords,u=b.colors,m=x.data,g=4*x.width;let d;S[C+1]>S[A+1]&&(d=C,C=A,A=d,d=t,t=n,n=d),S[A+1]>S[v+1]&&(d=A,A=v,v=d,d=n,n=h,h=d),S[C+1]>S[A+1]&&(d=C,C=A,A=d,d=t,t=n,n=d);const R=(S[C]+b.offsetX)*b.scaleX,k=(S[C+1]+b.offsetY)*b.scaleY,j=(S[A]+b.offsetX)*b.scaleX,$=(S[A+1]+b.offsetY)*b.scaleY,Q=(S[v]+b.offsetX)*b.scaleX,K=(S[v+1]+b.offsetY)*b.scaleY;if(k>=K)return;const re=u[t],fe=u[t+1],ue=u[t+2],F=u[n],a=u[n+1],e=u[n+2],s=u[h],l=u[h+1],f=u[h+2],p=Math.round(k),c=Math.round(K);let L,q,B,Y,X,te,ie,pe;for(let Ae=p;Ae<=c;Ae++){if(Ae<$){let Te;Te=Ae<k?0:(k-Ae)/(k-$),L=R-(R-j)*Te,q=re-(re-F)*Te,B=fe-(fe-a)*Te,Y=ue-(ue-e)*Te}else{let Te;Te=Ae>K?1:$===K?0:($-Ae)/($-K),L=j-(j-Q)*Te,q=F-(F-s)*Te,B=a-(a-l)*Te,Y=e-(e-f)*Te}let Ce;Ce=Ae<k?0:Ae>K?1:(k-Ae)/(k-K),X=R-(R-Q)*Ce,te=re-(re-s)*Ce,ie=fe-(fe-l)*Ce,pe=ue-(ue-f)*Ce;const ye=Math.round(Math.min(L,X)),he=Math.round(Math.max(L,X));let ke=g*Ae+4*ye;for(let Te=ye;Te<=he;Te++)Ce=(L-Te)/(L-X),Ce<0?Ce=0:Ce>1&&(Ce=1),m[ke++]=q-(q-te)*Ce|0,m[ke++]=B-(B-ie)*Ce|0,m[ke++]=Y-(Y-pe)*Ce|0,m[ke++]=255}}function N(x,b,C){const A=b.coords,v=b.colors;let t,n;switch(b.type){case"lattice":const h=b.verticesPerRow,S=Math.floor(A.length/h)-1,u=h-1;for(t=0;t<S;t++){let m=t*h;for(let g=0;g<u;g++,m++)y(x,C,A[m],A[m+1],A[m+h],v[m],v[m+1],v[m+h]),y(x,C,A[m+h+1],A[m+1],A[m+h],v[m+h+1],v[m+1],v[m+h])}break;case"triangles":for(t=0,n=A.length;t<n;t+=3)y(x,C,A[t],A[t+1],A[t+2],v[t],v[t+1],v[t+2]);break;default:throw new Error("illegal figure")}}class W extends E{constructor(b){super(),this._coords=b[2],this._colors=b[3],this._figures=b[4],this._bounds=b[5],this._bbox=b[7],this._background=b[8],this.matrix=null}_createMeshCanvas(b,C,A){const h=Math.floor(this._bounds[0]),S=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-h,m=Math.ceil(this._bounds[3])-S,g=Math.min(Math.ceil(Math.abs(u*b[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(m*b[1]*1.1)),3e3),R=u/g,k=m/d,j={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-S,scaleX:1/R,scaleY:1/k},K=A.getCanvas("mesh",g+4,d+4,!1),re=K.context,fe=re.createImageData(g,d);if(C){const F=fe.data;for(let a=0,e=F.length;a<e;a+=4)F[a]=C[0],F[a+1]=C[1],F[a+2]=C[2],F[a+3]=255}for(const F of this._figures)N(fe,F,j);return re.putImageData(fe,2,2),{canvas:K.canvas,offsetX:h-2*R,offsetY:S-2*k,scaleX:R,scaleY:k}}getPattern(b,C,A,v){let t;if(r(b,this._bbox),v===w.SHADING)t=i.Util.singularValueDecompose2dScale(b.mozCurrentTransform);else if(t=i.Util.singularValueDecompose2dScale(C.baseTransform),this.matrix){const h=i.Util.singularValueDecompose2dScale(this.matrix);t=[t[0]*h[0],t[1]*h[1]]}const n=this._createMeshCanvas(t,v===w.SHADING?null:this._background,C.cachedCanvases);return v!==w.SHADING&&(b.setTransform.apply(b,C.baseTransform),this.matrix&&b.transform.apply(b,this.matrix)),b.translate(n.offsetX,n.offsetY),b.scale(n.scaleX,n.scaleY),b.createPattern(n.canvas,"no-repeat")}}class V extends E{getPattern(){return"hotpink"}}class _{static get MAX_PATTERN_SIZE(){return(0,i.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(b,C,A,v,t){this.operatorList=b[2],this.matrix=b[3]||[1,0,0,1,0,0],this.bbox=b[4],this.xstep=b[5],this.ystep=b[6],this.paintType=b[7],this.tilingType=b[8],this.color=C,this.ctx=A,this.canvasGraphicsFactory=v,this.baseTransform=t}createPatternCanvas(b){const C=this.operatorList,A=this.bbox,v=this.xstep,t=this.ystep,n=this.paintType,S=this.color,u=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+this.tilingType);const m=A[0],g=A[1],d=A[2],R=A[3],k=i.Util.singularValueDecompose2dScale(this.matrix),j=i.Util.singularValueDecompose2dScale(this.baseTransform),$=[k[0]*j[0],k[1]*j[1]],Q=this.getSizeAndScale(v,this.ctx.canvas.width,$[0]),K=this.getSizeAndScale(t,this.ctx.canvas.height,$[1]),re=b.cachedCanvases.getCanvas("pattern",Q.size,K.size,!0),fe=re.context,ue=u.createCanvasGraphics(fe);ue.groupLevel=b.groupLevel,this.setFillAndStrokeStyleToContext(ue,n,S);let F=m,a=g,e=d,s=R;return m<0&&(F=0,e+=Math.abs(m)),g<0&&(a=0,s+=Math.abs(g)),fe.translate(-Q.scale*F,-K.scale*a),ue.transform(Q.scale,0,0,K.scale,0,0),fe.save(),this.clipBbox(ue,F,a,e,s),ue.baseTransform=ue.ctx.mozCurrentTransform.slice(),ue.executeOperatorList(C),ue.endDrawing(),{canvas:re.canvas,scaleX:Q.scale,scaleY:K.scale,offsetX:F,offsetY:a}}getSizeAndScale(b,C,A){b=Math.abs(b);const v=Math.max(_.MAX_PATTERN_SIZE,C);let t=Math.ceil(b*A);return t>=v?t=v:A=t/b,{scale:A,size:t}}clipBbox(b,C,A,v,t){b.ctx.rect(C,A,v-C,t-A),b.current.updateRectMinMax(b.ctx.mozCurrentTransform,[C,A,v,t]),b.clip(),b.endPath()}setFillAndStrokeStyleToContext(b,C,A){const v=b.ctx,t=b.current;switch(C){case 1:const n=this.ctx;v.fillStyle=n.fillStyle,v.strokeStyle=n.strokeStyle,t.fillColor=n.fillStyle,t.strokeColor=n.strokeStyle;break;case 2:const h=i.Util.makeHexColor(A[0],A[1],A[2]);v.fillStyle=h,v.strokeStyle=h,t.fillColor=h,t.strokeColor=h;break;default:throw new i.FormatError(`Unsupported paint type: ${C}`)}}getPattern(b,C,A,v){let t=A;v!==w.SHADING&&(t=i.Util.transform(t,C.baseTransform),this.matrix&&(t=i.Util.transform(t,this.matrix)));const n=this.createPatternCanvas(C);let h=new DOMMatrix(t);h=h.translate(n.offsetX,n.offsetY),h=h.scale(1/n.scaleX,1/n.scaleY);const S=b.createPattern(n.canvas,"repeat");try{S.setTransform(h)}catch(u){(0,i.warn)(`TilingPattern.getPattern: "${u?.message}".`)}return S}}o.TilingPattern=_},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.applyMaskImageData=function O({src:w,srcPos:r=0,dest:E,destPos:T=0,width:y,height:N,inverseDecode:W=!1}){const V=i.FeatureTest.isLittleEndian?4278190080:255,[D,H]=W?[0,V]:[V,0],_=y>>3,x=7&y,b=w.length;E=new Uint32Array(E.buffer);for(let C=0;C<N;C++){for(const v=r+_;r<v;r++){const t=r<b?w[r]:255;E[T++]=128&t?H:D,E[T++]=64&t?H:D,E[T++]=32&t?H:D,E[T++]=16&t?H:D,E[T++]=8&t?H:D,E[T++]=4&t?H:D,E[T++]=2&t?H:D,E[T++]=1&t?H:D}if(0===x)continue;const A=r<b?w[r++]:255;for(let v=0;v<x;v++)E[T++]=A&1<<7-v?H:D}return{srcPos:r,destPos:T}};var i=P(1)},(G,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GlobalWorkerOptions=void 0;const P=Object.create(null);o.GlobalWorkerOptions=P,P.workerPort=void 0===P.workerPort?null:P.workerPort,P.workerSrc=void 0===P.workerSrc?"":P.workerSrc},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MessageHandler=void 0;var i=P(1);function r(T){switch(T instanceof Error||"object"==typeof T&&null!==T||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),T.name){case"AbortException":return new i.AbortException(T.message);case"MissingPDFException":return new i.MissingPDFException(T.message);case"PasswordException":return new i.PasswordException(T.message,T.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(T.message,T.status);case"UnknownErrorException":return new i.UnknownErrorException(T.message,T.details);default:return new i.UnknownErrorException(T.message,T.toString())}}o.MessageHandler=class E{constructor(y,N,W){this.sourceName=y,this.targetName=N,this.comObj=W,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=V=>{const D=V.data;if(D.targetName!==this.sourceName)return;if(D.stream)return void this._processStreamMessage(D);if(D.callback){const _=D.callbackId,x=this.callbackCapabilities[_];if(!x)throw new Error(`Cannot resolve callback ${_}`);if(delete this.callbackCapabilities[_],1===D.callback)x.resolve(D.data);else{if(2!==D.callback)throw new Error("Unexpected callback case");x.reject(r(D.reason))}return}const H=this.actionHandler[D.action];if(!H)throw new Error(`Unknown action from worker: ${D.action}`);if(D.callbackId){const _=this.sourceName,x=D.sourceName;new Promise(function(b){b(H(D.data))}).then(function(b){W.postMessage({sourceName:_,targetName:x,callback:1,callbackId:D.callbackId,data:b})},function(b){W.postMessage({sourceName:_,targetName:x,callback:2,callbackId:D.callbackId,reason:r(b)})})}else D.streamId?this._createStreamSink(D):H(D.data)},W.addEventListener("message",this._onComObjOnMessage)}on(y,N){const W=this.actionHandler;if(W[y])throw new Error(`There is already an actionName called "${y}"`);W[y]=N}send(y,N,W){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:N},W)}sendWithPromise(y,N,W){const V=this.callbackId++,D=(0,i.createPromiseCapability)();this.callbackCapabilities[V]=D;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:V,data:N},W)}catch(H){D.reject(H)}return D.promise}sendWithStream(y,N,W,V){const D=this.streamId++,H=this.sourceName,_=this.targetName,x=this.comObj;return new ReadableStream({start:b=>{const C=(0,i.createPromiseCapability)();return this.streamControllers[D]={controller:b,startCall:C,pullCall:null,cancelCall:null,isClosed:!1},x.postMessage({sourceName:H,targetName:_,action:y,streamId:D,data:N,desiredSize:b.desiredSize},V),C.promise},pull:b=>{const C=(0,i.createPromiseCapability)();return this.streamControllers[D].pullCall=C,x.postMessage({sourceName:H,targetName:_,stream:6,streamId:D,desiredSize:b.desiredSize}),C.promise},cancel:b=>{(0,i.assert)(b instanceof Error,"cancel must have a valid reason");const C=(0,i.createPromiseCapability)();return this.streamControllers[D].cancelCall=C,this.streamControllers[D].isClosed=!0,x.postMessage({sourceName:H,targetName:_,stream:1,streamId:D,reason:r(b)}),C.promise}},W)}_createStreamSink(y){const N=y.streamId,W=this.sourceName,V=y.sourceName,D=this.comObj,H=this,_=this.actionHandler[y.action],x={enqueue(b,C=1,A){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=C,v>0&&this.desiredSize<=0&&(this.sinkCapability=(0,i.createPromiseCapability)(),this.ready=this.sinkCapability.promise),D.postMessage({sourceName:W,targetName:V,stream:4,streamId:N,chunk:b},A)},close(){this.isCancelled||(this.isCancelled=!0,D.postMessage({sourceName:W,targetName:V,stream:3,streamId:N}),delete H.streamSinks[N])},error(b){(0,i.assert)(b instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,D.postMessage({sourceName:W,targetName:V,stream:5,streamId:N,reason:r(b)}))},sinkCapability:(0,i.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};x.sinkCapability.resolve(),x.ready=x.sinkCapability.promise,this.streamSinks[N]=x,new Promise(function(b){b(_(y.data,x))}).then(function(){D.postMessage({sourceName:W,targetName:V,stream:8,streamId:N,success:!0})},function(b){D.postMessage({sourceName:W,targetName:V,stream:8,streamId:N,reason:r(b)})})}_processStreamMessage(y){const N=y.streamId,W=this.sourceName,V=y.sourceName,D=this.comObj,H=this.streamControllers[N],_=this.streamSinks[N];switch(y.stream){case 8:y.success?H.startCall.resolve():H.startCall.reject(r(y.reason));break;case 7:y.success?H.pullCall.resolve():H.pullCall.reject(r(y.reason));break;case 6:if(!_){D.postMessage({sourceName:W,targetName:V,stream:7,streamId:N,success:!0});break}_.desiredSize<=0&&y.desiredSize>0&&_.sinkCapability.resolve(),_.desiredSize=y.desiredSize,new Promise(function(x){x(_.onPull&&_.onPull())}).then(function(){D.postMessage({sourceName:W,targetName:V,stream:7,streamId:N,success:!0})},function(x){D.postMessage({sourceName:W,targetName:V,stream:7,streamId:N,reason:r(x)})});break;case 4:if((0,i.assert)(H,"enqueue should have stream controller"),H.isClosed)break;H.controller.enqueue(y.chunk);break;case 3:if((0,i.assert)(H,"close should have stream controller"),H.isClosed)break;H.isClosed=!0,H.controller.close(),this._deleteStreamController(H,N);break;case 5:(0,i.assert)(H,"error should have stream controller"),H.controller.error(r(y.reason)),this._deleteStreamController(H,N);break;case 2:y.success?H.cancelCall.resolve():H.cancelCall.reject(r(y.reason)),this._deleteStreamController(H,N);break;case 1:if(!_)break;new Promise(function(x){x(_.onCancel&&_.onCancel(r(y.reason)))}).then(function(){D.postMessage({sourceName:W,targetName:V,stream:2,streamId:N,success:!0})},function(x){D.postMessage({sourceName:W,targetName:V,stream:2,streamId:N,reason:r(x)})}),_.sinkCapability.reject(r(y.reason)),_.isCancelled=!0,delete this.streamSinks[N];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(y,N){var W=this;return _asyncToGenerator(function*(){yield Promise.allSettled([y.startCall&&y.startCall.promise,y.pullCall&&y.pullCall.promise,y.cancelCall&&y.cancelCall.promise]),delete W.streamControllers[N]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Metadata=void 0;var i=P(1),O=new WeakMap,w=new WeakMap;o.Metadata=class r{constructor({parsedData:T,rawData:y}){_classPrivateFieldInitSpec(this,O,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,w,{writable:!0,value:void 0}),_classPrivateFieldSet(this,O,T),_classPrivateFieldSet(this,w,y)}getRaw(){return _classPrivateFieldGet(this,w)}get(T){return _classPrivateFieldGet(this,O).get(T)??null}getAll(){return(0,i.objectFromMap)(_classPrivateFieldGet(this,O))}has(T){return _classPrivateFieldGet(this,O).has(T)}}},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionalContentConfig=void 0;var i=P(1);class O{constructor(E,T){this.visible=!0,this.name=E,this.intent=T}}o.OptionalContentConfig=class w{constructor(E){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==E){this.name=E.name,this.creator=E.creator,this._order=E.order;for(const T of E.groups)this._groups.set(T.id,new O(T.name,T.intent));if("OFF"===E.baseState)for(const T of this._groups)T.visible=!1;for(const T of E.on)this._groups.get(T).visible=!0;for(const T of E.off)this._groups.get(T).visible=!1}}_evaluateVisibilityExpression(E){const T=E.length;if(T<2)return!0;const y=E[0];for(let N=1;N<T;N++){const W=E[N];let V;if(Array.isArray(W))V=this._evaluateVisibilityExpression(W);else{if(!this._groups.has(W))return(0,i.warn)(`Optional content group not found: ${W}`),!0;V=this._groups.get(W).visible}switch(y){case"And":if(!V)return!1;break;case"Or":if(V)return!0;break;case"Not":return!V;default:return!0}}return"And"===y}isVisible(E){if(0===this._groups.size)return!0;if(!E)return(0,i.warn)("Optional content group not defined."),!0;if("OCG"===E.type)return this._groups.has(E.id)?this._groups.get(E.id).visible:((0,i.warn)(`Optional content group not found: ${E.id}`),!0);if("OCMD"===E.type){if(E.expression)return this._evaluateVisibilityExpression(E.expression);if(!E.policy||"AnyOn"===E.policy){for(const T of E.ids){if(!this._groups.has(T))return(0,i.warn)(`Optional content group not found: ${T}`),!0;if(this._groups.get(T).visible)return!0}return!1}if("AllOn"===E.policy){for(const T of E.ids){if(!this._groups.has(T))return(0,i.warn)(`Optional content group not found: ${T}`),!0;if(!this._groups.get(T).visible)return!1}return!0}if("AnyOff"===E.policy){for(const T of E.ids){if(!this._groups.has(T))return(0,i.warn)(`Optional content group not found: ${T}`),!0;if(!this._groups.get(T).visible)return!0}return!1}if("AllOff"===E.policy){for(const T of E.ids){if(!this._groups.has(T))return(0,i.warn)(`Optional content group not found: ${T}`),!0;if(this._groups.get(T).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${E.policy}.`),!0}return(0,i.warn)(`Unknown group type ${E.type}.`),!0}setVisibility(E,T=!0){this._groups.has(E)?this._groups.get(E).visible=!!T:(0,i.warn)(`Optional content group not found: ${E}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,i.objectFromMap)(this._groups):null}getGroup(E){return this._groups.get(E)||null}}},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFDataTransportStream=void 0;var i=P(1),O=P(5);o.PDFDataTransportStream=class w{constructor(y,N){(0,i.assert)(N,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=y.progressiveDone||!1,this._contentDispositionFilename=y.contentDispositionFilename||null;const W=y.initialData;if(W?.length>0){const V=new Uint8Array(W).buffer;this._queuedChunks.push(V)}this._pdfDataRangeTransport=N,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._contentLength=y.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((V,D)=>{this._onReceiveData({begin:V,chunk:D})}),this._pdfDataRangeTransport.addProgressListener((V,D)=>{this._onProgress({loaded:V,total:D})}),this._pdfDataRangeTransport.addProgressiveReadListener(V=>{this._onReceiveData({chunk:V})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(y){const N=new Uint8Array(y.chunk).buffer;if(void 0===y.begin)this._fullRequestReader?this._fullRequestReader._enqueue(N):this._queuedChunks.push(N);else{const W=this._rangeReaders.some(function(V){return V._begin===y.begin&&(V._enqueue(N),!0)});(0,i.assert)(W,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(y){if(void 0===y.total){const N=this._rangeReaders[0];N?.onProgress&&N.onProgress({loaded:y.loaded})}else{const N=this._fullRequestReader;N?.onProgress&&N.onProgress({loaded:y.loaded,total:y.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(y){const N=this._rangeReaders.indexOf(y);N>=0&&this._rangeReaders.splice(N,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const y=this._queuedChunks;return this._queuedChunks=null,new r(this,y,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(y,N){if(N<=this._progressiveDataLength)return null;const W=new E(this,y,N);return this._pdfDataRangeTransport.requestDataRange(y,N),this._rangeReaders.push(W),W}cancelAllRequests(y){this._fullRequestReader&&this._fullRequestReader.cancel(y);for(const N of this._rangeReaders.slice(0))N.cancel(y);this._pdfDataRangeTransport.abort()}};class r{constructor(y,N,W=!1,V=null){this._stream=y,this._done=W||!1,this._filename=(0,O.isPdfFile)(V)?V:null,this._queuedChunks=N||[],this._loaded=0;for(const D of this._queuedChunks)this._loaded+=D.byteLength;this._requests=[],this._headersReady=Promise.resolve(),y._fullRequestReader=this,this.onProgress=null}_enqueue(y){this._done||(this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunks.push(y),this._loaded+=y.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var y=this;return _asyncToGenerator(function*(){if(y._queuedChunks.length>0)return{value:y._queuedChunks.shift(),done:!1};if(y._done)return{value:void 0,done:!0};const N=(0,i.createPromiseCapability)();return y._requests.push(N),N.promise})()}cancel(y){this._done=!0;for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class E{constructor(y,N,W){this._stream=y,this._begin=N,this._end=W,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(y){if(!this._done){if(0===this._requests.length)this._queuedChunk=y;else{this._requests.shift().resolve({value:y,done:!1});for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var y=this;return _asyncToGenerator(function*(){if(y._queuedChunk){const W=y._queuedChunk;return y._queuedChunk=null,{value:W,done:!1}}if(y._done)return{value:void 0,done:!0};const N=(0,i.createPromiseCapability)();return y._requests.push(N),N.promise})()}cancel(y){this._done=!0;for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(G,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaText=void 0;class P{static textContent(O){const w=[],r={items:w,styles:Object.create(null)};return function E(T){if(!T)return;let y=null;const N=T.name;if("#text"===N)y=T.value;else{if(!P.shouldBuildText(N))return;T?.attributes?.textContent?y=T.attributes.textContent:T.value&&(y=T.value)}if(null!==y&&w.push({str:y}),T.children)for(const W of T.children)E(W)}(O),r}static shouldBuildText(O){return!("textarea"===O||"input"===O||"option"===O||"select"===O)}}o.XfaText=P},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NodeStandardFontDataFactory=o.NodeCanvasFactory=o.NodeCMapReaderFactory=void 0;var i=P(6);const O=function(T){return new Promise((y,N)=>{__webpack_require__(172).readFile(T,(V,D)=>{!V&&D?y(new Uint8Array(D)):N(new Error(V))})})};o.NodeCanvasFactory=class w extends i.BaseCanvasFactory{_createCanvas(y,N){return __webpack_require__(3414).createCanvas(y,N)}},o.NodeCMapReaderFactory=class r extends i.BaseCMapReaderFactory{_fetchData(y,N){return O(y).then(W=>({cMapData:W,compressionType:N}))}},o.NodeStandardFontDataFactory=class E extends i.BaseStandardFontDataFactory{_fetchData(y){return O(y)}}},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationLayer=void 0;var i=P(1),O=P(5),w=P(8),r=P(21),E=P(22);const T=1e3,y=new WeakSet;function N(a){return{width:a[2]-a[0],height:a[3]-a[1]}}class W{static create(e){switch(e.data.annotationType){case i.AnnotationType.LINK:return new D(e);case i.AnnotationType.TEXT:return new H(e);case i.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new x(e);case"Btn":return e.data.radioButton?new C(e):e.data.checkBox?new b(e):new A(e);case"Ch":return new v(e)}return new _(e);case i.AnnotationType.POPUP:return new t(e);case i.AnnotationType.FREETEXT:return new h(e);case i.AnnotationType.LINE:return new S(e);case i.AnnotationType.SQUARE:return new u(e);case i.AnnotationType.CIRCLE:return new m(e);case i.AnnotationType.POLYLINE:return new g(e);case i.AnnotationType.CARET:return new R(e);case i.AnnotationType.INK:return new k(e);case i.AnnotationType.POLYGON:return new d(e);case i.AnnotationType.HIGHLIGHT:return new j(e);case i.AnnotationType.UNDERLINE:return new $(e);case i.AnnotationType.SQUIGGLY:return new Q(e);case i.AnnotationType.STRIKEOUT:return new K(e);case i.AnnotationType.STAMP:return new re(e);case i.AnnotationType.FILEATTACHMENT:return new fe(e);default:return new V(e)}}}class V{constructor(e,{isRenderable:s=!1,ignoreBorder:l=!1,createQuadrilaterals:f=!1}={}){this.isRenderable=s,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this._mouseState=e.mouseState,s&&(this.container=this._createContainer(l)),f&&(this.quadrilaterals=this._createQuadrilaterals(l))}_createContainer(e=!1){const s=this.data,l=this.page,f=this.viewport,p=document.createElement("section");let{width:c,height:L}=N(s.rect);p.setAttribute("data-annotation-id",s.id);const q=i.Util.normalizeRect([s.rect[0],l.view[3]-s.rect[1]+l.view[1],s.rect[2],l.view[3]-s.rect[3]+l.view[1]]);if(s.hasOwnCanvas){const B=f.transform.slice(),[Y,X]=i.Util.singularValueDecompose2dScale(B);c=Math.ceil(c*Y),L=Math.ceil(L*X),q[0]*=Y,q[1]*=X;for(let te=0;te<4;te++)B[te]=Math.sign(B[te]);p.style.transform=`matrix(${B.join(",")})`}else p.style.transform=`matrix(${f.transform.join(",")})`;if(p.style.transformOrigin=`${-q[0]}px ${-q[1]}px`,!e&&s.borderStyle.width>0){p.style.borderWidth=`${s.borderStyle.width}px`,s.borderStyle.style!==i.AnnotationBorderStyleType.UNDERLINE&&(c-=2*s.borderStyle.width,L-=2*s.borderStyle.width);const B=s.borderStyle.horizontalCornerRadius,Y=s.borderStyle.verticalCornerRadius;switch((B>0||Y>0)&&(p.style.borderRadius=`${B}px / ${Y}px`),s.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:p.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:p.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:p.style.borderBottomStyle="solid"}s.borderColor||s.color?p.style.borderColor=i.Util.makeHexColor(0|s.color[0],0|s.color[1],0|s.color[2]):p.style.borderWidth=0}return p.style.left=`${q[0]}px`,p.style.top=`${q[1]}px`,s.hasOwnCanvas?p.style.width=p.style.height="auto":(p.style.width=`${c}px`,p.style.height=`${L}px`),p}get _commonActions(){const e=(s,l,f)=>{const p=f.detail[s];f.target.style[l]=r.ColorConverters[`${p[0]}_HTML`](p.slice(1))};return(0,i.shadow)(this,"_commonActions",{display:s=>{const l=s.detail.display%2==1;s.target.style.visibility=l?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:l,print:0===s.detail.display||3===s.detail.display})},print:s=>{this.annotationStorage.setValue(this.data.id,{print:s.detail.print})},hidden:s=>{s.target.style.visibility=s.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:s.detail.hidden})},focus:s=>{setTimeout(()=>s.target.focus({preventScroll:!1}),0)},userName:s=>{s.target.title=s.detail.userName},readonly:s=>{s.detail.readonly?s.target.setAttribute("readonly",""):s.target.removeAttribute("readonly")},required:s=>{s.detail.required?s.target.setAttribute("required",""):s.target.removeAttribute("required")},bgColor:s=>{e("bgColor","backgroundColor",s)},fillColor:s=>{e("fillColor","backgroundColor",s)},fgColor:s=>{e("fgColor","color",s)},textColor:s=>{e("textColor","color",s)},borderColor:s=>{e("borderColor","borderColor",s)},strokeColor:s=>{e("strokeColor","borderColor",s)}})}_dispatchEventFromSandbox(e,s){const l=this._commonActions;for(const f of Object.keys(s.detail)){const p=e[f]||l[f];p&&p(s)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const s=this.annotationStorage.getRawValue(this.data.id);if(!s)return;const l=this._commonActions;for(const[f,p]of Object.entries(s)){const c=l[f];c&&(c({detail:p,target:e}),delete s[f])}}_createQuadrilaterals(e=!1){if(!this.data.quadPoints)return null;const s=[],l=this.data.rect;for(const f of this.data.quadPoints)this.data.rect=[f[2].x,f[2].y,f[1].x,f[1].y],s.push(this._createContainer(e));return this.data.rect=l,s}_createPopup(e,s){let l=this.container;this.quadrilaterals&&(e=e||this.quadrilaterals,l=this.quadrilaterals[0]),e||((e=document.createElement("div")).style.height=l.style.height,e.style.width=l.style.width,l.appendChild(e));const p=new n({container:l,trigger:e,color:s.color,titleObj:s.titleObj,modificationDate:s.modificationDate,contentsObj:s.contentsObj,richText:s.richText,hideWrapper:!0}).render();p.style.left=l.style.width,l.appendChild(p)}_renderQuadrilaterals(e){for(const s of this.quadrilaterals)s.className=e;return this.quadrilaterals}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,s=null){const l=[];if(this._fieldObjects){const f=this._fieldObjects[e];if(f)for(const{page:p,id:c,exportValues:L}of f){if(-1===p||c===s)continue;const q="string"==typeof L?L:null,B=document.getElementById(c);!B||y.has(B)?l.push({id:c,exportValue:q,domElement:B}):(0,i.warn)(`_getElementsByName - element not allowed: ${c}`)}return l}for(const f of document.getElementsByName(e)){const{id:p,exportValue:c}=f;p!==s&&y.has(f)&&l.push({id:p,exportValue:c,domElement:f})}return l}static get platform(){const e=typeof navigator<"u"?navigator.platform:"";return(0,i.shadow)(this,"platform",{isWin:e.includes("Win"),isMac:e.includes("Mac")})}}class D extends V{constructor(e,s=null){super(e,{isRenderable:!!(e.data.url||e.data.dest||e.data.action||e.data.isTooltipOnly||e.data.resetForm||e.data.actions&&(e.data.actions.Action||e.data.actions["Mouse Up"]||e.data.actions["Mouse Down"])),ignoreBorder:!!s?.ignoreBorder,createQuadrilaterals:!0})}render(){const{data:e,linkService:s}=this,l=document.createElement("a");if(e.url)s.addLinkAttributes(l,e.url,e.newWindow);else if(e.action)this._bindNamedAction(l,e.action);else if(e.dest)this._bindLink(l,e.dest);else{let f=!1;e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(f=!0,this._bindJSAction(l,e)),e.resetForm?this._bindResetFormAction(l,e.resetForm):f||this._bindLink(l,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((f,p)=>{const c=0===p?l:l.cloneNode();return f.appendChild(c),f}):(this.container.className="linkAnnotation",this.container.appendChild(l),this.container)}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||""===s)&&(e.className="internalLink")}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),e.className="internalLink"}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const l=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const f of Object.keys(s.actions)){const p=l.get(f);p&&(e[p]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:f}}),!1))}e.onclick||(e.onclick=()=>!1),e.className="internalLink"}_bindResetFormAction(e,s){const l=e.onclick;if(l||(e.href=this.linkService.getAnchorUrl("")),e.className="internalLink",!this._fieldObjects)return(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(l||(e.onclick=()=>!1));e.onclick=()=>{l&&l();const{fields:f,refs:p,include:c}=s,L=[];if(0!==f.length||0!==p.length){const Y=new Set(p);for(const X of f){const te=this._fieldObjects[X]||[];for(const{id:ie}of te)Y.add(ie)}for(const X of Object.values(this._fieldObjects))for(const te of X)Y.has(te.id)===c&&L.push(te)}else for(const Y of Object.values(this._fieldObjects))L.push(...Y);const q=this.annotationStorage,B=[];for(const Y of L){const{id:X}=Y;switch(B.push(X),Y.type){case"text":case"combobox":case"listbox":q.setValue(X,{value:Y.defaultValue||""});break;case"checkbox":case"radiobutton":q.setValue(X,{value:Y.defaultValue===Y.exportValues});break;default:continue}const te=document.getElementById(X);!te||!y.has(te)||te.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:B,name:"ResetForm"}}),!1}}}class H extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str)})}render(){this.container.className="textAnnotation";const e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.appendChild(e),this.container}}class _ extends V{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(e){const{isWin:s,isMac:l}=V.platform;return s&&e.ctrlKey||l&&e.metaKey}_setEventListener(e,s,l,f){s.includes("mouse")?e.addEventListener(s,p=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:l,value:f(p),shift:p.shiftKey,modifier:this._getKeyModifier(p)}})}):e.addEventListener(s,p=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:l,value:f(p)}})})}_setEventListeners(e,s,l){for(const[f,p]of s)("Action"===p||this.data.actions?.[p])&&this._setEventListener(e,f,p,l)}_setBackgroundColor(e){const s=this.data.backgroundColor||null;e.style.backgroundColor=null===s?"transparent":i.Util.makeHexColor(s[0],s[1],s[2])}}class x extends _{constructor(e){super(e,{isRenderable:e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,s,l,f){const p=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[s]=l),p.setValue(c.id,{[f]:l})}render(){const e=this.annotationStorage,s=this.data.id;this.container.className="textWidgetAnnotation";let l=null;if(this.renderForms){const f=e.getValue(s,{value:this.data.fieldValue}),p=f.formattedValue||f.value||"",c={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(l=document.createElement("textarea"),l.textContent=p):(l=document.createElement("input"),l.type="text",l.setAttribute("value",p)),y.add(l),l.disabled=this.data.readOnly,l.name=this.data.fieldName,l.tabIndex=T,c.userValue=p,l.setAttribute("id",s),l.addEventListener("input",q=>{e.setValue(s,{value:q.target.value}),this.setPropertyOnSiblings(l,"value",q.target.value,"value")}),l.addEventListener("resetform",q=>{l.value=c.userValue=this.data.defaultFieldValue??"",c.formattedValue=null});let L=q=>{const{formattedValue:B}=c;null!=B&&(q.target.value=B),q.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){l.addEventListener("focus",B=>{c.userValue&&(B.target.value=c.userValue),c.valueOnFocus=B.target.value}),l.addEventListener("updatefromsandbox",B=>{this._dispatchEventFromSandbox({value(X){c.userValue=X.detail.value??"",e.setValue(s,{value:c.userValue.toString()}),X.target.value=c.userValue},formattedValue(X){const{formattedValue:te}=X.detail;c.formattedValue=te,null!=te&&X.target!==document.activeElement&&(X.target.value=te),e.setValue(s,{formattedValue:te})},selRange(X){X.target.setSelectionRange(...X.detail.selRange)}},B)}),l.addEventListener("keydown",B=>{let Y=-1;if("Escape"===B.key?Y=0:"Enter"===B.key?Y=2:"Tab"===B.key&&(Y=3),-1===Y)return;const{value:X}=B.target;c.valueOnFocus!==X&&(c.userValue=X,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:X,willCommit:!0,commitKey:Y,selStart:B.target.selectionStart,selEnd:B.target.selectionEnd}}))});const q=L;L=null,l.addEventListener("blur",B=>{const{value:Y}=B.target;c.userValue=Y,this._mouseState.isDown&&c.valueOnFocus!==Y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Y,willCommit:!0,commitKey:1,selStart:B.target.selectionStart,selEnd:B.target.selectionEnd}}),q(B)}),this.data.actions?.Keystroke&&l.addEventListener("beforeinput",B=>{const{data:Y,target:X}=B,{value:te,selectionStart:ie,selectionEnd:pe}=X;let Ae=ie,Ce=pe;switch(B.inputType){case"deleteWordBackward":{const ye=te.substring(0,ie).match(/\w*[^\w]*$/);ye&&(Ae-=ye[0].length);break}case"deleteWordForward":{const ye=te.substring(ie).match(/^[^\w]*\w*/);ye&&(Ce+=ye[0].length);break}case"deleteContentBackward":ie===pe&&(Ae-=1);break;case"deleteContentForward":ie===pe&&(Ce+=1)}B.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:te,change:Y||"",willCommit:!1,selStart:Ae,selEnd:Ce}})}),this._setEventListeners(l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],B=>B.target.value)}if(L&&l.addEventListener("blur",L),null!==this.data.maxLen&&(l.maxLength=this.data.maxLen),this.data.comb){const B=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;l.classList.add("comb"),l.style.letterSpacing=`calc(${B}px - 1ch)`}}else l=document.createElement("div"),l.textContent=this.data.fieldValue,l.style.verticalAlign="middle",l.style.display="table-cell";return this._setTextStyle(l),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.appendChild(l),this.container}_setTextStyle(e){const{fontSize:l,fontColor:f}=this.data.defaultAppearanceData,p=e.style;l&&(p.fontSize=`${l}px`),p.color=i.Util.makeHexColor(f[0],f[1],f[2]),null!==this.data.textAlignment&&(p.textAlign=["left","center","right"][this.data.textAlignment])}}class b extends _{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,s=this.data,l=s.id;let f=e.getValue(l,{value:s.exportValue===s.fieldValue}).value;"string"==typeof f&&(f="Off"!==f,e.setValue(l,{value:f})),this.container.className="buttonWidgetAnnotation checkBox";const p=document.createElement("input");return y.add(p),p.disabled=s.readOnly,p.type="checkbox",p.name=s.fieldName,f&&p.setAttribute("checked",!0),p.setAttribute("id",l),p.setAttribute("exportValue",s.exportValue),p.tabIndex=T,p.addEventListener("change",c=>{const{name:L,checked:q}=c.target;for(const B of this._getElementsByName(L,l)){const Y=q&&B.exportValue===s.exportValue;B.domElement&&(B.domElement.checked=Y),e.setValue(B.id,{value:Y})}e.setValue(l,{value:q})}),p.addEventListener("resetform",c=>{c.target.checked=(s.defaultFieldValue||"Off")===s.exportValue}),this.enableScripting&&this.hasJSActions&&(p.addEventListener("updatefromsandbox",c=>{this._dispatchEventFromSandbox({value(q){q.target.checked="Off"!==q.detail.value,e.setValue(l,{value:q.target.checked})}},c)}),this._setEventListeners(p,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(p),this._setDefaultPropertiesFromJS(p),this.container.appendChild(p),this.container}}class C extends _{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const e=this.annotationStorage,s=this.data,l=s.id;let f=e.getValue(l,{value:s.fieldValue===s.buttonValue}).value;"string"==typeof f&&(f=f!==s.buttonValue,e.setValue(l,{value:f}));const p=document.createElement("input");if(y.add(p),p.disabled=s.readOnly,p.type="radio",p.name=s.fieldName,f&&p.setAttribute("checked",!0),p.setAttribute("id",l),p.tabIndex=T,p.addEventListener("change",c=>{const{name:L,checked:q}=c.target;for(const B of this._getElementsByName(L,l))e.setValue(B.id,{value:!1});e.setValue(l,{value:q})}),p.addEventListener("resetform",c=>{const L=s.defaultFieldValue;c.target.checked=null!=L&&L===s.buttonValue}),this.enableScripting&&this.hasJSActions){const c=s.buttonValue;p.addEventListener("updatefromsandbox",L=>{this._dispatchEventFromSandbox({value:B=>{const Y=c===B.detail.value;for(const X of this._getElementsByName(B.target.name)){const te=Y&&X.id===l;X.domElement&&(X.domElement.checked=te),e.setValue(X.id,{value:te})}}},L)}),this._setEventListeners(p,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],L=>L.target.checked)}return this._setBackgroundColor(p),this._setDefaultPropertiesFromJS(p),this.container.appendChild(p),this.container}}class A extends D{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();return e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(e),e}}class v extends _{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const e=this.annotationStorage,s=this.data.id,l=e.getValue(s,{value:this.data.fieldValue});let{fontSize:f}=this.data.defaultAppearanceData;f||(f=9);const p=`calc(${f}px * var(--zoom-factor))`,c=document.createElement("select");y.add(c),c.disabled=this.data.readOnly,c.name=this.data.fieldName,c.setAttribute("id",s),c.tabIndex=T,c.style.fontSize=`${f}px`,this.data.combo||(c.size=this.data.options.length,this.data.multiSelect&&(c.multiple=!0)),c.addEventListener("resetform",B=>{const Y=this.data.defaultFieldValue;for(const X of c.options)X.selected=X.value===Y});for(const B of this.data.options){const Y=document.createElement("option");Y.textContent=B.displayValue,Y.value=B.exportValue,this.data.combo&&(Y.style.fontSize=p),l.value.includes(B.exportValue)&&Y.setAttribute("selected",!0),c.appendChild(Y)}const L=(B,Y)=>{const X=Y?"value":"textContent",te=B.target.options;return B.target.multiple?Array.prototype.filter.call(te,ie=>ie.selected).map(ie=>ie[X]):-1===te.selectedIndex?null:te[te.selectedIndex][X]},q=B=>Array.prototype.map.call(B.target.options,X=>({displayValue:X.textContent,exportValue:X.value}));return this.enableScripting&&this.hasJSActions?(c.addEventListener("updatefromsandbox",B=>{this._dispatchEventFromSandbox({value(X){const te=X.detail.value,ie=new Set(Array.isArray(te)?te:[te]);for(const pe of c.options)pe.selected=ie.has(pe.value);e.setValue(s,{value:L(X,!0)})},multipleSelection(X){c.multiple=!0},remove(X){const te=c.options,ie=X.detail.remove;te[ie].selected=!1,c.remove(ie),te.length>0&&-1===Array.prototype.findIndex.call(te,Ae=>Ae.selected)&&(te[0].selected=!0),e.setValue(s,{value:L(X,!0),items:q(X)})},clear(X){for(;0!==c.length;)c.remove(0);e.setValue(s,{value:null,items:[]})},insert(X){const{index:te,displayValue:ie,exportValue:pe}=X.detail.insert,Ae=document.createElement("option");Ae.textContent=ie,Ae.value=pe,c.insertBefore(Ae,c.children[te]),e.setValue(s,{value:L(X,!0),items:q(X)})},items(X){const{items:te}=X.detail;for(;0!==c.length;)c.remove(0);for(const ie of te){const{displayValue:pe,exportValue:Ae}=ie,Ce=document.createElement("option");Ce.textContent=pe,Ce.value=Ae,c.appendChild(Ce)}c.options.length>0&&(c.options[0].selected=!0),e.setValue(s,{value:L(X,!0),items:q(X)})},indices(X){const te=new Set(X.detail.indices);for(const ie of X.target.options)ie.selected=te.has(ie.index);e.setValue(s,{value:L(X,!0)})},editable(X){X.target.disabled=!X.detail.editable}},B)}),c.addEventListener("input",B=>{const Y=L(B,!0),X=L(B,!1);e.setValue(s,{value:Y}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:X,changeEx:Y,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],B=>B.target.checked)):c.addEventListener("input",function(B){e.setValue(s,{value:L(B,!0)})}),this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.appendChild(c),this.container}}class t extends V{constructor(e){super(e,{isRenderable:!!(e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const l=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===l.length)return this.container;const f=new n({container:this.container,trigger:Array.from(l),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),p=this.page,c=i.Util.normalizeRect([this.data.parentRect[0],p.view[3]-this.data.parentRect[1]+p.view[1],this.data.parentRect[2],p.view[3]-this.data.parentRect[3]+p.view[1]]),L=c[0]+this.data.parentRect[2]-this.data.parentRect[0],q=c[1];return this.container.style.transformOrigin=`${-L}px ${-q}px`,this.container.style.left=`${L}px`,this.container.style.top=`${q}px`,this.container.appendChild(f.render()),this.container}}class n{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.titleObj=e.titleObj,this.modificationDate=e.modificationDate,this.contentsObj=e.contentsObj,this.richText=e.richText,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){const s=document.createElement("div");s.className="popupWrapper",this.hideElement=this.hideWrapper?s:this.container,this.hideElement.hidden=!0;const l=document.createElement("div");l.className="popup";const f=this.color;f&&(l.style.backgroundColor=i.Util.makeHexColor(0|.7*(255-f[0])+f[0],0|.7*(255-f[1])+f[1],0|.7*(255-f[2])+f[2]));const p=document.createElement("h1");p.dir=this.titleObj.dir,p.textContent=this.titleObj.str,l.appendChild(p);const c=O.PDFDateString.toDateObject(this.modificationDate);if(c){const L=document.createElement("span");L.className="popupDate",L.textContent="{{date}}, {{time}}",L.dataset.l10nId="annotation_date_string",L.dataset.l10nArgs=JSON.stringify({date:c.toLocaleDateString(),time:c.toLocaleTimeString()}),l.appendChild(L)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const L=this._formatContents(this.contentsObj);l.appendChild(L)}else E.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:l}),l.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const L of this.trigger)L.addEventListener("click",this._toggle.bind(this)),L.addEventListener("mouseover",this._show.bind(this,!1)),L.addEventListener("mouseout",this._hide.bind(this,!1));return l.addEventListener("click",this._hide.bind(this,!0)),s.appendChild(l),s}_formatContents({str:e,dir:s}){const l=document.createElement("p");l.className="popupContent",l.dir=s;const f=e.split(/(?:\r\n?|\n)/);for(let p=0,c=f.length;p<c;++p)l.appendChild(document.createTextNode(f[p])),p<c-1&&l.appendChild(document.createElement("br"));return l}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(e=!0){e&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class h extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class S extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const e=this.data,{width:s,height:l}=N(e.rect),f=this.svgFactory.create(s,l),p=this.svgFactory.createElement("svg:line");return p.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),p.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),p.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),p.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),p.setAttribute("stroke-width",e.borderStyle.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),f.appendChild(p),this.container.append(f),this._createPopup(p,e),this.container}}class u extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const e=this.data,{width:s,height:l}=N(e.rect),f=this.svgFactory.create(s,l),p=e.borderStyle.width,c=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",p/2),c.setAttribute("y",p/2),c.setAttribute("width",s-p),c.setAttribute("height",l-p),c.setAttribute("stroke-width",p||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),f.appendChild(c),this.container.append(f),this._createPopup(c,e),this.container}}class m extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const e=this.data,{width:s,height:l}=N(e.rect),f=this.svgFactory.create(s,l),p=e.borderStyle.width,c=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",s/2),c.setAttribute("cy",l/2),c.setAttribute("rx",s/2-p/2),c.setAttribute("ry",l/2-p/2),c.setAttribute("stroke-width",p||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),f.appendChild(c),this.container.append(f),this._createPopup(c,e),this.container}}class g extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:s,height:l}=N(e.rect),f=this.svgFactory.create(s,l);let p=[];for(const L of e.vertices)p.push(L.x-e.rect[0]+","+(e.rect[3]-L.y));p=p.join(" ");const c=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",p),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),f.appendChild(c),this.container.append(f),this._createPopup(c,e),this.container}}class d extends g{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class R extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class k extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:s,height:l}=N(e.rect),f=this.svgFactory.create(s,l);for(const p of e.inkLists){let c=[];for(const q of p)c.push(`${q.x-e.rect[0]},${e.rect[3]-q.y}`);c=c.join(" ");const L=this.svgFactory.createElement(this.svgElementName);L.setAttribute("points",c),L.setAttribute("stroke-width",e.borderStyle.width||1),L.setAttribute("stroke","transparent"),L.setAttribute("fill","transparent"),this._createPopup(L,e),f.appendChild(L)}return this.container.append(f),this.container}}class j extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class $ extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Q extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class K extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class re extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class fe extends V{constructor(e){super(e,{isRenderable:!0});const{filename:s,content:l}=this.data.file;this.filename=(0,O.getFilenameFromUrl)(s),this.content=l,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:s,content:l})}render(){this.container.className="fileAttachmentAnnotation";const e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(e,this.data),this.container.appendChild(e),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class ue{static render(e){const s=[],l=[];for(const p of e.annotations){if(!p)continue;const{width:c,height:L}=N(p.rect);if(!(c<=0||L<=0)){if(p.annotationType===i.AnnotationType.POPUP){l.push(p);continue}s.push(p)}}l.length&&s.push(...l);const f=e.div;for(const p of s){const c=W.create({data:p,layer:f,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new O.DOMSVGFactory,annotationStorage:e.annotationStorage||new w.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,mouseState:e.mouseState||{isDown:!1}});if(c.isRenderable){const L=c.render();if(p.hidden&&(L.style.visibility="hidden"),Array.isArray(L))for(const q of L)f.appendChild(q);else c instanceof t?f.prepend(L):f.appendChild(L)}}_classStaticPrivateMethodGet(this,ue,F).call(this,f,e.annotationCanvasMap)}static update(e){const{page:s,viewport:l,annotations:f,annotationCanvasMap:p,div:c}=e,L=l.transform,q=`matrix(${L.join(",")})`;let B,Y;for(const X of f){const te=c.querySelectorAll(`[data-annotation-id="${X.id}"]`);if(te)for(const ie of te)if(X.hasOwnCanvas){const pe=i.Util.normalizeRect([X.rect[0],s.view[3]-X.rect[1]+s.view[1],X.rect[2],s.view[3]-X.rect[3]+s.view[1]]);if(!Y){B=Math.abs(L[0]||L[1]);const ye=L.slice();for(let he=0;he<4;he++)ye[he]=Math.sign(ye[he]);Y=`matrix(${ye.join(",")})`}const Ae=pe[0]*B,Ce=pe[1]*B;ie.style.left=`${Ae}px`,ie.style.top=`${Ce}px`,ie.style.transformOrigin=`${-Ae}px ${-Ce}px`,ie.style.transform=Y}else ie.style.transform=q}_classStaticPrivateMethodGet(this,ue,F).call(this,c,p),c.hidden=!1}}function F(a,e){if(e){for(const[s,l]of e){const f=a.querySelector(`[data-annotation-id="${s}"]`);if(!f)continue;const{firstChild:p}=f;"CANVAS"===p.nodeName?f.replaceChild(l,p):f.insertBefore(l,p)}e.clear()}}o.AnnotationLayer=ue},(G,o)=>{function P(O){return Math.floor(255*Math.max(0,Math.min(1,O))).toString(16).padStart(2,"0")}Object.defineProperty(o,"__esModule",{value:!0}),o.ColorConverters=void 0,o.ColorConverters=class i{static CMYK_G([w,r,E,T]){return["G",1-Math.min(1,.3*w+.59*E+.11*r+T)]}static G_CMYK([w]){return["CMYK",0,0,0,1-w]}static G_RGB([w]){return["RGB",w,w,w]}static G_HTML([w]){const r=P(w);return`#${r}${r}${r}`}static RGB_G([w,r,E]){return["G",.3*w+.59*r+.11*E]}static RGB_HTML([w,r,E]){return`#${P(w)}${P(r)}${P(E)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([w,r,E,T]){return["RGB",1-Math.min(1,w+T),1-Math.min(1,E+T),1-Math.min(1,r+T)]}static CMYK_HTML(w){return this.RGB_HTML(this.CMYK_RGB(w))}static RGB_CMYK([w,r,E]){const T=1-w,y=1-r,N=1-E;return["CMYK",T,y,N,Math.min(T,y,N)]}}},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaLayer=void 0;var i=P(18);o.XfaLayer=class O{static setupStorage(r,E,T,y,N){const W=y.getValue(E,{value:null});switch(T.name){case"textarea":if(null!==W.value&&(r.textContent=W.value),"print"===N)break;r.addEventListener("input",V=>{y.setValue(E,{value:V.target.value})});break;case"input":if("radio"===T.attributes.type||"checkbox"===T.attributes.type){if(W.value===T.attributes.xfaOn?r.setAttribute("checked",!0):W.value===T.attributes.xfaOff&&r.removeAttribute("checked"),"print"===N)break;r.addEventListener("change",V=>{y.setValue(E,{value:V.target.getAttribute(V.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==W.value&&r.setAttribute("value",W.value),"print"===N)break;r.addEventListener("input",V=>{y.setValue(E,{value:V.target.value})})}break;case"select":if(null!==W.value)for(const V of T.children)V.attributes.value===W.value&&(V.attributes.selected=!0);r.addEventListener("input",V=>{const D=V.target.options;y.setValue(E,{value:-1===D.selectedIndex?"":D[D.selectedIndex].value})})}}static setAttributes({html:r,element:E,storage:T=null,intent:y,linkService:N}){const{attributes:W}=E,V=r instanceof HTMLAnchorElement;"radio"===W.type&&(W.name=`${W.name}-${y}`);for(const[D,H]of Object.entries(W))if(null!=H&&"dataId"!==D)if("style"!==D)if("textContent"===D)r.textContent=H;else if("class"===D)H.length&&r.setAttribute(D,H.join(" "));else{if(V&&("href"===D||"newWindow"===D))continue;r.setAttribute(D,H)}else Object.assign(r.style,H);V&&N.addLinkAttributes(r,W.href,W.newWindow),T&&W.dataId&&this.setupStorage(r,W.dataId,E,T)}static render(r){const E=r.annotationStorage,T=r.linkService,y=r.xfaHtml,N=r.intent||"display",W=document.createElement(y.name);y.attributes&&this.setAttributes({html:W,element:y,intent:N,linkService:T});const V=[[y,-1,W]],D=r.div;if(D.appendChild(W),r.viewport){const _=`matrix(${r.viewport.transform.join(",")})`;D.style.transform=_}"richText"!==N&&D.setAttribute("class","xfaLayer xfaFont");const H=[];for(;V.length>0;){const[_,x,b]=V[V.length-1];if(x+1===_.children.length){V.pop();continue}const C=_.children[++V[V.length-1][1]];if(null===C)continue;const{name:A}=C;if("#text"===A){const t=document.createTextNode(C.value);H.push(t),b.appendChild(t);continue}let v;if(v=C?.attributes?.xmlns?document.createElementNS(C.attributes.xmlns,A):document.createElement(A),b.appendChild(v),C.attributes&&this.setAttributes({html:v,element:C,storage:E,intent:N,linkService:T}),C.children&&C.children.length>0)V.push([C,-1,v]);else if(C.value){const t=document.createTextNode(C.value);i.XfaText.shouldBuildText(A)&&H.push(t),v.appendChild(t)}}for(const _ of D.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:H}}static update(r){const E=`matrix(${r.viewport.transform.join(",")})`;r.div.style.transform=E,r.div.hidden=!1}}},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.renderTextLayer=function b(C){const A=new x({textContent:C.textContent,textContentStream:C.textContentStream,container:C.container,viewport:C.viewport,textDivs:C.textDivs,textContentItemsStr:C.textContentItemsStr,enhanceTextSelection:C.enhanceTextSelection});return A._render(C.timeout),A};var i=P(1);const O=1e5,w=30,r=.8,E=new Map,T=/^\s+$/g;function N(C,A,v,t){const n=document.createElement("span"),h=C._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==A.str,hasEOL:A.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==A.str,hasEOL:A.hasEOL};C._textDivs.push(n);const S=i.Util.transform(C._viewport.transform,A.transform);let u=Math.atan2(S[1],S[0]);const m=v[A.fontName];m.vertical&&(u+=Math.PI/2);const g=Math.hypot(S[2],S[3]),d=g*function y(C,A){const v=E.get(C);if(v)return v;A.save(),A.font=`${w}px ${C}`;const t=A.measureText("");let n=t.fontBoundingBoxAscent,h=Math.abs(t.fontBoundingBoxDescent);if(n){A.restore();const u=n/(n+h);return E.set(C,u),u}A.strokeStyle="red",A.clearRect(0,0,w,w),A.strokeText("g",0,0);let S=A.getImageData(0,0,w,w).data;h=0;for(let u=S.length-1-3;u>=0;u-=4)if(S[u]>0){h=Math.ceil(u/4/w);break}A.clearRect(0,0,w,w),A.strokeText("A",0,w),S=A.getImageData(0,0,w,w).data,n=0;for(let u=0,m=S.length;u<m;u+=4)if(S[u]>0){n=w-Math.floor(u/4/w);break}if(A.restore(),n){const u=n/(n+h);return E.set(C,u),u}return E.set(C,r),r}(m.fontFamily,t);let R,k;0===u?(R=S[4],k=S[5]-d):(R=S[4]+d*Math.sin(u),k=S[5]-d*Math.cos(u)),n.style.left=`${R}px`,n.style.top=`${k}px`,n.style.fontSize=`${g}px`,n.style.fontFamily=m.fontFamily,n.setAttribute("role","presentation"),n.textContent=A.str,n.dir=A.dir,C._fontInspectorEnabled&&(n.dataset.fontName=A.fontName),0!==u&&(h.angle=u*(180/Math.PI));let j=!1;if(A.str.length>1||C._enhanceTextSelection&&T.test(A.str))j=!0;else if(" "!==A.str&&A.transform[0]!==A.transform[3]){const $=Math.abs(A.transform[0]),Q=Math.abs(A.transform[3]);$!==Q&&Math.max($,Q)/Math.min($,Q)>1.5&&(j=!0)}if(j&&(h.canvasWidth=m.vertical?A.height*C._viewport.scale:A.width*C._viewport.scale),C._textDivProperties.set(n,h),C._textContentStream&&C._layoutText(n),C._enhanceTextSelection&&h.hasText){let $=1,Q=0;0!==u&&($=Math.cos(u),Q=Math.sin(u));const K=(m.vertical?A.height:A.width)*C._viewport.scale,re=g;let fe,ue;0!==u?(fe=[$,Q,-Q,$,R,k],ue=i.Util.getAxialAlignedBoundingBox([0,0,K,re],fe)):ue=[R,k,R+K,k+re],C._bounds.push({left:ue[0],top:ue[1],right:ue[2],bottom:ue[3],div:n,size:[K,re],m:fe})}}function W(C){if(C._canceled)return;const A=C._textDivs,v=C._capability,t=A.length;if(t>O)return C._renderingDone=!0,void v.resolve();if(!C._textContentStream)for(let n=0;n<t;n++)C._layoutText(A[n]);C._renderingDone=!0,v.resolve()}function V(C,A,v){let t=0;for(let n=0;n<v;n++){const h=C[A++];h>0&&(t=t?Math.min(h,t):h)}return t}function _(C,A){A.sort(function(n,h){return n.x1-h.x1||n.index-h.index});const t=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const n of A){let h=0;for(;h<t.length&&t[h].end<=n.y1;)h++;let S=t.length-1;for(;S>=0&&t[S].start>=n.y2;)S--;let u,m,g,d,R=-1/0;for(g=h;g<=S;g++){let $;u=t[g],m=u.boundary,$=m.x2>n.x1?m.index>n.index?m.x1New:n.x1:void 0===m.x2New?(m.x2+n.x1)/2:m.x2New,$>R&&(R=$)}for(n.x1New=R,g=h;g<=S;g++)u=t[g],m=u.boundary,void 0===m.x2New?m.x2>n.x1?m.index>n.index&&(m.x2New=m.x2):m.x2New=R:m.x2New>R&&(m.x2New=Math.max(R,m.x2));const k=[];let j=null;for(g=h;g<=S;g++){u=t[g],m=u.boundary;const $=m.x2>n.x2?m:n;j===$?k[k.length-1].end=u.end:(k.push({start:u.start,end:u.end,boundary:$}),j=$)}for(t[h].start<n.y1&&(k[0].start=n.y1,k.unshift({start:t[h].start,end:n.y1,boundary:t[h].boundary})),n.y2<t[S].end&&(k[k.length-1].end=n.y2,k.push({start:n.y2,end:t[S].end,boundary:t[S].boundary})),g=h;g<=S;g++){if(u=t[g],m=u.boundary,void 0!==m.x2New)continue;let $=!1;for(d=h-1;!$&&d>=0&&t[d].start>=m.y1;d--)$=t[d].boundary===m;for(d=S+1;!$&&d<t.length&&t[d].end<=m.y2;d++)$=t[d].boundary===m;for(d=0;!$&&d<k.length;d++)$=k[d].boundary===m;$||(m.x2New=R)}Array.prototype.splice.apply(t,[h,S-h+1].concat(k))}for(const n of t){const h=n.boundary;void 0===h.x2New&&(h.x2New=Math.max(C,h.x2))}}class x{constructor({textContent:A,textContentStream:v,container:t,viewport:n,textDivs:h,textContentItemsStr:S,enhanceTextSelection:u}){this._textContent=A,this._textContentStream=v,this._container=t,this._document=t.ownerDocument,this._viewport=n,this._textDivs=h||[],this._textContentItemsStr=S||[],this._enhanceTextSelection=!!u,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,i.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(A,v){for(let t=0,n=A.length;t<n;t++)if(void 0!==A[t].str)this._textContentItemsStr.push(A[t].str),N(this,A[t],v,this._layoutTextCtx);else if("beginMarkedContentProps"===A[t].type||"beginMarkedContent"===A[t].type){const h=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==A[t].id&&this._container.setAttribute("id",`${A[t].id}`),h.appendChild(this._container)}else"endMarkedContent"===A[t].type&&(this._container=this._container.parentNode)}_layoutText(A){const v=this._textDivProperties.get(A);let t="";if(0!==v.canvasWidth&&v.hasText){const{fontSize:n,fontFamily:h}=A.style;(n!==this._layoutTextLastFontSize||h!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${n} ${h}`,this._layoutTextLastFontSize=n,this._layoutTextLastFontFamily=h);const{width:S}=this._layoutTextCtx.measureText(A.textContent);if(S>0){const u=v.canvasWidth/S;this._enhanceTextSelection&&(v.scale=u),t=`scaleX(${u})`}}if(0!==v.angle&&(t=`rotate(${v.angle}deg) ${t}`),t.length>0&&(this._enhanceTextSelection&&(v.originalTransform=t),A.style.transform=t),v.hasText&&this._container.appendChild(A),v.hasEOL){const n=document.createElement("br");n.setAttribute("role","presentation"),this._container.appendChild(n)}}_render(A=0){const v=(0,i.createPromiseCapability)();let t=Object.create(null);const n=this._document.createElement("canvas");if(n.height=n.width=w,this._layoutTextCtx=n.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),v.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const h=()=>{this._reader.read().then(({value:S,done:u})=>{u?v.resolve():(Object.assign(t,S.styles),this._processItems(S.items,t),h())},v.reject)};this._reader=this._textContentStream.getReader(),h()}}v.promise.then(()=>{t=null,A?this._renderTimer=setTimeout(()=>{W(this),this._renderTimer=null},A):W(this)},this._capability.reject)}expandTextDivs(A=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function D(C){const A=C._bounds,v=C._viewport,t=function H(C,A,v){const t=v.map(function(h,S){return{x1:h.left,y1:h.top,x2:h.right,y2:h.bottom,index:S,x1New:void 0,x2New:void 0}});_(C,t);const n=new Array(v.length);for(const h of t)n[h.index]={left:h.x1New,top:0,right:h.x2New,bottom:0};v.map(function(h,S){const u=n[S],m=t[S];m.x1=h.top,m.y1=C-u.right,m.x2=h.bottom,m.y2=C-u.left,m.index=S,m.x1New=void 0,m.x2New=void 0}),_(A,t);for(const h of t){const S=h.index;n[S].top=h.x1New,n[S].bottom=h.x2New}return n}(v.width,v.height,A);for(let n=0;n<t.length;n++){const h=A[n].div,S=C._textDivProperties.get(h);if(0===S.angle){S.paddingLeft=A[n].left-t[n].left,S.paddingTop=A[n].top-t[n].top,S.paddingRight=t[n].right-A[n].right,S.paddingBottom=t[n].bottom-A[n].bottom,C._textDivProperties.set(h,S);continue}const u=t[n],m=A[n],g=m.m,d=g[0],R=g[1],k=[[0,0],[0,m.size[1]],[m.size[0],0],m.size],j=new Float64Array(64);for(let Q=0,K=k.length;Q<K;Q++){const re=i.Util.applyTransform(k[Q],g);j[Q+0]=d&&(u.left-re[0])/d,j[Q+4]=R&&(u.top-re[1])/R,j[Q+8]=d&&(u.right-re[0])/d,j[Q+12]=R&&(u.bottom-re[1])/R,j[Q+16]=R&&(u.left-re[0])/-R,j[Q+20]=d&&(u.top-re[1])/d,j[Q+24]=R&&(u.right-re[0])/-R,j[Q+28]=d&&(u.bottom-re[1])/d,j[Q+32]=d&&(u.left-re[0])/-d,j[Q+36]=R&&(u.top-re[1])/-R,j[Q+40]=d&&(u.right-re[0])/-d,j[Q+44]=R&&(u.bottom-re[1])/-R,j[Q+48]=R&&(u.left-re[0])/R,j[Q+52]=d&&(u.top-re[1])/-d,j[Q+56]=R&&(u.right-re[0])/R,j[Q+60]=d&&(u.bottom-re[1])/-d}const $=1+Math.min(Math.abs(d),Math.abs(R));S.paddingLeft=V(j,32,16)/$,S.paddingTop=V(j,48,16)/$,S.paddingRight=V(j,0,16)/$,S.paddingBottom=V(j,16,16)/$,C._textDivProperties.set(h,S)}}(this),this._bounds=null);const v=[],t=[];for(let n=0,h=this._textDivs.length;n<h;n++){const S=this._textDivs[n],u=this._textDivProperties.get(S);u.hasText&&(A?(v.length=0,t.length=0,u.originalTransform&&v.push(u.originalTransform),u.paddingTop>0?(t.push(`${u.paddingTop}px`),v.push(`translateY(${-u.paddingTop}px)`)):t.push(0),t.push(u.paddingRight>0?u.paddingRight/u.scale+"px":0),t.push(u.paddingBottom>0?`${u.paddingBottom}px`:0),u.paddingLeft>0?(t.push(u.paddingLeft/u.scale+"px"),v.push(`translateX(${-u.paddingLeft/u.scale}px)`)):t.push(0),S.style.padding=t.join(" "),v.length&&(S.style.transform=v.join(" "))):(S.style.padding=null,S.style.transform=u.originalTransform))}}}},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SVGGraphics=void 0;var i=P(1),O=P(5),w=P(3);let r=class{constructor(){(0,i.unreachable)("Not implemented: SVGGraphics")}};o.SVGGraphics=r;{let _=function(t){let n=[];const h=[];for(const S of t)"save"!==S.fn?"restore"===S.fn?n=h.pop():n.push(S):(n.push({fnId:92,fn:"group",items:[]}),h.push(n),n=n[n.length-1].items);return n},x=function(t){if(Number.isInteger(t))return t.toString();const n=t.toFixed(10);let h=n.length-1;if("0"!==n[h])return n;do{h--}while("0"===n[h]);return n.substring(0,"."===n[h]?h:h+1)},b=function(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${x(t[0])} ${x(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){const n=180*Math.acos(t[0])/Math.PI;return`rotate(${x(n)})`}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${x(t[4])} ${x(t[5])})`;return`matrix(${x(t[0])} ${x(t[1])} ${x(t[2])} ${x(t[3])} ${x(t[4])} ${x(t[5])})`};const E={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},T="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/1999/xlink",N=["butt","round","square"],W=["miter","round","bevel"],V=function(t,n="",h=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!h)return URL.createObjectURL(new Blob([t],{type:n}));const S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let u=`data:${n};base64,`;for(let m=0,g=t.length;m<g;m+=3){const d=255&t[m],R=255&t[m+1],k=255&t[m+2];u+=S[d>>2]+S[(3&d)<<4|R>>4]+S[m+1<g?(15&R)<<2|k>>6:64]+S[m+2<g?63&k:64]}return u},D=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),n=12,h=new Int32Array(256);for(let k=0;k<256;k++){let j=k;for(let $=0;$<8;$++)j=1&j?3988292384^j>>1&2147483647:j>>1&2147483647;h[k]=j}function u(k,j,$,Q){let K=Q;const re=j.length;$[K]=re>>24&255,$[K+1]=re>>16&255,$[K+2]=re>>8&255,$[K+3]=255&re,K+=4,$[K]=255&k.charCodeAt(0),$[K+1]=255&k.charCodeAt(1),$[K+2]=255&k.charCodeAt(2),$[K+3]=255&k.charCodeAt(3),K+=4,$.set(j,K),K+=j.length;const fe=function S(k,j,$){let Q=-1;for(let K=j;K<$;K++)Q=Q>>>8^h[255&(Q^k[K])];return-1^Q}($,Q+4,K);$[K]=fe>>24&255,$[K+1]=fe>>16&255,$[K+2]=fe>>8&255,$[K+3]=255&fe}function d(k){let j=k.length;const $=65535,Q=Math.ceil(j/$),K=new Uint8Array(2+j+5*Q+4);let re=0;K[re++]=120,K[re++]=156;let fe=0;for(;j>$;)K[re++]=0,K[re++]=255,K[re++]=255,K[re++]=0,K[re++]=0,K.set(k.subarray(fe,fe+$),re),re+=$,fe+=$,j-=$;K[re++]=1,K[re++]=255&j,K[re++]=j>>8&255,K[re++]=255&~j,K[re++]=(65535&~j)>>8&255,K.set(k.subarray(fe),re),re+=k.length-fe;const ue=function m(k,j,$){let Q=1,K=0;for(let re=j;re<$;++re)Q=(Q+(255&k[re]))%65521,K=(K+Q)%65521;return K<<16|Q}(k,0,k.length);return K[re++]=ue>>24&255,K[re++]=ue>>16&255,K[re++]=ue>>8&255,K[re++]=255&ue,K}return function(j,$,Q){return function R(k,j,$,Q){const K=k.width,re=k.height;let fe,ue,F;const a=k.data;switch(j){case i.ImageKind.GRAYSCALE_1BPP:ue=0,fe=1,F=K+7>>3;break;case i.ImageKind.RGB_24BPP:ue=2,fe=8,F=3*K;break;case i.ImageKind.RGBA_32BPP:ue=6,fe=8,F=4*K;break;default:throw new Error("invalid format")}const e=new Uint8Array((1+F)*re);let s=0,l=0;for(let B=0;B<re;++B)e[s++]=0,e.set(a.subarray(l,l+F),s),l+=F,s+=F;if(j===i.ImageKind.GRAYSCALE_1BPP&&Q){s=0;for(let B=0;B<re;B++){s++;for(let Y=0;Y<F;Y++)e[s++]^=255}}const f=new Uint8Array([K>>24&255,K>>16&255,K>>8&255,255&K,re>>24&255,re>>16&255,re>>8&255,255&re,fe,ue,0,0,0]),p=function g(k){if(!w.isNodeJS)return d(k);try{let j;j=parseInt(process.versions.node)>=8?k:Buffer.from(k);const $=__webpack_require__(2258).deflateSync(j,{level:9});return $ instanceof Uint8Array?$:new Uint8Array($)}catch(j){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+j)}return d(k)}(e),L=new Uint8Array(t.length+3*n+f.length+p.length);let q=0;return L.set(t,q),q+=t.length,u("IHDR",f,L,q),q+=n+f.length,u("IDATA",p,L,q),q+=n+p.length,u("IEND",new Uint8Array(0),L,q),V(L,"image/png",$)}(j,void 0===j.kind?i.ImageKind.GRAYSCALE_1BPP:j.kind,$,Q)}}();class H{constructor(){this.fontSizeScale=1,this.fontWeight=E.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=E.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(n,h){this.x=n,this.y=h}}let C=0,A=0,v=0;o.SVGGraphics=r=class{constructor(t,n,h=!1){this.svgFactory=new O.DOMSVGFactory,this.current=new H,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=n,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!h,this._operatorIdMapping=[];for(const S in i.OPS)this._operatorIdMapping[i.OPS[S]]=S}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const n=t.fnArray,h=t.argsArray;for(let S=0,u=n.length;S<u;S++)if(n[S]===i.OPS.dependency)for(const m of h[S]){const g=m.startsWith("g_")?this.commonObjs:this.objs,d=new Promise(R=>{g.get(m,R)});this.current.dependencies.push(d)}return Promise.all(this.current.dependencies)}transform(t,n,h,S,u,m){this.transformMatrix=i.Util.transform(this.transformMatrix,[t,n,h,S,u,m]),this.tgrp=null}getSVG(t,n){this.viewport=n;const h=this._initialize(n);return this.loadDependencies(t).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),h))}convertOpList(t){const n=this._operatorIdMapping,h=t.argsArray,S=t.fnArray,u=[];for(let m=0,g=S.length;m<g;m++){const d=S[m];u.push({fnId:d,fn:n[d],args:h[m]})}return _(u)}executeOpTree(t){for(const n of t){const h=n.fn,u=n.args;switch(0|n.fnId){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(u);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(u[0],u[1]);break;case i.OPS.setFont:this.setFont(u);break;case i.OPS.showText:case i.OPS.showSpacedText:this.showText(u[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(u[0],u[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(u[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(u[0]);break;case i.OPS.setHScale:this.setHScale(u[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(u[0],u[1],u[2],u[3],u[4],u[5]);break;case i.OPS.setTextRise:this.setTextRise(u[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(u[0]);break;case i.OPS.setLineWidth:this.setLineWidth(u[0]);break;case i.OPS.setLineJoin:this.setLineJoin(u[0]);break;case i.OPS.setLineCap:this.setLineCap(u[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(u[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(u[0],u[1],u[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(u[0],u[1],u[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(u);break;case i.OPS.setFillColorN:this.setFillColorN(u);break;case i.OPS.shadingFill:this.shadingFill(u[0]);break;case i.OPS.setDash:this.setDash(u[0],u[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(u[0]);break;case i.OPS.setFlatness:this.setFlatness(u[0]);break;case i.OPS.setGState:this.setGState(u[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(u[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(u[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(u[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(u[0],u[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(u[0],u[1],u[2],u[3],u[4],u[5]);break;case i.OPS.constructPath:this.constructPath(u[0],u[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(n.items);break;default:(0,i.warn)(`Unimplemented operator ${h}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,n,h,S,u,m){const g=this.current;g.textMatrix=g.lineMatrix=[t,n,h,S,u,m],g.textMatrixScale=Math.hypot(t,n),g.x=g.lineX=0,g.y=g.lineY=0,g.xcoords=[],g.ycoords=[],g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${x(g.fontSize)}px`),g.tspan.setAttributeNS(null,"y",x(-g.y)),g.txtElement=this.svgFactory.createElement("svg:text"),g.txtElement.appendChild(g.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=i.IDENTITY_MATRIX,t.lineMatrix=i.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,n){const h=this.current;h.x=h.lineX+=t,h.y=h.lineY+=n,h.xcoords=[],h.ycoords=[],h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size",`${x(h.fontSize)}px`),h.tspan.setAttributeNS(null,"y",x(-h.y))}showText(t){const n=this.current,h=n.font,S=n.fontSize;if(0===S)return;const u=n.fontSizeScale,m=n.charSpacing,g=n.wordSpacing,d=n.fontDirection,R=n.textHScale*d,k=h.vertical,j=k?1:-1,$=h.defaultVMetrics,Q=S*n.fontMatrix[0];let K=0;for(const ue of t){if(null===ue){K+=d*g;continue}if("number"==typeof ue){K+=j*ue*S/1e3;continue}const F=(ue.isSpace?g:0)+m,a=ue.fontChar;let e,s,f,l=ue.width;if(k){let p;const c=ue.vmetric||$;p=ue.vmetric?c[1]:.5*l,p=-p*Q,l=c?-c[0]:l,e=p/u,s=(K+c[2]*Q)/u}else e=K/u,s=0;(ue.isInFont||h.missingFile)&&(n.xcoords.push(n.x+e),k&&n.ycoords.push(-n.y+s),n.tspan.textContent+=a),f=k?l*Q-F*d:l*Q+F*d,K+=f}n.tspan.setAttributeNS(null,"x",n.xcoords.map(x).join(" ")),n.tspan.setAttributeNS(null,"y",k?n.ycoords.map(x).join(" "):x(-n.y)),k?n.y-=K:n.x+=K*R,n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${x(n.fontSize)}px`),n.fontStyle!==E.fontStyle&&n.tspan.setAttributeNS(null,"font-style",n.fontStyle),n.fontWeight!==E.fontWeight&&n.tspan.setAttributeNS(null,"font-weight",n.fontWeight);const re=n.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;re===i.TextRenderingMode.FILL||re===i.TextRenderingMode.FILL_STROKE?(n.fillColor!==E.fillColor&&n.tspan.setAttributeNS(null,"fill",n.fillColor),n.fillAlpha<1&&n.tspan.setAttributeNS(null,"fill-opacity",n.fillAlpha)):n.tspan.setAttributeNS(null,"fill",n.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(re===i.TextRenderingMode.STROKE||re===i.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(n.tspan,1/(n.textMatrixScale||1));let fe=n.textMatrix;0!==n.textRise&&(fe=fe.slice(),fe[5]+=n.textRise),n.txtElement.setAttributeNS(null,"transform",`${b(fe)} scale(${x(R)}, -1)`),n.txtElement.setAttributeNS(T,"xml:space","preserve"),n.txtElement.appendChild(n.tspan),n.txtgrp.appendChild(n.txtElement),this._ensureTransformGroup().appendChild(n.txtElement)}setLeadingMoveText(t,n){this.setLeading(-n),this.moveText(t,n)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const n=V(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${n}); }\n`}setFont(t){const n=this.current,h=this.commonObjs.get(t[0]);let S=t[1];n.font=h,this.embedFonts&&!h.missingFile&&!this.embeddedFonts[h.loadedName]&&(this.addFontStyle(h),this.embeddedFonts[h.loadedName]=h),n.fontMatrix=h.fontMatrix||i.FONT_IDENTITY_MATRIX;let u="normal";h.black?u="900":h.bold&&(u="bold");const m=h.italic?"italic":"normal";S<0?(S=-S,n.fontDirection=-1):n.fontDirection=1,n.fontSize=S,n.fontFamily=h.loadedName,n.fontWeight=u,n.fontStyle=m,n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"y",x(-n.y)),n.xcoords=[],n.ycoords=[]}endText(){const t=this.current;t.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&t.txtElement?.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=N[t]}setLineJoin(t){this.current.lineJoin=W[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,n,h){this.current.strokeColor=i.Util.makeHexColor(t,n,h)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,n,h){this.current.fillColor=i.Util.makeHexColor(t,n,h),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const n=this.viewport.width,h=this.viewport.height,S=i.Util.inverseTransform(this.transformMatrix),u=i.Util.applyTransform([0,0],S),m=i.Util.applyTransform([0,h],S),g=i.Util.applyTransform([n,0],S),d=i.Util.applyTransform([n,h],S),R=Math.min(u[0],m[0],g[0],d[0]),k=Math.min(u[1],m[1],g[1],d[1]),j=Math.max(u[0],m[0],g[0],d[0]),$=Math.max(u[1],m[1],g[1],d[1]),Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x",R),Q.setAttributeNS(null,"y",k),Q.setAttributeNS(null,"width",j-R),Q.setAttributeNS(null,"height",$-k),Q.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&Q.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(Q)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const n=t[1],h=t[2],S=t[3]||i.IDENTITY_MATRIX,[u,m,g,d]=t[4],R=t[5],k=t[6],j=t[7],$="shading"+v++,[Q,K,re,fe]=i.Util.normalizeRect([...i.Util.applyTransform([u,m],S),...i.Util.applyTransform([g,d],S)]),[ue,F]=i.Util.singularValueDecompose2dScale(S),a=R*ue,e=k*F,s=this.svgFactory.createElement("svg:pattern");s.setAttributeNS(null,"id",$),s.setAttributeNS(null,"patternUnits","userSpaceOnUse"),s.setAttributeNS(null,"width",a),s.setAttributeNS(null,"height",e),s.setAttributeNS(null,"x",`${Q}`),s.setAttributeNS(null,"y",`${K}`);const l=this.svg,f=this.transformMatrix,p=this.current.fillColor,c=this.current.strokeColor,L=this.svgFactory.create(re-Q,fe-K);if(this.svg=L,this.transformMatrix=S,2===j){const q=i.Util.makeHexColor(...n);this.current.fillColor=q,this.current.strokeColor=q}return this.executeOpTree(this.convertOpList(h)),this.svg=l,this.transformMatrix=f,this.current.fillColor=p,this.current.strokeColor=c,s.appendChild(L.childNodes[0]),this.defs.appendChild(s),`url(#${$})`}_makeShadingPattern(t){switch("string"==typeof t&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const n="shading"+v++,h=t[3];let S;switch(t[1]){case"axial":const u=t[4],m=t[5];S=this.svgFactory.createElement("svg:linearGradient"),S.setAttributeNS(null,"id",n),S.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),S.setAttributeNS(null,"x1",u[0]),S.setAttributeNS(null,"y1",u[1]),S.setAttributeNS(null,"x2",m[0]),S.setAttributeNS(null,"y2",m[1]);break;case"radial":const g=t[4],d=t[5],R=t[6],k=t[7];S=this.svgFactory.createElement("svg:radialGradient"),S.setAttributeNS(null,"id",n),S.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),S.setAttributeNS(null,"cx",d[0]),S.setAttributeNS(null,"cy",d[1]),S.setAttributeNS(null,"r",k),S.setAttributeNS(null,"fx",g[0]),S.setAttributeNS(null,"fy",g[1]),S.setAttributeNS(null,"fr",R);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const u of h){const m=this.svgFactory.createElement("svg:stop");m.setAttributeNS(null,"offset",u[0]),m.setAttributeNS(null,"stop-color",u[1]),S.appendChild(m)}return this.defs.appendChild(S),`url(#${n})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,n){this.current.dashArray=t,this.current.dashPhase=n}constructPath(t,n){const h=this.current;let S=h.x,u=h.y,m=[],g=0;for(const d of t)switch(0|d){case i.OPS.rectangle:S=n[g++],u=n[g++];const j=S+n[g++],$=u+n[g++];m.push("M",x(S),x(u),"L",x(j),x(u),"L",x(j),x($),"L",x(S),x($),"Z");break;case i.OPS.moveTo:S=n[g++],u=n[g++],m.push("M",x(S),x(u));break;case i.OPS.lineTo:S=n[g++],u=n[g++],m.push("L",x(S),x(u));break;case i.OPS.curveTo:S=n[g+4],u=n[g+5],m.push("C",x(n[g]),x(n[g+1]),x(n[g+2]),x(n[g+3]),x(S),x(u)),g+=6;break;case i.OPS.curveTo2:m.push("C",x(S),x(u),x(n[g]),x(n[g+1]),x(n[g+2]),x(n[g+3])),S=n[g+2],u=n[g+3],g+=4;break;case i.OPS.curveTo3:S=n[g+2],u=n[g+3],m.push("C",x(n[g]),x(n[g+1]),x(S),x(u),x(S),x(u)),g+=4;break;case i.OPS.closePath:m.push("Z")}m=m.join(" "),h.path&&t.length>0&&t[0]!==i.OPS.rectangle&&t[0]!==i.OPS.moveTo?m=h.path.getAttributeNS(null,"d")+m:(h.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(h.path)),h.path.setAttributeNS(null,"d",m),h.path.setAttributeNS(null,"fill","none"),h.element=h.path,h.setCurrentPoint(S,u)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element)return void(this.pendingClip=null);const n="clippath"+C++,h=this.svgFactory.createElement("svg:clipPath");h.setAttributeNS(null,"id",n),h.setAttributeNS(null,"transform",b(this.transformMatrix));const S=t.element.cloneNode(!0);if(S.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,h.appendChild(S),this.defs.appendChild(h),t.activeClipUrl){t.clipGroup=null;for(const u of this.extraStack)u.clipGroup=null;h.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${n})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const n=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",n)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[n,h]of t)switch(n){case"LW":this.setLineWidth(h);break;case"LC":this.setLineCap(h);break;case"LJ":this.setLineJoin(h);break;case"ML":this.setMiterLimit(h);break;case"D":this.setDash(h[0],h[1]);break;case"RI":this.setRenderingIntent(h);break;case"FL":this.setFlatness(h);break;case"Font":this.setFont(h);break;case"CA":this.setStrokeAlpha(h);break;case"ca":this.setFillAlpha(h);break;default:(0,i.warn)(`Unimplemented graphic state operator ${n}`)}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,n=1){const h=this.current;let S=h.dashArray;1!==n&&S.length>0&&(S=S.map(function(u){return n*u})),t.setAttributeNS(null,"stroke",h.strokeColor),t.setAttributeNS(null,"stroke-opacity",h.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",x(h.miterLimit)),t.setAttributeNS(null,"stroke-linecap",h.lineCap),t.setAttributeNS(null,"stroke-linejoin",h.lineJoin),t.setAttributeNS(null,"stroke-width",x(n*h.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",S.map(x).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",x(n*h.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(t)}paintImageXObject(t){const n=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);n?this.paintInlineImageXObject(n):(0,i.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,n){const h=t.width,S=t.height,u=D(t,this.forceDataSchema,!!n),m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y","0"),m.setAttributeNS(null,"width",x(h)),m.setAttributeNS(null,"height",x(S)),this.current.element=m,this.clip("nonzero");const g=this.svgFactory.createElement("svg:image");g.setAttributeNS(y,"xlink:href",u),g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y",x(-S)),g.setAttributeNS(null,"width",x(h)+"px"),g.setAttributeNS(null,"height",x(S)+"px"),g.setAttributeNS(null,"transform",`scale(${x(1/h)} ${x(-1/S)})`),n?n.appendChild(g):this._ensureTransformGroup().appendChild(g)}paintImageMaskXObject(t){const n=this.current,h=t.width,S=t.height,u=n.fillColor;n.maskId="mask"+A++;const m=this.svgFactory.createElement("svg:mask");m.setAttributeNS(null,"id",n.maskId);const g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y","0"),g.setAttributeNS(null,"width",x(h)),g.setAttributeNS(null,"height",x(S)),g.setAttributeNS(null,"fill",u),g.setAttributeNS(null,"mask",`url(#${n.maskId})`),this.defs.appendChild(m),this._ensureTransformGroup().appendChild(g),this.paintInlineImageXObject(t,m)}paintFormXObjectBegin(t,n){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),n){const h=n[2]-n[0],S=n[3]-n[1],u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x",n[0]),u.setAttributeNS(null,"y",n[1]),u.setAttributeNS(null,"width",x(h)),u.setAttributeNS(null,"height",x(S)),this.current.element=u,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const n=this.svgFactory.create(t.width,t.height),h=this.svgFactory.createElement("svg:defs");n.appendChild(h),this.defs=h;const S=this.svgFactory.createElement("svg:g");return S.setAttributeNS(null,"transform",b(t.transform)),n.appendChild(S),this.svg=S,n}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",b(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNodeStream=void 0;var i=P(1),O=P(26);const w=__webpack_require__(172),r=__webpack_require__(2001),E=__webpack_require__(3779),T=__webpack_require__(6558),y=/^file:\/\/\/[a-zA-Z]:\//;o.PDFNodeStream=class W{constructor(v){this.source=v,this.url=function N(A){const v=T.parse(A);return"file:"===v.protocol||v.host?v:/^[a-z]:[/\\]/i.test(A)?T.parse(`file:///${A}`):(v.host||(v.protocol="file:"),v)}(v.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&v.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new b(this):new _(this),this._fullRequestReader}getRangeReader(v,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new C(this,v,t):new x(this,v,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(v){this._fullRequestReader&&this._fullRequestReader.cancel(v);for(const t of this._rangeRequestReaders.slice(0))t.cancel(v)}};class V{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=v.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._headersCapability=(0,i.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var v=this;return _asyncToGenerator(function*(){if(yield v._readCapability.promise,v._done)return{value:void 0,done:!0};if(v._storedError)throw v._storedError;const t=v._readableStream.read();return null===t?(v._readCapability=(0,i.createPromiseCapability)(),v.read()):(v._loaded+=t.length,v.onProgress&&v.onProgress({loaded:v._loaded,total:v._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(v){this._readableStream?this._readableStream.destroy(v):this._error(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class D{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!v.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var v=this;return _asyncToGenerator(function*(){if(yield v._readCapability.promise,v._done)return{value:void 0,done:!0};if(v._storedError)throw v._storedError;const t=v._readableStream.read();return null===t?(v._readCapability=(0,i.createPromiseCapability)(),v.read()):(v._loaded+=t.length,v.onProgress&&v.onProgress({loaded:v._loaded}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(v){this._readableStream?this._readableStream.destroy(v):this._error(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function H(A,v){return{protocol:A.protocol,auth:A.auth,host:A.hostname,port:A.port,path:A.path,method:"GET",headers:v}}class _ extends V{constructor(v){super(v);const t=n=>{if(404===n.statusCode){const m=new i.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=m,void this._headersCapability.reject(m)}this._headersCapability.resolve(),this._setReadableStream(n);const h=m=>this._readableStream.headers[m.toLowerCase()],{allowRangeRequests:S,suggestedLength:u}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:h,isHttp:v.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=S,this._contentLength=u||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(h)};this._request=null,this._request="http:"===this._url.protocol?r.request(H(this._url,v.httpHeaders),t):E.request(H(this._url,v.httpHeaders),t),this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class x extends D{constructor(v,t,n){super(v),this._httpHeaders={};for(const S in v.httpHeaders){const u=v.httpHeaders[S];typeof u>"u"||(this._httpHeaders[S]=u)}this._httpHeaders.Range=`bytes=${t}-${n-1}`;const h=S=>{if(404!==S.statusCode)this._setReadableStream(S);else{const u=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=u}};this._request=null,this._request="http:"===this._url.protocol?r.request(H(this._url,this._httpHeaders),h):E.request(H(this._url,this._httpHeaders),h),this._request.on("error",S=>{this._storedError=S}),this._request.end()}}class b extends V{constructor(v){super(v);let t=decodeURIComponent(this._url.path);y.test(this._url.href)&&(t=t.replace(/^\//,"")),w.lstat(t,(n,h)=>{if(n)return"ENOENT"===n.code&&(n=new i.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=n,void this._headersCapability.reject(n);this._contentLength=h.size,this._setReadableStream(w.createReadStream(t)),this._headersCapability.resolve()})}}class C extends D{constructor(v,t,n){super(v);let h=decodeURIComponent(this._url.path);y.test(this._url.href)&&(h=h.replace(/^\//,"")),this._setReadableStream(w.createReadStream(h,{start:t,end:n-1}))}}},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createResponseStatusError=function T(N,W){return 404===N||0===N&&W.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+W+'".'):new i.UnexpectedResponseException(`Unexpected server response (${N}) while retrieving PDF "${W}".`,N)},o.extractFilenameFromHeader=function E(N){const W=N("Content-Disposition");if(W){let V=(0,O.getFilenameFromContentDispositionHeader)(W);if(V.includes("%"))try{V=decodeURIComponent(V)}catch{}if((0,w.isPdfFile)(V))return V}return null},o.validateRangeRequestCapabilities=function r({getResponseHeader:N,isHttp:W,rangeChunkSize:V,disableRange:D}){const H={allowRangeRequests:!1,suggestedLength:void 0},_=parseInt(N("Content-Length"),10);return!Number.isInteger(_)||(H.suggestedLength=_,_<=2*V)||D||!W||"bytes"!==N("Accept-Ranges")||"identity"!==(N("Content-Encoding")||"identity")||(H.allowRangeRequests=!0),H},o.validateResponseStatus=function y(N){return 200===N||206===N};var i=P(1),O=P(27),w=P(5)},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getFilenameFromContentDispositionHeader=function O(w){let r=!0,E=T("filename\\*","i").exec(w);if(E){E=E[1];let _=V(E);return _=unescape(_),_=D(_),_=H(_),N(_)}if(E=function W(_){const x=[];let b;const C=T("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(b=C.exec(_));){let[,v,t,n]=b;if(v=parseInt(v,10),v in x){if(0===v)break}else x[v]=[t,n]}const A=[];for(let v=0;v<x.length&&v in x;++v){let[t,n]=x[v];n=V(n),t&&(n=unescape(n),0===v&&(n=D(n))),A.push(n)}return A.join("")}(w),E)return N(H(E));if(E=T("filename","i").exec(w),E){E=E[1];let _=V(E);return _=H(_),N(_)}function T(_,x){return new RegExp("(?:^|;)\\s*"+_+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',x)}function y(_,x){if(_){if(!/^[\x00-\xFF]+$/.test(x))return x;try{const b=new TextDecoder(_,{fatal:!0}),C=(0,i.stringToBytes)(x);x=b.decode(C),r=!1}catch{}}return x}function N(_){return r&&/[\x80-\xff]/.test(_)&&(_=y("utf-8",_),r&&(_=y("iso-8859-1",_))),_}function V(_){if(_.startsWith('"')){const x=_.slice(1).split('\\"');for(let b=0;b<x.length;++b){const C=x[b].indexOf('"');-1!==C&&(x[b]=x[b].slice(0,C),x.length=b+1),x[b]=x[b].replace(/\\(.)/g,"$1")}_=x.join('"')}return _}function D(_){const x=_.indexOf("'");return-1===x?_:y(_.slice(0,x),_.slice(x+1).replace(/^[^']*'/,""))}function H(_){return!_.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(_)?_:_.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(x,b,C,A){if("q"===C||"Q"===C)return y(b,A=(A=A.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(v,t){return String.fromCharCode(parseInt(t,16))}));try{A=atob(A)}catch{}return y(b,A)})}return""};var i=P(1)},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNetworkStream=void 0;var i=P(1),O=P(26);class T{constructor(D,H={}){this.url=D,this.isHttp=/^https?:/i.test(D),this.httpHeaders=this.isHttp&&H.httpHeaders||Object.create(null),this.withCredentials=H.withCredentials||!1,this.getXhr=H.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(D,H,_){const x={begin:D,end:H};for(const b in _)x[b]=_[b];return this.request(x)}requestFull(D){return this.request(D)}request(D){const H=this.getXhr(),_=this.currXhrId++,x=this.pendingRequests[_]={xhr:H};H.open("GET",this.url),H.withCredentials=this.withCredentials;for(const b in this.httpHeaders){const C=this.httpHeaders[b];typeof C>"u"||H.setRequestHeader(b,C)}return this.isHttp&&"begin"in D&&"end"in D?(H.setRequestHeader("Range",`bytes=${D.begin}-${D.end-1}`),x.expectedStatus=206):x.expectedStatus=200,H.responseType="arraybuffer",D.onError&&(H.onerror=function(b){D.onError(H.status)}),H.onreadystatechange=this.onStateChange.bind(this,_),H.onprogress=this.onProgress.bind(this,_),x.onHeadersReceived=D.onHeadersReceived,x.onDone=D.onDone,x.onError=D.onError,x.onProgress=D.onProgress,H.send(null),_}onProgress(D,H){const _=this.pendingRequests[D];_&&_.onProgress?.(H)}onStateChange(D,H){const _=this.pendingRequests[D];if(!_)return;const x=_.xhr;if(x.readyState>=2&&_.onHeadersReceived&&(_.onHeadersReceived(),delete _.onHeadersReceived),4!==x.readyState||!(D in this.pendingRequests))return;if(delete this.pendingRequests[D],0===x.status&&this.isHttp)return void _.onError?.(x.status);const b=x.status||200;if((200!==b||206!==_.expectedStatus)&&b!==_.expectedStatus)return void _.onError?.(x.status);const A=function E(V){const D=V.response;return"string"!=typeof D?D:(0,i.stringToBytes)(D).buffer}(x);if(206===b){const v=x.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(v);_.onDone({begin:parseInt(t[1],10),chunk:A})}else A?_.onDone({begin:0,chunk:A}):_.onError?.(x.status)}getRequestXhr(D){return this.pendingRequests[D].xhr}isPendingRequest(D){return D in this.pendingRequests}abortRequest(D){const H=this.pendingRequests[D].xhr;delete this.pendingRequests[D],H.abort()}}o.PDFNetworkStream=class y{constructor(D){this._source=D,this._manager=new T(D.url,{httpHeaders:D.httpHeaders,withCredentials:D.withCredentials}),this._rangeChunkSize=D.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(D){const H=this._rangeRequestReaders.indexOf(D);H>=0&&this._rangeRequestReaders.splice(H,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new N(this._manager,this._source),this._fullRequestReader}getRangeReader(D,H){const _=new W(this._manager,D,H);return _.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(_),_}cancelAllRequests(D){this._fullRequestReader?.cancel(D);for(const H of this._rangeRequestReaders.slice(0))H.cancel(D)}};class N{constructor(D,H){this._manager=D;const _={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=H.url,this._fullRequestId=D.requestFull(_),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=H.disableRange||!1,this._contentLength=H.length,this._rangeChunkSize=H.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const D=this._fullRequestId,H=this._manager.getRequestXhr(D),_=C=>H.getResponseHeader(C),{allowRangeRequests:x,suggestedLength:b}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});x&&(this._isRangeSupported=!0),this._contentLength=b||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(_),this._isRangeSupported&&this._manager.abortRequest(D),this._headersReceivedCapability.resolve()}_onDone(D){if(D&&(this._requests.length>0?this._requests.shift().resolve({value:D.chunk,done:!1}):this._cachedChunks.push(D.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const H of this._requests)H.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(D){this._storedError=(0,O.createResponseStatusError)(D,this._url),this._headersReceivedCapability.reject(this._storedError);for(const H of this._requests)H.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(D){this.onProgress?.({loaded:D.loaded,total:D.lengthComputable?D.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var D=this;return _asyncToGenerator(function*(){if(D._storedError)throw D._storedError;if(D._cachedChunks.length>0)return{value:D._cachedChunks.shift(),done:!1};if(D._done)return{value:void 0,done:!0};const H=(0,i.createPromiseCapability)();return D._requests.push(H),H.promise})()}cancel(D){this._done=!0,this._headersReceivedCapability.reject(D);for(const H of this._requests)H.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class W{constructor(D,H,_){this._manager=D;const x={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=D.url,this._requestId=D.requestRange(H,_,x),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(D){const H=D.chunk;this._requests.length>0?this._requests.shift().resolve({value:H,done:!1}):this._queuedChunk=H,this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(D){this._storedError=(0,O.createResponseStatusError)(D,this._url);for(const H of this._requests)H.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(D){this.isStreamingSupported||this.onProgress?.({loaded:D.loaded})}get isStreamingSupported(){return!1}read(){var D=this;return _asyncToGenerator(function*(){if(D._storedError)throw D._storedError;if(null!==D._queuedChunk){const _=D._queuedChunk;return D._queuedChunk=null,{value:_,done:!1}}if(D._done)return{value:void 0,done:!0};const H=(0,i.createPromiseCapability)();return D._requests.push(H),H.promise})()}cancel(D){this._done=!0;for(const H of this._requests)H.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(G,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFFetchStream=void 0;var i=P(1),O=P(26);function w(N,W,V){return{method:"GET",headers:N,signal:V?.signal,mode:"cors",credentials:W?"include":"same-origin",redirect:"follow"}}function r(N){const W=new Headers;for(const V in N){const D=N[V];typeof D>"u"||W.append(V,D)}return W}o.PDFFetchStream=class E{constructor(W){this.source=W,this.isHttp=/^https?:/i.test(W.url),this.httpHeaders=this.isHttp&&W.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new T(this),this._fullRequestReader}getRangeReader(W,V){if(V<=this._progressiveDataLength)return null;const D=new y(this,W,V);return this._rangeRequestReaders.push(D),D}cancelAllRequests(W){this._fullRequestReader&&this._fullRequestReader.cancel(W);for(const V of this._rangeRequestReaders.slice(0))V.cancel(W)}};class T{constructor(W){this._stream=W,this._reader=null,this._loaded=0,this._filename=null;const V=W.source;this._withCredentials=V.withCredentials||!1,this._contentLength=V.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=V.disableRange||!1,this._rangeChunkSize=V.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!V.disableStream,this._isRangeSupported=!V.disableRange,this._headers=r(this._stream.httpHeaders);const D=V.url;fetch(D,w(this._headers,this._withCredentials,this._abortController)).then(H=>{if(!(0,O.validateResponseStatus)(H.status))throw(0,O.createResponseStatusError)(H.status,D);this._reader=H.body.getReader(),this._headersCapability.resolve();const _=C=>H.headers.get(C),{allowRangeRequests:x,suggestedLength:b}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=b||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(_),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var W=this;return _asyncToGenerator(function*(){yield W._headersCapability.promise;const{value:V,done:D}=yield W._reader.read();return D?{value:V,done:D}:(W._loaded+=V.byteLength,W.onProgress&&W.onProgress({loaded:W._loaded,total:W._contentLength}),{value:new Uint8Array(V).buffer,done:!1})})()}cancel(W){this._reader&&this._reader.cancel(W),this._abortController&&this._abortController.abort()}}class y{constructor(W,V,D){this._stream=W,this._reader=null,this._loaded=0;const H=W.source;this._withCredentials=H.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!H.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=r(this._stream.httpHeaders),this._headers.append("Range",`bytes=${V}-${D-1}`);const _=H.url;fetch(_,w(this._headers,this._withCredentials,this._abortController)).then(x=>{if(!(0,O.validateResponseStatus)(x.status))throw(0,O.createResponseStatusError)(x.status,_);this._readCapability.resolve(),this._reader=x.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var W=this;return _asyncToGenerator(function*(){yield W._readCapability.promise;const{value:V,done:D}=yield W._reader.read();return D?{value:V,done:D}:(W._loaded+=V.byteLength,W.onProgress&&W.onProgress({loaded:W._loaded}),{value:new Uint8Array(V).buffer,done:!1})})()}cancel(W){this._reader&&this._reader.cancel(W),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(G){var o=__webpack_module_cache__[G];if(void 0!==o)return o.exports;var P=__webpack_module_cache__[G]={exports:{}};return __webpack_modules__[G](P,P.exports,__w_pdfjs_require__),P.exports}var __webpack_exports__={};return(()=>{var G=__webpack_exports__;Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"AnnotationLayer",{enumerable:!0,get:function(){return O.AnnotationLayer}}),Object.defineProperty(G,"AnnotationMode",{enumerable:!0,get:function(){return o.AnnotationMode}}),Object.defineProperty(G,"CMapCompressionType",{enumerable:!0,get:function(){return o.CMapCompressionType}}),Object.defineProperty(G,"GlobalWorkerOptions",{enumerable:!0,get:function(){return w.GlobalWorkerOptions}}),Object.defineProperty(G,"InvalidPDFException",{enumerable:!0,get:function(){return o.InvalidPDFException}}),Object.defineProperty(G,"LoopbackPort",{enumerable:!0,get:function(){return P.LoopbackPort}}),Object.defineProperty(G,"MissingPDFException",{enumerable:!0,get:function(){return o.MissingPDFException}}),Object.defineProperty(G,"OPS",{enumerable:!0,get:function(){return o.OPS}}),Object.defineProperty(G,"PDFDataRangeTransport",{enumerable:!0,get:function(){return P.PDFDataRangeTransport}}),Object.defineProperty(G,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(G,"PDFWorker",{enumerable:!0,get:function(){return P.PDFWorker}}),Object.defineProperty(G,"PasswordResponses",{enumerable:!0,get:function(){return o.PasswordResponses}}),Object.defineProperty(G,"PermissionFlag",{enumerable:!0,get:function(){return o.PermissionFlag}}),Object.defineProperty(G,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(G,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(G,"SVGGraphics",{enumerable:!0,get:function(){return T.SVGGraphics}}),Object.defineProperty(G,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return o.UNSUPPORTED_FEATURES}}),Object.defineProperty(G,"UnexpectedResponseException",{enumerable:!0,get:function(){return o.UnexpectedResponseException}}),Object.defineProperty(G,"Util",{enumerable:!0,get:function(){return o.Util}}),Object.defineProperty(G,"VerbosityLevel",{enumerable:!0,get:function(){return o.VerbosityLevel}}),Object.defineProperty(G,"XfaLayer",{enumerable:!0,get:function(){return y.XfaLayer}}),Object.defineProperty(G,"build",{enumerable:!0,get:function(){return P.build}}),Object.defineProperty(G,"createPromiseCapability",{enumerable:!0,get:function(){return o.createPromiseCapability}}),Object.defineProperty(G,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return o.createValidAbsoluteUrl}}),Object.defineProperty(G,"getDocument",{enumerable:!0,get:function(){return P.getDocument}}),Object.defineProperty(G,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(G,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(G,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(G,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(G,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(G,"renderTextLayer",{enumerable:!0,get:function(){return E.renderTextLayer}}),Object.defineProperty(G,"shadow",{enumerable:!0,get:function(){return o.shadow}}),Object.defineProperty(G,"version",{enumerable:!0,get:function(){return P.version}});var o=__w_pdfjs_require__(1),P=__w_pdfjs_require__(4),i=__w_pdfjs_require__(5),O=__w_pdfjs_require__(20),w=__w_pdfjs_require__(13),r=__w_pdfjs_require__(3),E=__w_pdfjs_require__(23),T=__w_pdfjs_require__(24),y=__w_pdfjs_require__(22);if(r.isNodeJS){const{PDFNodeStream:V}=__w_pdfjs_require__(25);(0,P.setPDFNetworkStreamFactory)(D=>new V(D))}else{const{PDFNetworkStream:V}=__w_pdfjs_require__(28),{PDFFetchStream:D}=__w_pdfjs_require__(29);(0,P.setPDFNetworkStreamFactory)(H=>(0,i.isValidFetchUrl)(H.url)?new D(H):new V(H))}})(),__webpack_exports__})(),module.exports=P()},2813:function(G,o,P){var V,i=P(5661).default,O=P(1860).default,w=P(9159).default,r=P(5764).default,E=P(4467).default,T=P(468).default,y=P(7156).default;V=()=>(()=>{"use strict";var N=[,(H,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DefaultXfaLayerFactory=_.DefaultTextLayerFactory=_.DefaultStructTreeLayerFactory=_.DefaultAnnotationLayerFactory=void 0;var b=x(2),C=x(4),A=x(5),v=x(7),t=x(8),n=x(9);_.DefaultAnnotationLayerFactory=class h{createAnnotationLayerBuilder(d,R,k=null,j="",$=!0,Q=C.NullL10n,K=!1,re=null,fe=null,ue=null,F=null){return new b.AnnotationLayerBuilder({pageDiv:d,pdfPage:R,imageResourcesPath:j,renderForms:$,linkService:new A.SimpleLinkService,l10n:Q,annotationStorage:k,enableScripting:K,hasJSActionsPromise:re,fieldObjectsPromise:ue,mouseState:fe,annotationCanvasMap:F})}},_.DefaultStructTreeLayerFactory=class S{createStructTreeLayerBuilder(d){return new v.StructTreeLayerBuilder({pdfPage:d})}},_.DefaultTextLayerFactory=class u{createTextLayerBuilder(d,R,k,j=!1,$,Q){return new t.TextLayerBuilder({textLayerDiv:d,pageIndex:R,viewport:k,enhanceTextSelection:j,eventBus:$,highlighter:Q})}},_.DefaultXfaLayerFactory=class m{createXfaLayerBuilder(d,R,k=null,j=null){return new n.XfaLayerBuilder({pageDiv:d,pdfPage:R,annotationStorage:k,linkService:new A.SimpleLinkService,xfaHtml:j})}}},(H,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.AnnotationLayerBuilder=void 0;var b=x(3),C=x(4);_.AnnotationLayerBuilder=class A{constructor({pageDiv:t,pdfPage:n,linkService:h,downloadManager:S,annotationStorage:u=null,imageResourcesPath:m="",renderForms:g=!0,l10n:d=C.NullL10n,enableScripting:R=!1,hasJSActionsPromise:k=null,fieldObjectsPromise:j=null,mouseState:$=null,annotationCanvasMap:Q=null}){this.pageDiv=t,this.pdfPage=n,this.linkService=h,this.downloadManager=S,this.imageResourcesPath=m,this.renderForms=g,this.l10n=d,this.annotationStorage=u,this.enableScripting=R,this._hasJSActionsPromise=k,this._fieldObjectsPromise=j,this._mouseState=$,this._annotationCanvasMap=Q,this.div=null,this._cancelled=!1}render(t,n="display"){var h=this;return y(function*(){const[S,u=!1,m=null]=yield Promise.all([h.pdfPage.getAnnotations({intent:n}),h._hasJSActionsPromise,h._fieldObjectsPromise]);if(h._cancelled||0===S.length)return;const g={viewport:t.clone({dontFlip:!0}),div:h.div,annotations:S,page:h.pdfPage,imageResourcesPath:h.imageResourcesPath,renderForms:h.renderForms,linkService:h.linkService,downloadManager:h.downloadManager,annotationStorage:h.annotationStorage,enableScripting:h.enableScripting,hasJSActions:u,fieldObjects:m,mouseState:h._mouseState,annotationCanvasMap:h._annotationCanvasMap};h.div?b.AnnotationLayer.update(g):(h.div=document.createElement("div"),h.div.className="annotationLayer",h.pageDiv.appendChild(h.div),g.div=h.div,b.AnnotationLayer.render(g),h.l10n.translate(h.div))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},H=>{let _;_=typeof window<"u"&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:P(6036),H.exports=_},(H,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.NullL10n=void 0,_.fixupLangCode=function A(n){return C[n?.toLowerCase()]||n},_.getL10nFallback=b;const x={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function b(n,h){switch(n){case"find_match_count":n=`find_match_count[${1===h.total?"one":"other"}]`;break;case"find_match_count_limit":n=`find_match_count_limit[${1===h.limit?"one":"other"}]`}return x[n]||""}const C={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};_.NullL10n={getLanguage:()=>y(function*(){return"en-us"})(),getDirection:()=>y(function*(){return"ltr"})(),get:(n,h=null,S=b(n,h))=>y(function*(){return function v(n,h){return h?n.replace(/\{\{\s*(\w+)\s*\}\}/g,(S,u)=>u in h?h[u]:"{{"+u+"}}"):n}(S,h)})(),translate:n=>y(function*(){})()}},(H,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.SimpleLinkService=_.PDFLinkService=_.LinkTarget=void 0;var b=x(6);const C="noopener noreferrer nofollow",A={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function v(g,{url:d,target:R,rel:k,enabled:j=!0}={}){if(!d||"string"!=typeof d)throw new Error('A valid "url" parameter must provided.');const $=(0,b.removeNullCharacters)(d);j?g.href=g.title=$:(g.href="",g.title=`Disabled: ${$}`,g.onclick=()=>!1);let Q="";switch(R){case A.NONE:break;case A.SELF:Q="_self";break;case A.BLANK:Q="_blank";break;case A.PARENT:Q="_parent";break;case A.TOP:Q="_top"}g.target=Q,g.rel="string"==typeof k?k:C}_.LinkTarget=A;var t=new WeakMap,n=new WeakSet;class h{constructor({eventBus:d,externalLinkTarget:R=null,externalLinkRel:k=null,ignoreDestinationZoom:j=!1}={}){O(this,n),w(this,t,{writable:!0,value:new Map}),this.eventBus=d,this.externalLinkTarget=R,this.externalLinkRel=k,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=j,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(d,R=null){this.baseUrl=R,this.pdfDocument=d,T(this,t).clear()}setViewer(d){this.pdfViewer=d}setHistory(d){this.pdfHistory=d}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(d){this.pdfViewer.currentPageNumber=d}get rotation(){return this.pdfViewer.pagesRotation}set rotation(d){this.pdfViewer.pagesRotation=d}goToDestination(d){var R=this;return y(function*(){if(!R.pdfDocument)return;let k,j;"string"==typeof d?(k=d,j=yield R.pdfDocument.getDestination(d)):(k=null,j=yield d),Array.isArray(j)?E(R,n,S).call(R,d,k,j):console.error(`PDFLinkService.goToDestination: "${j}" is not a valid destination array, for dest="${d}".`)})()}goToPage(d){if(!this.pdfDocument)return;const R="string"==typeof d&&this.pdfViewer.pageLabelToPageNumber(d)||0|d;Number.isInteger(R)&&R>0&&R<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(R)),this.pdfViewer.scrollPageIntoView({pageNumber:R})):console.error(`PDFLinkService.goToPage: "${d}" is not a valid page.`)}addLinkAttributes(d,R,k=!1){v(d,{url:R,target:k?A.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(d){if("string"==typeof d){if(d.length>0)return this.getAnchorUrl("#"+escape(d))}else if(Array.isArray(d)){const R=JSON.stringify(d);if(R.length>0)return this.getAnchorUrl("#"+escape(R))}return this.getAnchorUrl("")}getAnchorUrl(d){return(this.baseUrl||"")+d}setHash(d){if(!this.pdfDocument)return;let R,k;if(d.includes("=")){const j=(0,b.parseQueryString)(d);if(j.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:j.get("search").replace(/"/g,""),phraseSearch:"true"===j.get("phrase")}),j.has("page")&&(R=0|j.get("page")||1),j.has("zoom")){const $=j.get("zoom").split(","),Q=$[0],K=parseFloat(Q);Q.includes("Fit")?"Fit"===Q||"FitB"===Q?k=[null,{name:Q}]:"FitH"===Q||"FitBH"===Q||"FitV"===Q||"FitBV"===Q?k=[null,{name:Q},$.length>1?0|$[1]:null]:"FitR"===Q?5!==$.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):k=[null,{name:Q},0|$[1],0|$[2],0|$[3],0|$[4]]:console.error(`PDFLinkService.setHash: "${Q}" is not a valid zoom value.`):k=[null,{name:"XYZ"},$.length>1?0|$[1]:null,$.length>2?0|$[2]:null,K?K/100:Q]}k?this.pdfViewer.scrollPageIntoView({pageNumber:R||this.page,destArray:k,allowNegativeOffset:!0}):R&&(this.page=R),j.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:j.get("pagemode")}),j.has("nameddest")&&this.goToDestination(j.get("nameddest"))}else{k=unescape(d);try{k=JSON.parse(k),Array.isArray(k)||(k=k.toString())}catch{}if("string"==typeof k||r(h,h,u).call(h,k))return void this.goToDestination(k);console.error(`PDFLinkService.setHash: "${unescape(d)}" is not a valid destination.`)}}executeNamedAction(d){switch(d){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:d})}cachePageRef(d,R){if(!R)return;const k=0===R.gen?`${R.num}R`:`${R.num}R${R.gen}`;T(this,t).set(k,d)}_cachedPageNumber(d){if(!d)return null;const R=0===d.gen?`${d.num}R`:`${d.num}R${d.gen}`;return T(this,t).get(R)||null}isPageVisible(d){return this.pdfViewer.isPageVisible(d)}isPageCached(d){return this.pdfViewer.isPageCached(d)}}function S(g,d=null,R){const k=R[0];let j;if("object"==typeof k&&null!==k){if(j=this._cachedPageNumber(k),!j)return void this.pdfDocument.getPageIndex(k).then($=>{this.cachePageRef($+1,k),E(this,n,S).call(this,g,d,R)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${k}" is not a valid page reference, for dest="${g}".`)})}else{if(!Number.isInteger(k))return void console.error(`PDFLinkService.#goToDestinationHelper: "${k}" is not a valid destination reference, for dest="${g}".`);j=k+1}!j||j<1||j>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${j}" is not a valid page number, for dest="${g}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:d,explicitDest:R,pageNumber:j})),this.pdfViewer.scrollPageIntoView({pageNumber:j,destArray:R,ignoreDestinationZoom:this._ignoreDestinationZoom}))}function u(g){if(!Array.isArray(g))return!1;const d=g.length;if(d<2)return!1;const R=g[0];if(!("object"==typeof R&&Number.isInteger(R.num)&&Number.isInteger(R.gen)||Number.isInteger(R)&&R>=0))return!1;const k=g[1];if("object"!=typeof k||"string"!=typeof k.name)return!1;let j=!0;switch(k.name){case"XYZ":if(5!==d)return!1;break;case"Fit":case"FitB":return 2===d;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==d)return!1;break;case"FitR":if(6!==d)return!1;j=!1;break;default:return!1}for(let $=2;$<d;$++){const Q=g[$];if(!("number"==typeof Q||j&&null===Q))return!1}return!0}_.PDFLinkService=h,_.SimpleLinkService=class m{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(d){}get rotation(){return 0}set rotation(d){}goToDestination(d){return y(function*(){})()}goToPage(d){}addLinkAttributes(d,R,k=!1){v(d,{url:R,enabled:this.externalLinkEnabled})}getDestinationHash(d){return"#"}getAnchorUrl(d){return"#"}setHash(d){}executeNamedAction(d){}cachePageRef(d,R){}isPageVisible(d){return!0}isPageCached(d){return!0}}},(H,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.animationStarted=_.VERTICAL_PADDING=_.UNKNOWN_SCALE=_.TextLayerMode=_.SpreadMode=_.SidebarView=_.ScrollMode=_.SCROLLBAR_PADDING=_.RenderingStates=_.RendererType=_.ProgressBar=_.PresentationModeState=_.OutputScale=_.MIN_SCALE=_.MAX_SCALE=_.MAX_AUTO_SCALE=_.DEFAULT_SCALE_VALUE=_.DEFAULT_SCALE_DELTA=_.DEFAULT_SCALE=_.AutoPrintRegExp=void 0,_.apiPageLayoutToViewerModes=function Te(le){let ge=k.VERTICAL,Pe=j.NONE;switch(le){case"SinglePage":ge=k.PAGE;break;case"OneColumn":break;case"TwoPageLeft":ge=k.PAGE;case"TwoColumnLeft":Pe=j.ODD;break;case"TwoPageRight":ge=k.PAGE;case"TwoColumnRight":Pe=j.EVEN}return{scrollMode:ge,spreadMode:Pe}},_.apiPageModeToSidebarView=function me(le){switch(le){case"UseNone":return g.NONE;case"UseThumbs":return g.THUMBS;case"UseOutlines":return g.OUTLINE;case"UseAttachments":return g.ATTACHMENTS;case"UseOC":return g.LAYERS}return g.NONE},_.approximateFraction=function s(le){if(Math.floor(le)===le)return[le,1];const ge=1/le;if(ge>8)return[1,8];if(Math.floor(ge)===ge)return[1,ge];const se=le>1?ge:le;let z,M=0,Z=1,ce=1,be=1;for(;;){const I=M+ce,U=Z+be;if(U>8)break;se<=I/U?(ce=I,be=U):(M=I,Z=U)}return z=se-M/Z<ce/be-se?se===le?[M,Z]:[Z,M]:se===le?[ce,be]:[be,ce],z},_.backtrackBeforeAllVisibleElements=p,_.binarySearchFirstItem=e,_.getActiveOrFocusedElement=function ke(){let le=document,ge=le.activeElement||le.querySelector(":focus");for(;ge?.shadowRoot;)le=ge.shadowRoot,ge=le.activeElement||le.querySelector(":focus");return ge},_.getPageSizeInches=function f({view:le,userUnit:ge,rotate:Pe}){const[se,M,Z,ce]=le,be=Pe%180!=0,z=(Z-se)/72*ge,I=(ce-M)/72*ge;return{width:be?I:z,height:be?z:I}},_.getVisibleElements=function c({scrollEl:le,views:ge,sortByVisibility:Pe=!1,horizontal:se=!1,rtl:M=!1}){const Z=le.scrollTop,ce=Z+le.clientHeight,be=le.scrollLeft,z=be+le.clientWidth,ae=[],ve=new Set,Fe=ge.length;let oe=e(ge,se?function U(_e){const Le=_e.div,xe=Le.offsetLeft+Le.clientLeft;return M?xe<z:xe+Le.clientWidth>be}:function I(_e){const Le=_e.div;return Le.offsetTop+Le.clientTop+Le.clientHeight>Z});oe>0&&oe<Fe&&!se&&(oe=p(oe,ge,Z));let de=se?z:-1;for(let _e=oe;_e<Fe;_e++){const Le=ge[_e],xe=Le.div,Re=xe.offsetLeft+xe.clientLeft,Oe=xe.offsetTop+xe.clientTop,Ie=xe.clientWidth,Ne=xe.clientHeight,Ve=Re+Ie,Be=Oe+Ne;if(-1===de)Be>=ce&&(de=Be);else if((se?Re:Oe)>de)break;if(Be<=Z||Oe>=ce||Ve<=be||Re>=z)continue;const ee=Math.max(0,Z-Oe)+Math.max(0,Be-ce),Se=(Ie-(Math.max(0,be-Re)+Math.max(0,Ve-z)))/Ie;ae.push({id:Le.id,x:Re,y:Oe,view:Le,percent:(Ne-ee)/Ne*Se*100|0,widthPercent:100*Se|0}),ve.add(Le.id)}const we=ae[0],Ee=ae[ae.length-1];return Pe&&ae.sort(function(_e,Le){const xe=_e.percent-Le.percent;return Math.abs(xe)>.001?-xe:_e.id-Le.id}),{first:we,last:Ee,views:ae,ids:ve}},_.isPortraitOrientation=function ie(le){return le.width<=le.height},_.isValidRotation=function Y(le){return Number.isInteger(le)&&le%90==0},_.isValidScrollMode=function X(le){return Number.isInteger(le)&&Object.values(k).includes(le)&&le!==k.UNKNOWN},_.isValidSpreadMode=function te(le){return Number.isInteger(le)&&Object.values(j).includes(le)&&le!==j.UNKNOWN},_.noContextMenuHandler=function L(le){le.preventDefault()},_.normalizeWheelEventDelta=function B(le){let ge=q(le);return 0===le.deltaMode?ge/=900:1===le.deltaMode&&(ge/=30),ge},_.normalizeWheelEventDirection=q,_.parseQueryString=function fe(le){const ge=new Map;for(const[Pe,se]of new URLSearchParams(le))ge.set(Pe.toLowerCase(),se);return ge},_.removeNullCharacters=function a(le,ge=!1){return"string"!=typeof le?(console.error("The argument must be a string."),le):(ge&&(le=le.replace(F," ")),le.replace(ue,""))},_.roundToDivide=function l(le,ge){const Pe=le%ge;return 0===Pe?le:Math.round(le-Pe+ge)},_.scrollIntoView=function K(le,ge,Pe=!1){let se=le.offsetParent;if(!se)return void console.error("offsetParent is not set -- cannot scroll");let M=le.offsetTop+le.clientTop,Z=le.offsetLeft+le.clientLeft;for(;se.clientHeight===se.scrollHeight&&se.clientWidth===se.scrollWidth||Pe&&(se.classList.contains("markedContent")||"hidden"===getComputedStyle(se).overflow);)if(M+=se.offsetTop,Z+=se.offsetLeft,se=se.offsetParent,!se)return;ge&&(void 0!==ge.top&&(M+=ge.top),void 0!==ge.left&&(Z+=ge.left,se.scrollLeft=Z)),se.scrollTop=M},_.watchScroll=function re(le,ge){const Pe=function(Z){M||(M=window.requestAnimationFrame(function(){M=null;const be=le.scrollLeft,z=se.lastX;be!==z&&(se.right=be>z),se.lastX=be;const I=le.scrollTop,U=se.lastY;I!==U&&(se.down=I>U),se.lastY=I,ge(se)}))},se={right:!0,down:!0,lastX:le.scrollLeft,lastY:le.scrollTop,_eventHandler:Pe};let M=null;return le.addEventListener("scroll",Pe,!0),se},_.DEFAULT_SCALE_VALUE="auto",_.DEFAULT_SCALE=1,_.DEFAULT_SCALE_DELTA=1.1,_.MIN_SCALE=.1,_.MAX_SCALE=10,_.UNKNOWN_SCALE=0,_.MAX_AUTO_SCALE=1.25,_.SCROLLBAR_PADDING=40,_.VERTICAL_PADDING=5,_.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},_.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const g={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};_.SidebarView=g,_.RendererType={CANVAS:"canvas",SVG:"svg"},_.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const k={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};_.ScrollMode=k;const j={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};_.SpreadMode=j,_.AutoPrintRegExp=/\bprint\s*\(/,_.OutputScale=class Q{constructor(){const ge=window.devicePixelRatio||1;this.sx=ge,this.sy=ge}get scaled(){return 1!==this.sx||1!==this.sy}};const ue=/\x00/g,F=/[\x01-\x1F]/g;function e(le,ge,Pe=0){let se=Pe,M=le.length-1;if(M<0||!ge(le[M]))return le.length;if(ge(le[se]))return se;for(;se<M;){const Z=se+M>>1;ge(le[Z])?M=Z:se=Z+1}return se}function p(le,ge,Pe){if(le<2)return le;let se=ge[le].div,M=se.offsetTop+se.clientTop;M>=Pe&&(se=ge[le-1].div,M=se.offsetTop+se.clientTop);for(let Z=le-2;Z>=0&&(se=ge[Z].div,!(se.offsetTop+se.clientTop+se.clientHeight<=M));--Z)le=Z;return le}function q(le){let ge=Math.hypot(le.deltaX,le.deltaY);const Pe=Math.atan2(le.deltaY,le.deltaX);return-.25*Math.PI<Pe&&Pe<.75*Math.PI&&(ge=-ge),ge}const pe=new Promise(function(le){window.requestAnimationFrame(le)});_.animationStarted=pe;var Ce=new WeakSet;function he(){this._indeterminate?this.div.classList.add("indeterminate"):(this.div.classList.remove("indeterminate"),document.documentElement.style.setProperty("--progressBar-percent",`${this._percent}%`))}_.ProgressBar=class ye{constructor(ge){if(O(this,Ce),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");this.visible=!0,this.div=document.querySelector(ge+" .progress"),this.bar=this.div.parentNode,this.percent=0}get percent(){return this._percent}set percent(ge){this._indeterminate=isNaN(ge),this._percent=function Ae(le,ge,Pe){return Math.min(Math.max(le,ge),Pe)}(ge,0,100),E(this,Ce,he).call(this)}setWidth(ge){if(!ge)return;const se=ge.parentNode.offsetWidth-ge.offsetWidth;se>0&&document.documentElement.style.setProperty("--progressBar-end-offset",`${se}px`)}hide(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},(H,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.StructTreeLayerBuilder=void 0;const x={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},b=/^H(\d+)$/;_.StructTreeLayerBuilder=class C{constructor({pdfPage:v}){this.pdfPage=v}render(v){return this._walk(v)}_setAttributes(v,t){void 0!==v.alt&&t.setAttribute("aria-label",v.alt),void 0!==v.id&&t.setAttribute("aria-owns",v.id),void 0!==v.lang&&t.setAttribute("lang",v.lang)}_walk(v){if(!v)return null;const t=document.createElement("span");if("role"in v){const{role:n}=v,h=n.match(b);h?(t.setAttribute("role","heading"),t.setAttribute("aria-level",h[1])):x[n]&&t.setAttribute("role",x[n])}if(this._setAttributes(v,t),v.children)if(1===v.children.length&&"id"in v.children[0])this._setAttributes(v.children[0],t);else for(const n of v.children)t.appendChild(this._walk(n));return t}}},(H,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextLayerBuilder=void 0;var b=x(3);_.TextLayerBuilder=class A{constructor({textLayerDiv:t,eventBus:n,pageIndex:h,viewport:S,highlighter:u=null,enhanceTextSelection:m=!1}){this.textLayerDiv=t,this.eventBus=n,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=h+1,this.viewport=S,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=u,this.enhanceTextSelection=m,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const t=document.createElement("div");t.className="endOfContent",this.textLayerDiv.appendChild(t)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(t=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr);const n=document.createDocumentFragment();this.textLayerRenderTask=(0,b.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:n,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:t,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.appendChild(n),this._finishRendering(),this.highlighter?.enable()},function(h){})}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable()}setTextContentStream(t){this.cancel(),this.textContentStream=t}setTextContent(t){this.cancel(),this.textContent=t}_bindMouse(){const t=this.textLayerDiv;let n=null;t.addEventListener("mousedown",h=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(n&&(clearTimeout(n),n=null));const S=t.querySelector(".endOfContent");if(!S)return;let u=h.target!==t;if(u=u&&"none"!==window.getComputedStyle(S).getPropertyValue("-moz-user-select"),u){const m=t.getBoundingClientRect(),g=Math.max(0,(h.pageY-m.top)/m.height);S.style.top=(100*g).toFixed(2)+"%"}S.classList.add("active")}),t.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(n=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),n=null},300));const h=t.querySelector(".endOfContent");h&&(h.style.top="",h.classList.remove("active"))})}}},(H,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.XfaLayerBuilder=void 0;var b=x(3);_.XfaLayerBuilder=class C{constructor({pageDiv:v,pdfPage:t,annotationStorage:n=null,linkService:h,xfaHtml:S=null}){this.pageDiv=v,this.pdfPage=t,this.annotationStorage=n,this.linkService=h,this.xfaHtml=S,this.div=null,this._cancelled=!1}render(v,t="display"){if("print"===t){const n={viewport:v.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t},h=document.createElement("div");this.pageDiv.appendChild(h),n.div=h;const S=b.XfaLayer.render(n);return Promise.resolve(S)}return this.pdfPage.getXfa().then(n=>{if(this._cancelled||!n)return{textDivs:[]};const h={viewport:v.clone({dontFlip:!0}),div:this.div,xfaHtml:n,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};return this.div?b.XfaLayer.update(h):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),h.div=this.div,b.XfaLayer.render(h))}).catch(n=>{console.error(n)})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(H,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFViewer=_.PDFSinglePageViewer=void 0;var b=x(6),C=x(11);_.PDFViewer=class A extends C.BaseViewer{},_.PDFSinglePageViewer=class v extends C.BaseViewer{_resetView(){super._resetView(),this._scrollMode=b.ScrollMode.PAGE,this._spreadMode=b.SpreadMode.NONE}set scrollMode(n){}_updateScrollMode(){}set spreadMode(n){}_updateSpreadMode(){}}},(H,_,x)=>{let b;Object.defineProperty(_,"__esModule",{value:!0}),_.PagesCountLimit=_.PDFPageViewBuffer=_.BaseViewer=void 0;var C=x(3),A=x(6),v=x(2),t=x(4),n=x(12),h=x(14),S=x(5),u=x(7),m=x(15),g=x(8),d=x(9);const k="enablePermissions",j={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};_.PagesCountLimit=j;var $=new WeakMap,Q=new WeakMap,K=new WeakSet;b=Symbol.iterator;class re{constructor(M){O(this,K),w(this,$,{writable:!0,value:new Set}),w(this,Q,{writable:!0,value:0}),i(this,Q,M)}push(M){const Z=T(this,$);Z.has(M)&&Z.delete(M),Z.add(M),Z.size>T(this,Q)&&E(this,K,fe).call(this)}resize(M,Z=null){i(this,Q,M);const ce=T(this,$);if(Z){const be=ce.size;let z=1;for(const I of ce)if(Z.has(I.id)&&(ce.delete(I),ce.add(I)),++z>be)break}for(;ce.size>T(this,Q);)E(this,K,fe).call(this)}has(M){return T(this,$).has(M)}[b](){return T(this,$).keys()}}function fe(){const se=T(this,$).keys().next().value;se?.destroy(),T(this,$).delete(se)}_.PDFPageViewBuffer=re;var ue=new WeakMap,F=new WeakMap,a=new WeakMap,e=new WeakMap,s=new WeakMap,l=new WeakMap,f=new WeakMap,p=new WeakSet,c=new WeakSet,L=new WeakSet,q=new WeakSet,B=new WeakSet,Y=new WeakSet,X=new WeakSet,te=new WeakSet,ie=new WeakSet;class pe{constructor(M){if(O(this,ie),O(this,te),O(this,X),O(this,Y),O(this,B),O(this,q),O(this,L),O(this,c),O(this,p),w(this,ue,{writable:!0,value:null}),w(this,F,{writable:!0,value:C.AnnotationMode.ENABLE_FORMS}),w(this,a,{writable:!0,value:null}),w(this,e,{writable:!0,value:!1}),w(this,s,{writable:!0,value:0}),w(this,l,{writable:!0,value:null}),w(this,f,{writable:!0,value:null}),this.constructor===pe)throw new Error("Cannot initialize BaseViewer.");const Z="2.14.305";if(C.version!==Z)throw new Error(`The API version "${C.version}" does not match the Viewer version "${Z}".`);if(this.container=M.container,this.viewer=M.viewer||M.container.firstElementChild,"DIV"!==this.container?.tagName.toUpperCase()||"DIV"!==this.viewer?.tagName.toUpperCase())throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=M.eventBus,this.linkService=M.linkService||new S.SimpleLinkService,this.downloadManager=M.downloadManager||null,this.findController=M.findController||null,this._scriptingManager=M.scriptingManager||null,this.removePageBorders=M.removePageBorders||!1,this.textLayerMode=M.textLayerMode??A.TextLayerMode.ENABLE,i(this,F,M.annotationMode??C.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=M.imageResourcesPath||"",this.enablePrintAutoRotate=M.enablePrintAutoRotate||!1,this.renderer=M.renderer||A.RendererType.CANVAS,this.useOnlyCssZoom=M.useOnlyCssZoom||!1,this.maxCanvasPixels=M.maxCanvasPixels,this.l10n=M.l10n||t.NullL10n,i(this,e,M.enablePermissions||!1),this.pageColors=M.pageColors||null,M.pageColors&&(!CSS.supports("color",M.pageColors.background)||!CSS.supports("color",M.pageColors.foreground))&&((M.pageColors.background||M.pageColors.foreground)&&console.warn("Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!M.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new h.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=M.renderingQueue,this._doc=document.documentElement,this.scroll=(0,A.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=A.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss(),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(M){return this._pages[M]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(M){return M?.pdfPage})}get renderForms(){return T(this,F)===C.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(M){if(!Number.isInteger(M))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(M,!0)||console.error(`currentPageNumber: "${M}" is not a valid page.`))}_setCurrentPageNumber(M,Z=!1){if(this._currentPageNumber===M)return Z&&E(this,Y,Te).call(this),!0;if(!(0<M&&M<=this.pagesCount))return!1;const ce=this._currentPageNumber;return this._currentPageNumber=M,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:M,pageLabel:this._pageLabels?.[M-1]??null,previous:ce}),Z&&E(this,Y,Te).call(this),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(M){if(!this.pdfDocument)return;let Z=0|M;if(this._pageLabels){const ce=this._pageLabels.indexOf(M);ce>=0&&(Z=ce+1)}this._setCurrentPageNumber(Z,!0)||console.error(`currentPageLabel: "${M}" is not a valid page.`)}get currentScale(){return this._currentScale!==A.UNKNOWN_SCALE?this._currentScale:A.DEFAULT_SCALE}set currentScale(M){if(isNaN(M))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(M,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(M){this.pdfDocument&&this._setScale(M,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(M){if(!(0,A.isValidRotation)(M))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((M%=360)<0&&(M+=360),this._pagesRotation===M))return;this._pagesRotation=M;const Z=this._currentPageNumber,ce={rotation:M};for(const be of this._pages)be.update(ce);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:M,pageNumber:Z}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(M){var Z=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=M,!M)return;const ce=M.isPureXfa,be=M.numPages,z=M.getPage(1),I=M.getOptionalContentConfig(),U=T(this,e)?M.getPermissions():Promise.resolve();if(be>j.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const ae=this._scrollMode=A.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:ae})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:be})},()=>{}),this._onBeforeDraw=ae=>{const ve=this._pages[ae.pageNumber-1];ve&&T(this,ue).push(ve)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=ae=>{ae.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:ae.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,T(this,f)&&(document.removeEventListener("visibilitychange",T(this,f)),i(this,f,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([z,U]).then(([ae,ve])=>{if(M!==this.pdfDocument)return;this._firstPageCapability.resolve(ae),this._optionalContentConfigPromise=I,E(this,p,Ae).call(this,ve);const Fe=this._scrollMode===A.ScrollMode.PAGE?null:this.viewer,oe=this.currentScale,de=ae.getViewport({scale:oe*C.PixelsPerInch.PDF_TO_CSS_UNITS}),we=this.textLayerMode===A.TextLayerMode.DISABLE||ce?null:this,Ee=T(this,F)!==C.AnnotationMode.DISABLE?this:null,_e=ce?this:null;for(let xe=1;xe<=be;++xe){const Re=new n.PDFPageView({container:Fe,eventBus:this.eventBus,id:xe,scale:oe,defaultViewport:de.clone(),optionalContentConfigPromise:I,renderingQueue:this.renderingQueue,textLayerFactory:we,textLayerMode:this.textLayerMode,annotationLayerFactory:Ee,annotationMode:T(this,F),xfaLayerFactory:_e,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(Re)}const Le=this._pages[0];Le&&(Le.setPdfPage(ae),this.linkService.cachePageRef(1,ae.ref)),this._scrollMode===A.ScrollMode.PAGE?E(this,L,ye).call(this):this._spreadMode!==A.SpreadMode.NONE&&this._updateSpreadMode(),E(this,c,Ce).call(this).then(y(function*(){if(Z.findController&&Z.findController.setDocument(M),Z._scriptingManager&&Z._scriptingManager.setDocument(M),M.loadingParams.disableAutoFetch||be>j.FORCE_LAZY_PAGE_INIT)return void Z._pagesCapability.resolve();let xe=be-1;if(xe<=0)Z._pagesCapability.resolve();else for(let Re=2;Re<=be;++Re){const Oe=M.getPage(Re).then(Ie=>{const Ne=Z._pages[Re-1];Ne.pdfPage||Ne.setPdfPage(Ie),Z.linkService.cachePageRef(Re,Ie.ref),0==--xe&&Z._pagesCapability.resolve()},Ie=>{console.error(`Unable to get page ${Re} to initialize viewer`,Ie),0==--xe&&Z._pagesCapability.resolve()});Re%j.PAUSE_EAGER_PAGE_INIT==0&&(yield Oe)}})),this.eventBus.dispatch("pagesinit",{source:this}),M.getMetadata().then(({info:xe})=>{M===this.pdfDocument&&xe.Language&&(this.viewer.lang=xe.Language)}),this.defaultRenderingQueue&&this.update()}).catch(ae=>{console.error("Unable to initialize viewer",ae),this._pagesCapability.reject(ae)})}setPageLabels(M){if(this.pdfDocument){M?Array.isArray(M)&&this.pdfDocument.numPages===M.length?this._pageLabels=M:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let Z=0,ce=this._pages.length;Z<ce;Z++)this._pages[Z].setPageLabel(this._pageLabels?.[Z]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=A.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,i(this,ue,new re(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,C.createPromiseCapability)(),this._onePageRenderedCapability=(0,C.createPromiseCapability)(),this._pagesCapability=(0,C.createPromiseCapability)(),this._scrollMode=A.ScrollMode.VERTICAL,this._previousScrollMode=A.ScrollMode.UNKNOWN,this._spreadMode=A.SpreadMode.NONE,i(this,l,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),T(this,f)&&(document.removeEventListener("visibilitychange",T(this,f)),i(this,f,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(k),null!==T(this,a)&&(i(this,F,T(this,a)),i(this,a,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(M,Z,ce=!1,be=!1){if(this._currentScaleValue=Z.toString(),E(this,B,ke).call(this,M))return void(be&&this.eventBus.dispatch("scalechanging",{source:this,scale:M,presetValue:Z}));this._doc.style.setProperty("--zoom-factor",M);const z={scale:M};for(const I of this._pages)I.update(z);if(this._currentScale=M,!ce){let U,I=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(I=this._location.pageNumber,U=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:I,destArray:U,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:M,presetValue:be?Z:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==A.SpreadMode.NONE&&this._scrollMode!==A.ScrollMode.HORIZONTAL?2:1}_setScale(M,Z=!1){let ce=parseFloat(M);if(ce>0)this._setScaleUpdatePages(ce,M,Z,!1);else{const be=this._pages[this._currentPageNumber-1];if(!be)return;let z=A.SCROLLBAR_PADDING,I=A.VERTICAL_PADDING;this.isInPresentationMode?z=I=4:this.removePageBorders?z=I=0:this._scrollMode===A.ScrollMode.HORIZONTAL&&([z,I]=[I,z]);const U=(this.container.clientWidth-z)/be.width*be.scale/this._pageWidthScaleFactor,ae=(this.container.clientHeight-I)/be.height*be.scale;switch(M){case"page-actual":ce=1;break;case"page-width":ce=U;break;case"page-height":ce=ae;break;case"page-fit":ce=Math.min(U,ae);break;case"auto":const ve=(0,A.isPortraitOrientation)(be)?U:Math.min(ae,U);ce=Math.min(A.MAX_AUTO_SCALE,ve);break;default:return void console.error(`_setScale: "${M}" is an unknown zoom value.`)}this._setScaleUpdatePages(ce,M,Z,!0)}}pageLabelToPageNumber(M){if(!this._pageLabels)return null;const Z=this._pageLabels.indexOf(M);return Z<0?null:Z+1}scrollPageIntoView({pageNumber:M,destArray:Z=null,allowNegativeOffset:ce=!1,ignoreDestinationZoom:be=!1}){if(!this.pdfDocument)return;const z=Number.isInteger(M)&&this._pages[M-1];if(!z)return void console.error(`scrollPageIntoView: "${M}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!Z)return void this._setCurrentPageNumber(M,!0);let Fe,oe,I=0,U=0,ae=0,ve=0;const de=z.rotation%180!=0,we=(de?z.height:z.width)/z.scale/C.PixelsPerInch.PDF_TO_CSS_UNITS,Ee=(de?z.width:z.height)/z.scale/C.PixelsPerInch.PDF_TO_CSS_UNITS;let _e=0;switch(Z[1].name){case"XYZ":I=Z[2],U=Z[3],_e=Z[4],I=null!==I?I:0,U=null!==U?U:Ee;break;case"Fit":case"FitB":_e="page-fit";break;case"FitH":case"FitBH":U=Z[2],_e="page-width",null===U&&this._location?(I=this._location.left,U=this._location.top):("number"!=typeof U||U<0)&&(U=Ee);break;case"FitV":case"FitBV":I=Z[2],ae=we,ve=Ee,_e="page-height";break;case"FitR":I=Z[2],U=Z[3],ae=Z[4]-I,ve=Z[5]-U,Fe=(this.container.clientWidth-(this.removePageBorders?0:A.SCROLLBAR_PADDING))/ae/C.PixelsPerInch.PDF_TO_CSS_UNITS,oe=(this.container.clientHeight-(this.removePageBorders?0:A.VERTICAL_PADDING))/ve/C.PixelsPerInch.PDF_TO_CSS_UNITS,_e=Math.min(Math.abs(Fe),Math.abs(oe));break;default:return void console.error(`scrollPageIntoView: "${Z[1].name}" is not a valid destination type.`)}if(be||(_e&&_e!==this._currentScale?this.currentScaleValue=_e:this._currentScale===A.UNKNOWN_SCALE&&(this.currentScaleValue=A.DEFAULT_SCALE_VALUE)),"page-fit"===_e&&!Z[4])return void E(this,q,he).call(this,z);const Le=[z.viewport.convertToViewportPoint(I,U),z.viewport.convertToViewportPoint(I+ae,U+ve)];let xe=Math.min(Le[0][0],Le[1][0]),Re=Math.min(Le[0][1],Le[1][1]);ce||(xe=Math.max(xe,0),Re=Math.max(Re,0)),E(this,q,he).call(this,z,{left:xe,top:Re})}_updateLocation(M){const Z=this._currentScale,ce=this._currentScaleValue,be=parseFloat(ce)===Z?Math.round(1e4*Z)/100:ce,z=M.id,U=this.container,ae=this._pages[z-1].getPagePoint(U.scrollLeft-M.x,U.scrollTop-M.y),ve=Math.round(ae[0]),Fe=Math.round(ae[1]);let oe=`#page=${z}`;this.isInPresentationMode||(oe+=`&zoom=${be},${ve},${Fe}`),this._location={pageNumber:z,scale:be,top:Fe,left:ve,rotation:this._pagesRotation,pdfOpenParams:oe}}update(){const M=this._getVisiblePages(),Z=M.views,ce=Z.length;if(0===ce)return;const be=Math.max(10,2*ce+1);T(this,ue).resize(be,M.ids),this.renderingQueue.renderHighestPriority(M);const z=this._spreadMode===A.SpreadMode.NONE&&(this._scrollMode===A.ScrollMode.PAGE||this._scrollMode===A.ScrollMode.VERTICAL),I=this._currentPageNumber;let U=!1;for(const ae of Z){if(ae.percent<100)break;if(ae.id===I&&z){U=!0;break}}this._setCurrentPageNumber(U?I:Z[0].id),this._updateLocation(M.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(M){return this.container.contains(M)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===A.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===A.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const M=this._scrollMode===A.ScrollMode.PAGE?T(this,l).pages:this._pages,Z=this._scrollMode===A.ScrollMode.HORIZONTAL;return(0,A.getVisibleElements)({scrollEl:this.container,views:M,sortByVisibility:!0,horizontal:Z,rtl:Z&&this._isContainerRtl})}isPageVisible(M){return!!this.pdfDocument&&(Number.isInteger(M)&&M>0&&M<=this.pagesCount?this._getVisiblePages().ids.has(M):(console.error(`isPageVisible: "${M}" is not a valid page.`),!1))}isPageCached(M){if(!this.pdfDocument)return!1;if(!(Number.isInteger(M)&&M>0&&M<=this.pagesCount))return console.error(`isPageCached: "${M}" is not a valid page.`),!1;const Z=this._pages[M-1];return T(this,ue).has(Z)}cleanup(){for(const M of this._pages)M.renderingState!==A.RenderingStates.FINISHED&&M.reset()}_cancelRendering(){for(const M of this._pages)M.cancelRendering()}forceRendering(M){const Z=M||this._getVisiblePages(),ce=E(this,te,ge).call(this,Z),z=this.renderingQueue.getHighestPriority(Z,this._pages,ce,this._spreadMode!==A.SpreadMode.NONE&&this._scrollMode!==A.ScrollMode.HORIZONTAL);return E(this,ie,Pe).call(this,Z.ids),!!z&&(E(this,X,me).call(this,z).then(()=>{this.renderingQueue.renderView(z)}),!0)}createTextLayerBuilder(M,Z,ce,be=!1,z,I){return new g.TextLayerBuilder({textLayerDiv:M,eventBus:z,pageIndex:Z,viewport:ce,enhanceTextSelection:!this.isInPresentationMode&&be,highlighter:I})}createTextHighlighter(M,Z){return new m.TextHighlighter({eventBus:Z,pageIndex:M,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(M,Z,ce=null,be="",z=!0,I=t.NullL10n,U=null,ae=null,ve=null,Fe=null,oe=null){return new v.AnnotationLayerBuilder({pageDiv:M,pdfPage:Z,annotationStorage:ce||this.pdfDocument?.annotationStorage,imageResourcesPath:be,renderForms:z,linkService:this.linkService,downloadManager:this.downloadManager,l10n:I,enableScripting:U??this.enableScripting,hasJSActionsPromise:ae||this.pdfDocument?.hasJSActions(),fieldObjectsPromise:Fe||this.pdfDocument?.getFieldObjects(),mouseState:ve||this._scriptingManager?.mouseState,annotationCanvasMap:oe})}createXfaLayerBuilder(M,Z,ce=null){return new d.XfaLayerBuilder({pageDiv:M,pdfPage:Z,annotationStorage:ce||this.pdfDocument?.annotationStorage,linkService:this.linkService})}createStructTreeLayerBuilder(M){return new u.StructTreeLayerBuilder({pdfPage:M})}get hasEqualPageSizes(){const M=this._pages[0];for(let Z=1,ce=this._pages.length;Z<ce;++Z){const be=this._pages[Z];if(be.width!==M.width||be.height!==M.height)return!1}return!0}getPagesOverview(){return this._pages.map(M=>{const Z=M.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,A.isPortraitOrientation)(Z)?{width:Z.width,height:Z.height,rotation:Z.rotation}:{width:Z.height,height:Z.width,rotation:(Z.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(M){if(!(M instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${M}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=M;const Z={optionalContentConfigPromise:M};for(const ce of this._pages)ce.update(Z);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:M})}get scrollMode(){return this._scrollMode}set scrollMode(M){if(this._scrollMode!==M){if(!(0,A.isValidScrollMode)(M))throw new Error(`Invalid scroll mode: ${M}`);this.pagesCount>j.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=M,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:M}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(M=null){const Z=this._scrollMode,ce=this.viewer;ce.classList.toggle("scrollHorizontal",Z===A.ScrollMode.HORIZONTAL),ce.classList.toggle("scrollWrapped",Z===A.ScrollMode.WRAPPED),this.pdfDocument&&M&&(Z===A.ScrollMode.PAGE?E(this,L,ye).call(this):this._previousScrollMode===A.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(M,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(M){if(this._spreadMode!==M){if(!(0,A.isValidSpreadMode)(M))throw new Error(`Invalid spread mode: ${M}`);this._spreadMode=M,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:M}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(M=null){if(!this.pdfDocument)return;const Z=this.viewer,ce=this._pages;if(this._scrollMode===A.ScrollMode.PAGE)E(this,L,ye).call(this);else if(Z.textContent="",this._spreadMode===A.SpreadMode.NONE)for(const be of this._pages)Z.appendChild(be.div);else{const be=this._spreadMode-1;let z=null;for(let I=0,U=ce.length;I<U;++I)null===z?(z=document.createElement("div"),z.className="spread",Z.appendChild(z)):I%2===be&&(z=z.cloneNode(!1),Z.appendChild(z)),z.appendChild(ce[I].div)}M&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(M,!0),this.update())}_getPageAdvance(M,Z=!1){switch(this._scrollMode){case A.ScrollMode.WRAPPED:{const{views:ce}=this._getVisiblePages(),be=new Map;for(const{id:z,y:I,percent:U,widthPercent:ae}of ce){if(0===U||ae<100)continue;let ve=be.get(I);ve||be.set(I,ve||=[]),ve.push(z)}for(const z of be.values()){const I=z.indexOf(M);if(-1===I)continue;const U=z.length;if(1===U)break;if(Z)for(let ae=I-1,ve=0;ae>=ve;ae--){const oe=z[ae+1]-1;if(z[ae]<oe)return M-oe}else for(let ae=I+1,ve=U;ae<ve;ae++){const oe=z[ae-1]+1;if(z[ae]>oe)return oe-M}if(Z){const ae=z[0];if(ae<M)return M-ae+1}else{const ae=z[U-1];if(ae>M)return ae-M+1}break}break}case A.ScrollMode.HORIZONTAL:break;case A.ScrollMode.PAGE:case A.ScrollMode.VERTICAL:{if(this._spreadMode===A.SpreadMode.NONE)break;const ce=this._spreadMode-1;if(Z&&M%2!==ce)break;if(!Z&&M%2===ce)break;const{views:be}=this._getVisiblePages(),z=Z?M-1:M+1;for(const{id:I,percent:U,widthPercent:ae}of be)if(I===z){if(U>0&&100===ae)return 2;break}break}}return 1}nextPage(){const M=this._currentPageNumber,Z=this.pagesCount;if(M>=Z)return!1;const ce=this._getPageAdvance(M,!1)||1;return this.currentPageNumber=Math.min(M+ce,Z),!0}previousPage(){const M=this._currentPageNumber;if(M<=1)return!1;const Z=this._getPageAdvance(M,!0)||1;return this.currentPageNumber=Math.max(M-Z,1),!0}increaseScale(M=1){let Z=this._currentScale;do{Z=(Z*A.DEFAULT_SCALE_DELTA).toFixed(2),Z=Math.ceil(10*Z)/10,Z=Math.min(A.MAX_SCALE,Z)}while(--M>0&&Z<A.MAX_SCALE);this.currentScaleValue=Z}decreaseScale(M=1){let Z=this._currentScale;do{Z=(Z/A.DEFAULT_SCALE_DELTA).toFixed(2),Z=Math.floor(10*Z)/10,Z=Math.max(A.MIN_SCALE,Z)}while(--M>0&&Z>A.MIN_SCALE);this.currentScaleValue=Z}updateContainerHeightCss(){const M=this.container.clientHeight;M!==T(this,s)&&(i(this,s,M),this._doc.style.setProperty("--viewer-container-height",`${M}px`))}}function Ae(se){se&&(se.includes(C.PermissionFlag.COPY)||this.viewer.classList.add(k),!se.includes(C.PermissionFlag.MODIFY_ANNOTATIONS)&&!se.includes(C.PermissionFlag.FILL_INTERACTIVE_FORMS)&&T(this,F)===C.AnnotationMode.ENABLE_FORMS&&(i(this,a,T(this,F)),i(this,F,C.AnnotationMode.ENABLE)))}function Ce(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const se=new Promise(M=>{i(this,f,()=>{"hidden"===document.visibilityState&&(M(),document.removeEventListener("visibilitychange",T(this,f)),i(this,f,null))}),document.addEventListener("visibilitychange",T(this,f))});return Promise.race([this._onePageRenderedCapability.promise,se])}function ye(){if(this._scrollMode!==A.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const se=this._currentPageNumber,M=T(this,l),Z=this.viewer;if(Z.textContent="",M.pages.length=0,this._spreadMode!==A.SpreadMode.NONE||this.isInPresentationMode){const ce=new Set,be=this._spreadMode-1;-1===be?ce.add(se-1):se%2!==be?(ce.add(se-1),ce.add(se)):(ce.add(se-2),ce.add(se-1));const z=document.createElement("div");if(z.className="spread",this.isInPresentationMode){const I=document.createElement("div");I.className="dummyPage",z.appendChild(I)}for(const I of ce){const U=this._pages[I];U&&(z.appendChild(U.div),M.pages.push(U))}Z.appendChild(z)}else{const ce=this._pages[se-1];Z.appendChild(ce.div),M.pages.push(ce)}M.scrollDown=se>=M.previousPageNumber,M.previousPageNumber=se}function he(se,M=null){const{div:Z,id:ce}=se;if(this._scrollMode===A.ScrollMode.PAGE&&(this._setCurrentPageNumber(ce),E(this,L,ye).call(this),this.update()),!M&&!this.isInPresentationMode){const be=Z.offsetLeft+Z.clientLeft,z=be+Z.clientWidth,{scrollLeft:I,clientWidth:U}=this.container;(this._scrollMode===A.ScrollMode.HORIZONTAL||be<I||z>I+U)&&(M={left:0,top:0})}(0,A.scrollIntoView)(Z,M)}function ke(se){return se===this._currentScale||Math.abs(se-this._currentScale)<1e-15}function Te(){const se=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),E(this,q,he).call(this,se)}function me(se){return le.apply(this,arguments)}function le(){return(le=y(function*(se){if(se.pdfPage)return se.pdfPage;try{const M=yield this.pdfDocument.getPage(se.id);return se.pdfPage||se.setPdfPage(M),this.linkService._cachedPageNumber?.(M.ref)||this.linkService.cachePageRef(se.id,M.ref),M}catch(M){return console.error("Unable to get page for page view",M),null}})).apply(this,arguments)}function ge(se){if(1===se.first?.id)return!0;if(se.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case A.ScrollMode.PAGE:return T(this,l).scrollDown;case A.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function Pe(se){for(const M of se)this._pages[M-1]?.toggleLoadingIconSpinner(!0);for(const M of T(this,ue))se.has(M.id)||M.toggleLoadingIconSpinner(!1)}_.BaseViewer=pe},(H,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFPageView=void 0;var b=x(3),C=x(6),A=x(13),v=x(4);const t=A.compatibilityParams.maxCanvasPixels||16777216;var n=new WeakMap;_.PDFPageView=class h{constructor(u){w(this,n,{writable:!0,value:b.AnnotationMode.ENABLE_FORMS});const m=u.container,g=u.defaultViewport;this.id=u.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=u.scale||C.DEFAULT_SCALE,this.viewport=g,this.pdfPageRotate=g.rotation,this._optionalContentConfigPromise=u.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=u.textLayerMode??C.TextLayerMode.ENABLE,i(this,n,u.annotationMode??b.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=u.imageResourcesPath||"",this.useOnlyCssZoom=u.useOnlyCssZoom||!1,this.maxCanvasPixels=u.maxCanvasPixels||t,this.pageColors=u.pageColors||null,this.eventBus=u.eventBus,this.renderingQueue=u.renderingQueue,this.textLayerFactory=u.textLayerFactory,this.annotationLayerFactory=u.annotationLayerFactory,this.xfaLayerFactory=u.xfaLayerFactory,this.textHighlighter=u.textHighlighterFactory?.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=u.structTreeLayerFactory,this.renderer=u.renderer||C.RendererType.CANVAS,this.l10n=u.l10n||v.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=C.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const d=document.createElement("div");d.className="page",d.style.width=Math.floor(this.viewport.width)+"px",d.style.height=Math.floor(this.viewport.height)+"px",d.setAttribute("data-page-number",this.id),d.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(R=>{d.setAttribute("aria-label",R)}),this.div=d,m?.appendChild(d)}setPdfPage(u){this.pdfPage=u,this.pdfPageRotate=u.rotate,this.viewport=u.getViewport({scale:this.scale*b.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var u=this;return y(function*(){let m=null;try{yield u.annotationLayer.render(u.viewport,"display")}catch(g){m=g}finally{u.eventBus.dispatch("annotationlayerrendered",{source:u,pageNumber:u.id,error:m})}})()}_renderXfaLayer(){var u=this;return y(function*(){let m=null;try{const g=yield u.xfaLayer.render(u.viewport,"display");u.textHighlighter&&u._buildXfaTextContentItems(g.textDivs)}catch(g){m=g}finally{u.eventBus.dispatch("xfalayerrendered",{source:u,pageNumber:u.id,error:m})}})()}_buildXfaTextContentItems(u){var m=this;return y(function*(){const g=yield m.pdfPage.getTextContent(),d=[];for(const R of g.items)d.push(R.str);m.textHighlighter.setTextMapping(u,d),m.textHighlighter.enable()})()}_resetZoomLayer(u=!1){if(!this.zoomLayer)return;const m=this.zoomLayer.firstChild;this.paintedViewportMap.delete(m),m.width=0,m.height=0,u&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:u=!1,keepAnnotationLayer:m=!1,keepXfaLayer:g=!1}={}){this.cancelRendering({keepAnnotationLayer:m,keepXfaLayer:g}),this.renderingState=C.RenderingStates.INITIAL;const d=this.div;d.style.width=Math.floor(this.viewport.width)+"px",d.style.height=Math.floor(this.viewport.height)+"px";const R=d.childNodes,k=u&&this.zoomLayer||null,j=m&&this.annotationLayer?.div||null,$=g&&this.xfaLayer?.div||null;for(let Q=R.length-1;Q>=0;Q--){const K=R[Q];switch(K){case k:case j:case $:continue}K.remove()}d.removeAttribute("data-loaded"),j&&this.annotationLayer.hide(),$&&this.xfaLayer.hide(),k||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(Q=>{this.loadingIconDiv?.setAttribute("aria-label",Q)}),d.appendChild(this.loadingIconDiv)}update({scale:u=0,rotation:m=null,optionalContentConfigPromise:g=null}){if(this.scale=u||this.scale,"number"==typeof m&&(this.rotation=m),g instanceof Promise&&(this._optionalContentConfigPromise=g),this.viewport=this.viewport.clone({scale:this.scale*b.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone){const{style:k}=document.documentElement;k.setProperty("--zoom-factor",this.scale)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let R=!1;if(this.canvas&&this.maxCanvasPixels>0){const k=this.outputScale;(Math.floor(this.viewport.width)*k.sx|0)*(Math.floor(this.viewport.height)*k.sy|0)>this.maxCanvasPixels&&(R=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&R)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:u=!1,keepXfaLayer:m=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!u||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.xfaLayer&&(!m||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:u,redrawAnnotationLayer:m=!1,redrawXfaLayer:g=!1}){const d=this.viewport.width,R=this.viewport.height,k=this.div;u.style.width=u.parentNode.style.width=k.style.width=Math.floor(d)+"px",u.style.height=u.parentNode.style.height=k.style.height=Math.floor(R)+"px";const j=this.viewport.rotation-this.paintedViewportMap.get(u).rotation,$=Math.abs(j);let Q=1,K=1;if((90===$||270===$)&&(Q=R/d,K=d/R),u.style.transform=`rotate(${j}deg) scale(${Q}, ${K})`,this.textLayer){const re=this.textLayer.viewport,ue=Math.abs(this.viewport.rotation-re.rotation);let F=d/re.width;(90===ue||270===ue)&&(F=d/re.height);const a=this.textLayer.textLayerDiv;let e,s;switch(ue){case 0:e=s=0;break;case 90:e=0,s="-"+a.style.height;break;case 180:e="-"+a.style.width,s="-"+a.style.height;break;case 270:e="-"+a.style.width,s=0;break;default:console.error("Bad rotation value.")}a.style.transform=`rotate(${ue}deg) scale(${F}) translate(${e}, ${s})`,a.style.transformOrigin="0% 0%"}m&&this.annotationLayer&&this._renderAnnotationLayer(),g&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(u,m){return this.viewport.convertToPdfPoint(u,m)}toggleLoadingIconSpinner(u=!1){this.loadingIconDiv?.classList.toggle("notVisible",!u)}draw(){var u=this;this.renderingState!==C.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:m,pdfPage:g}=this;if(!g)return this.renderingState=C.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=C.RenderingStates.RUNNING;const d=document.createElement("div");d.style.width=m.style.width,d.style.height=m.style.height,d.classList.add("canvasWrapper"),this.annotationLayer?.div?m.insertBefore(d,this.annotationLayer.div):m.appendChild(d);let R=null;if(this.textLayerMode!==C.TextLayerMode.DISABLE&&this.textLayerFactory){const K=document.createElement("div");K.className="textLayer",K.style.width=d.style.width,K.style.height=d.style.height,this.annotationLayer?.div?m.insertBefore(K,this.annotationLayer.div):m.appendChild(K),R=this.textLayerFactory.createTextLayerBuilder(K,this.id-1,this.viewport,this.textLayerMode===C.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=R,T(this,n)!==b.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||=new Map,this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder(m,g,null,this.imageResourcesPath,T(this,n)===b.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap)),this.xfaLayer?.div&&m.appendChild(this.xfaLayer.div);let k=null;this.renderingQueue&&(k=K=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=C.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=C.RenderingStates.RUNNING,K()});K()});const j=function(){var K=y(function*(re=null){if($===u.paintTask&&(u.paintTask=null),re instanceof b.RenderingCancelledException)u._renderError=null;else if(u._renderError=re,u.renderingState=C.RenderingStates.FINISHED,u.loadingIconDiv&&(u.loadingIconDiv.remove(),delete u.loadingIconDiv),u._resetZoomLayer(!0),u.eventBus.dispatch("pagerendered",{source:u,pageNumber:u.id,cssTransform:!1,timestamp:performance.now(),error:u._renderError}),re)throw re});return function(){return K.apply(this,arguments)}}(),$=this.renderer===C.RendererType.SVG?this.paintOnSvg(d):this.paintOnCanvas(d);$.onRenderContinue=k,this.paintTask=$;const Q=$.promise.then(()=>j(null).then(()=>{if(R){const K=g.streamTextContent({includeMarkedContent:!0});R.setTextContentStream(K),R.render()}this.annotationLayer&&this._renderAnnotationLayer()}),function(K){return j(K)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(m,g,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=K=>{K.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(re=>{if(!re||!this.canvas)return;const fe=this.structTreeLayer.render(re);fe.classList.add("structTree"),this.canvas.appendChild(fe)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(g)),m.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),Q}paintOnCanvas(u){const m=(0,b.createPromiseCapability)(),g={promise:m.promise,onRenderContinue(a){a()},cancel(){F.cancel()}},d=this.viewport,R=document.createElement("canvas");R.hidden=!0;let k=!0;const j=function(){k&&(R.hidden=!1,k=!1)};u.appendChild(R),this.canvas=R;const $=R.getContext("2d",{alpha:!1}),Q=this.outputScale=new C.OutputScale;if(this.useOnlyCssZoom){const a=d.clone({scale:b.PixelsPerInch.PDF_TO_CSS_UNITS});Q.sx*=a.width/d.width,Q.sy*=a.height/d.height}if(this.maxCanvasPixels>0){const e=Math.sqrt(this.maxCanvasPixels/(d.width*d.height));Q.sx>e||Q.sy>e?(Q.sx=e,Q.sy=e,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const K=(0,C.approximateFraction)(Q.sx),re=(0,C.approximateFraction)(Q.sy);R.width=(0,C.roundToDivide)(d.width*Q.sx,K[0]),R.height=(0,C.roundToDivide)(d.height*Q.sy,re[0]),R.style.width=(0,C.roundToDivide)(d.width,K[1])+"px",R.style.height=(0,C.roundToDivide)(d.height,re[1])+"px",this.paintedViewportMap.set(R,d);const ue={canvasContext:$,transform:Q.scaled?[Q.sx,0,0,Q.sy,0,0]:null,viewport:this.viewport,annotationMode:T(this,n),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},F=this.pdfPage.render(ue);return F.onContinue=function(a){j(),g.onRenderContinue?g.onRenderContinue(a):a()},F.promise.then(function(){j(),m.resolve()},function(a){j(),m.reject(a)}),g}paintOnSvg(u){let m=!1;const g=()=>{if(m)throw new b.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},d=this.pdfPage,R=this.viewport.clone({scale:b.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:d.getOperatorList({annotationMode:T(this,n)}).then(j=>(g(),new b.SVGGraphics(d.commonObjs,d.objs).getSVG(j,R).then(Q=>{g(),this.svg=Q,this.paintedViewportMap.set(Q,R),Q.style.width=u.style.width,Q.style.height=u.style.height,this.renderingState=C.RenderingStates.FINISHED,u.appendChild(Q)}))),onRenderContinue(j){j()},cancel(){m=!0}}}setPageLabel(u){this.pageLabel="string"==typeof u?u:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(H,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.compatibilityParams=_.OptionKind=_.AppOptions=void 0;const x=Object.create(null);_.compatibilityParams=x;{const t=navigator.userAgent||"",n=navigator.platform||"",h=navigator.maxTouchPoints||1,S=/Android/.test(t);(/\b(iPad|iPhone|iPod)(?=;)/.test(t)||"MacIntel"===n&&h>1||S)&&(x.maxCanvasPixels=5242880)}const b={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};_.OptionKind=b;const C={annotationMode:{value:2,kind:b.VIEWER+b.PREFERENCE},cursorToolOnLoad:{value:0,kind:b.VIEWER+b.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:b.VIEWER},defaultZoomValue:{value:"",kind:b.VIEWER+b.PREFERENCE},disableHistory:{value:!1,kind:b.VIEWER},disablePageLabels:{value:!1,kind:b.VIEWER+b.PREFERENCE},enablePermissions:{value:!1,kind:b.VIEWER+b.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:b.VIEWER+b.PREFERENCE},enableScripting:{value:!0,kind:b.VIEWER+b.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:b.VIEWER},externalLinkTarget:{value:0,kind:b.VIEWER+b.PREFERENCE},historyUpdateUrl:{value:!1,kind:b.VIEWER+b.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:b.VIEWER+b.PREFERENCE},imageResourcesPath:{value:"./images/",kind:b.VIEWER},maxCanvasPixels:{value:16777216,compatibility:x.maxCanvasPixels,kind:b.VIEWER},pageColorsBackground:{value:"Canvas",kind:b.VIEWER+b.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:b.VIEWER+b.PREFERENCE},pdfBugEnabled:{value:!1,kind:b.VIEWER+b.PREFERENCE},printResolution:{value:150,kind:b.VIEWER},renderer:{value:"canvas",kind:b.VIEWER},sidebarViewOnLoad:{value:-1,kind:b.VIEWER+b.PREFERENCE},scrollModeOnLoad:{value:-1,kind:b.VIEWER+b.PREFERENCE},spreadModeOnLoad:{value:-1,kind:b.VIEWER+b.PREFERENCE},textLayerMode:{value:1,kind:b.VIEWER+b.PREFERENCE},useOnlyCssZoom:{value:!1,kind:b.VIEWER+b.PREFERENCE},viewerCssTheme:{value:0,kind:b.VIEWER+b.PREFERENCE},viewOnLoad:{value:0,kind:b.VIEWER+b.PREFERENCE},cMapPacked:{value:!0,kind:b.API},cMapUrl:{value:"../web/cmaps/",kind:b.API},disableAutoFetch:{value:!1,kind:b.API+b.PREFERENCE},disableFontFace:{value:!1,kind:b.API+b.PREFERENCE},disableRange:{value:!1,kind:b.API+b.PREFERENCE},disableStream:{value:!1,kind:b.API+b.PREFERENCE},docBaseUrl:{value:"",kind:b.API},enableXfa:{value:!0,kind:b.API+b.PREFERENCE},fontExtraProperties:{value:!1,kind:b.API},isEvalSupported:{value:!0,kind:b.API},maxImageSize:{value:-1,kind:b.API},pdfBug:{value:!1,kind:b.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:b.API},verbosity:{value:1,kind:b.API},workerPort:{value:null,kind:b.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:b.WORKER}};C.disablePreferences={value:!1,kind:b.VIEWER},C.locale={value:navigator.language||"en-US",kind:b.VIEWER},C.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:b.VIEWER},C.renderer.kind+=b.PREFERENCE;const A=Object.create(null);_.AppOptions=class v{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(n){const h=A[n];if(void 0!==h)return h;const S=C[n];return void 0!==S?S.compatibility??S.value:void 0}static getAll(n=null){const h=Object.create(null);for(const S in C){const u=C[S];if(n){if(!(n&u.kind))continue;if(n===b.PREFERENCE){const g=u.value,d=typeof g;if("boolean"===d||"string"===d||"number"===d&&Number.isInteger(g)){h[S]=g;continue}throw new Error(`Invalid type for preference: ${S}`)}}const m=A[S];h[S]=void 0!==m?m:u.compatibility??u.value}return h}static set(n,h){A[n]=h}static setAll(n){for(const h in n)A[h]=n[h]}static remove(n){delete A[n]}static _hasUserOptions(){return Object.keys(A).length>0}}},(H,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFRenderingQueue=void 0;var b=x(3),C=x(6);_.PDFRenderingQueue=class v{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(n){this.pdfViewer=n}setThumbnailViewer(n){this.pdfThumbnailViewer=n}isHighestPriority(n){return this.highestPriorityPage===n.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(n){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(n)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(n,h,S,u=!1){const m=n.views,g=m.length;if(0===g)return null;for(let $=0;$<g;$++){const Q=m[$].view;if(!this.isViewFinished(Q))return Q}const d=n.first.id,R=n.last.id;if(R-d+1>g){const $=n.ids;for(let Q=1,K=R-d;Q<K;Q++){const re=S?d+Q:R-Q;if($.has(re))continue;const fe=h[re-1];if(!this.isViewFinished(fe))return fe}}let k=S?R:d-2,j=h[k];return j&&!this.isViewFinished(j)||u&&(k+=S?1:-1,j=h[k],j&&!this.isViewFinished(j))?j:null}isViewFinished(n){return n.renderingState===C.RenderingStates.FINISHED}renderView(n){switch(n.renderingState){case C.RenderingStates.FINISHED:return!1;case C.RenderingStates.PAUSED:this.highestPriorityPage=n.renderingId,n.resume();break;case C.RenderingStates.RUNNING:this.highestPriorityPage=n.renderingId;break;case C.RenderingStates.INITIAL:this.highestPriorityPage=n.renderingId,n.draw().finally(()=>{this.renderHighestPriority()}).catch(h=>{h instanceof b.RenderingCancelledException||console.error(`renderView: "${h}"`)})}return!0}}},(H,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextHighlighter=void 0,_.TextHighlighter=class x{constructor({findController:C,eventBus:A,pageIndex:v}){this.findController=C,this.matches=[],this.eventBus=A,this.pageIdx=v,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(C,A){this.textDivs=C,this.textContentItemsStr=A}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=C=>{(C.pageIndex===this.pageIdx||-1===C.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(C,A){if(!C)return[];const{textContentItemsStr:v}=this;let t=0,n=0;const h=v.length-1,S=[];for(let u=0,m=C.length;u<m;u++){let g=C[u];for(;t!==h&&g>=n+v[t].length;)n+=v[t].length,t++;t===v.length&&console.error("Could not find a matching mapping");const d={begin:{divIdx:t,offset:g-n}};for(g+=A[u];t!==h&&g>n+v[t].length;)n+=v[t].length,t++;d.end={divIdx:t,offset:g-n},S.push(d)}return S}_renderMatches(C){if(0===C.length)return;const{findController:A,pageIdx:v}=this,{textContentItemsStr:t,textDivs:n}=this,h=v===A.selected.pageIdx,S=A.selected.matchIdx;let m=null;function d($,Q){const K=$.divIdx;return n[K].textContent="",R(K,0,$.offset,Q)}function R($,Q,K,re){let fe=n[$];if(fe.nodeType===Node.TEXT_NODE){const a=document.createElement("span");fe.parentNode.insertBefore(a,fe),a.appendChild(fe),n[$]=a,fe=a}const ue=t[$].substring(Q,K),F=document.createTextNode(ue);if(re){const a=document.createElement("span");return a.className=`${re} appended`,a.appendChild(F),fe.appendChild(a),re.includes("selected")?a.offsetLeft:0}return fe.appendChild(F),0}let k=S,j=k+1;if(A.state.highlightAll)k=0,j=C.length;else if(!h)return;for(let $=k;$<j;$++){const Q=C[$],K=Q.begin,re=Q.end,fe=h&&$===S,ue=fe?" selected":"";let F=0;if(m&&K.divIdx===m.divIdx?R(m.divIdx,m.offset,K.offset):(null!==m&&R(m.divIdx,m.offset,undefined),d(K)),K.divIdx===re.divIdx)F=R(K.divIdx,K.offset,re.offset,"highlight"+ue);else{F=R(K.divIdx,K.offset,undefined,"highlight begin"+ue);for(let a=K.divIdx+1,e=re.divIdx;a<e;a++)n[a].className="highlight middle"+ue;d(re,"highlight end"+ue)}m=re,fe&&A.scrollMatchIntoView({element:n[K.divIdx],selectedLeft:F,pageIndex:v,matchIndex:S})}m&&R(m.divIdx,m.offset,undefined)}_updateMatches(){if(!this.enabled)return;const{findController:C,matches:A,pageIdx:v}=this,{textContentItemsStr:t,textDivs:n}=this;let h=-1;for(let m=0,g=A.length;m<g;m++){const d=A[m];for(let k=Math.max(h,d.begin.divIdx),j=d.end.divIdx;k<=j;k++){const $=n[k];$.textContent=t[k],$.className=""}h=d.end.divIdx+1}C?.highlightMatches&&(this.matches=this._convertMatches(C.pageMatches[v]||null,C.pageMatchesLength[v]||null),this._renderMatches(this.matches))}}},(H,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DownloadManager=void 0;var b=x(3);function C(v,t){const n=document.createElement("a");if(!n.click)throw new Error('DownloadManager: "a.click()" is not supported.');n.href=v,n.target="_parent","download"in n&&(n.download=t),(document.body||document.documentElement).appendChild(n),n.click(),n.remove()}_.DownloadManager=class A{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(t,n){(0,b.createValidAbsoluteUrl)(t,"http://example.com")?C(t+"#pdfjs.action=download",n):console.error(`downloadUrl - not a valid URL: ${t}`)}downloadData(t,n,h){C(URL.createObjectURL(new Blob([t],{type:h})),n)}openOrDownloadData(t,n,h){const S=(0,b.isPdfFile)(h),u=S?"application/pdf":"";if(S){let g,m=this._openBlobUrls.get(t);m||(m=URL.createObjectURL(new Blob([n],{type:u})),this._openBlobUrls.set(t,m)),g="?file="+encodeURIComponent(m+"#"+h);try{return window.open(g),!0}catch(d){console.error(`openOrDownloadData: ${d}`),URL.revokeObjectURL(m),this._openBlobUrls.delete(t)}}return this.downloadData(n,h,u),!1}download(t,n,h,S="download"){C(URL.createObjectURL(t),h)}}},(H,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WaitOnType=_.EventBus=_.AutomationEventBus=void 0,_.waitOnEventOrTimeout=function b({target:v,name:t,delay:n=0}){return new Promise(function(h,S){if("object"!=typeof v||!t||"string"!=typeof t||!(Number.isInteger(n)&&n>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function u(R){v instanceof C?v._off(t,m):v.removeEventListener(t,m),d&&clearTimeout(d),h(R)}const m=u.bind(null,x.EVENT);v instanceof C?v._on(t,m):v.addEventListener(t,m);const g=u.bind(null,x.TIMEOUT),d=setTimeout(g,n)})};const x={EVENT:"event",TIMEOUT:"timeout"};_.WaitOnType=x;class C{constructor(){this._listeners=Object.create(null)}on(t,n,h=null){this._on(t,n,{external:!0,once:h?.once})}off(t,n,h=null){this._off(t,n,{external:!0,once:h?.once})}dispatch(t,n){const h=this._listeners[t];if(!h||0===h.length)return;let S;for(const{listener:u,external:m,once:g}of h.slice(0))g&&this._off(t,u),m?(S||=[]).push(u):u(n);if(S){for(const u of S)u(n);S=null}}_on(t,n,h=null){(this._listeners[t]||=[]).push({listener:n,external:!0===h?.external,once:!0===h?.once})}_off(t,n,h=null){const S=this._listeners[t];if(S)for(let u=0,m=S.length;u<m;u++)if(S[u].listener===n)return void S.splice(u,1)}}_.EventBus=C,_.AutomationEventBus=class A extends C{dispatch(t,n){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(H,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GenericL10n=void 0,x(19);var b=x(4);const C=document.webL10n;_.GenericL10n=class A{constructor(t){this._lang=t,this._ready=new Promise((n,h)=>{C.setLanguage((0,b.fixupLangCode)(t),()=>{n(C)})})}getLanguage(){var t=this;return y(function*(){return(yield t._ready).getLanguage()})()}getDirection(){var t=this;return y(function*(){return(yield t._ready).getDirection()})()}get(t,n=null,h=(0,b.getL10nFallback)(t,n)){var S=this;return y(function*(){return(yield S._ready).get(t,n,h)})()}translate(t){var n=this;return y(function*(){return(yield n._ready).translate(t)})()}}},()=>{document.webL10n=function(H,_,x){var b={},C="",A="textContent",v="",t={},n="loading",h=!0;function d(a,e,s){e=e||function(p){},s=s||function(){};var l=new XMLHttpRequest;l.open("GET",a,h),l.overrideMimeType&&l.overrideMimeType("text/plain; charset=utf-8"),l.onreadystatechange=function(){4==l.readyState&&(200==l.status||0===l.status?e(l.responseText):s())},l.onerror=s,l.ontimeout=s;try{l.send(null)}catch{s()}}function k(a,e){a&&(a=a.toLowerCase()),e=e||function(){},function j(){b={},C="",v=""}(),v=a;var s=function S(){return _.querySelectorAll('link[type="application/l10n"]')}(),l=s.length;if(0!==l){var L,q=0;L=function(){++q>=l&&(e(),n="complete")};for(var Y=0;Y<l;Y++)new B(s[Y]).load(a,L)}else{var f=function u(){var a=_.querySelector('script[type="application/l10n"]');return a?JSON.parse(a.innerHTML):null}();if(f&&f.locales&&f.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(b=f.locales[a])){var p=f.default_locale.toLowerCase();for(var c in f.locales){if((c=c.toLowerCase())===a){b=f.locales[a];break}c===p&&(b=f.locales[p])}}e()}else console.log("no resource to load, early way out");n="complete"}function B(te){var ie=te.href;this.load=function(pe,Ae){!function R(a,e,s,l){var f=a.replace(/[^\/]*$/,"")||"./";function p(L){return L.lastIndexOf("\\")<0?L:L.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}d(a,function(L){C+=L,function c(L,q){var B={},Y=/^\s*|\s*$/,X=/^\s*#|^\s*$/,te=/^\s*\[(.*)\]\s*$/,ie=/^\s*@import\s+url\((.*)\)\s*$/i,pe=/^([^=\s]*)\s*=\s*(.+)$/;function Ae(ye,he,ke){var Te=ye.replace(Y,"").split(/[\r\n]+/),me="*",le=e.split("-",1)[0],ge=!1,Pe="";!function se(){for(;;){if(!Te.length)return void ke();var M=Te.shift();if(!X.test(M)){if(he){if(Pe=te.exec(M)){me=Pe[1].toLowerCase(),ge="*"!==me&&me!==e&&me!==le;continue}if(ge)continue;if(Pe=ie.exec(M))return void Ce(f+Pe[1],se)}var Z=M.match(pe);Z&&3==Z.length&&(B[Z[1]]=p(Z[2]))}}}()}function Ce(ye,he){d(ye,function(ke){Ae(ke,!1,he)},function(){console.warn(ye+" not found."),he()})}Ae(L,!0,function(){q(B)})}(L,function(q){for(var B in q){var Y,X,te=B.lastIndexOf(".");te>0?(Y=B.substring(0,te),X=B.substring(te+1)):(Y=B,X=A),b[Y]||(b[Y]={}),b[Y][X]=q[B]}s&&s()})},l)}(ie,pe,Ae,function(){console.warn(ie+" not found."),console.warn('"'+pe+'" resource not found'),v="",Ae()})}}}function Q(a,e,s){var l=b[a];if(!l){if(console.warn("#"+a+" is undefined."),!s)return null;l=s}var f={};for(var p in l){var c=l[p];c=re(c=K(c,e,a,p),e,a),f[p]=c}return f}function K(a,e,s,l){var p=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(a);if(!p||!p.length)return a;var q,c=p[1],L=p[2];return e&&L in e?q=e[L]:L in b&&(q=b[L]),c in t&&(a=(0,t[c])(a,q,s,l)),a}function re(a,e,s){return a.replace(/\{\{\s*(.+?)\s*\}\}/g,function(f,p){return e&&p in e?e[p]:p in b?b[p]:(console.log("argument {{"+p+"}} for #"+s+" is undefined."),f)})}function fe(a){var e=function g(a){if(!a)return{};var e=a.getAttribute("data-l10n-id"),s=a.getAttribute("data-l10n-args"),l={};if(s)try{l=JSON.parse(s)}catch{console.warn("could not parse arguments for #"+e)}return{id:e,args:l}}(a);if(e.id){var s=Q(e.id,e.args);if(!s)return void console.warn("#"+e.id+" is undefined.");if(s[A]){if(0===function ue(a){if(a.children)return a.children.length;if(typeof a.childElementCount<"u")return a.childElementCount;for(var e=0,s=0;s<a.childNodes.length;s++)e+=1===a.nodeType?1:0;return e}(a))a[A]=s[A];else{for(var l=a.childNodes,f=!1,p=0,c=l.length;p<c;p++)3===l[p].nodeType&&/\S/.test(l[p].nodeValue)&&(f?l[p].nodeValue="":(l[p].nodeValue=s[A],f=!0));if(!f){var L=_.createTextNode(s[A]);a.insertBefore(L,a.firstChild)}}delete s[A]}for(var q in s)a[q]=s[q]}}return t.plural=function(a,e,s,l){var f=parseFloat(e);if(isNaN(f)||l!=A)return a;t._pluralRules||(t._pluralRules=function $(a){function s(c,L){return-1!==L.indexOf(c)}function l(c,L,q){return L<=c&&c<=q}var f={0:function(c){return"other"},1:function(c){return l(c%100,3,10)?"few":0===c?"zero":l(c%100,11,99)?"many":2==c?"two":1==c?"one":"other"},2:function(c){return 0!==c&&c%10==0?"many":2==c?"two":1==c?"one":"other"},3:function(c){return 1==c?"one":"other"},4:function(c){return l(c,0,1)?"one":"other"},5:function(c){return l(c,0,2)&&2!=c?"one":"other"},6:function(c){return 0===c?"zero":c%10==1&&c%100!=11?"one":"other"},7:function(c){return 2==c?"two":1==c?"one":"other"},8:function(c){return l(c,3,6)?"few":l(c,7,10)?"many":2==c?"two":1==c?"one":"other"},9:function(c){return 0===c||1!=c&&l(c%100,1,19)?"few":1==c?"one":"other"},10:function(c){return l(c%10,2,9)&&!l(c%100,11,19)?"few":c%10!=1||l(c%100,11,19)?"other":"one"},11:function(c){return l(c%10,2,4)&&!l(c%100,12,14)?"few":c%10==0||l(c%10,5,9)||l(c%100,11,14)?"many":c%10==1&&c%100!=11?"one":"other"},12:function(c){return l(c,2,4)?"few":1==c?"one":"other"},13:function(c){return l(c%10,2,4)&&!l(c%100,12,14)?"few":1!=c&&l(c%10,0,1)||l(c%10,5,9)||l(c%100,12,14)?"many":1==c?"one":"other"},14:function(c){return l(c%100,3,4)?"few":c%100==2?"two":c%100==1?"one":"other"},15:function(c){return 0===c||l(c%100,2,10)?"few":l(c%100,11,19)?"many":1==c?"one":"other"},16:function(c){return c%10==1&&11!=c?"one":"other"},17:function(c){return 3==c?"few":0===c?"zero":6==c?"many":2==c?"two":1==c?"one":"other"},18:function(c){return 0===c?"zero":l(c,0,2)&&0!==c&&2!=c?"one":"other"},19:function(c){return l(c,2,10)?"few":l(c,0,1)?"one":"other"},20:function(c){return!l(c%10,3,4)&&c%10!=9||l(c%100,10,19)||l(c%100,70,79)||l(c%100,90,99)?c%1e6==0&&0!==c?"many":c%10!=2||s(c%100,[12,72,92])?c%10!=1||s(c%100,[11,71,91])?"other":"one":"two":"few"},21:function(c){return 0===c?"zero":1==c?"one":"other"},22:function(c){return l(c,0,1)||l(c,11,99)?"one":"other"},23:function(c){return l(c%10,1,2)||c%20==0?"one":"other"},24:function(c){return l(c,3,10)||l(c,13,19)?"few":s(c,[2,12])?"two":s(c,[1,11])?"one":"other"}},p={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[a.replace(/-.*$/,"")];return p in f?f[p]:(console.warn("plural form unknown for ["+a+"]"),function(){return"other"})}(v));var p="["+t._pluralRules(f)+"]";return 0===f&&s+"[zero]"in b?a=b[s+"[zero]"][l]:1==f&&s+"[one]"in b?a=b[s+"[one]"][l]:2==f&&s+"[two]"in b?a=b[s+"[two]"][l]:s+p in b?a=b[s+p][l]:s+"[other]"in b&&(a=b[s+"[other]"][l]),a},{get:function(a,e,s){var p,l=a.lastIndexOf("."),f=A;l>0&&(f=a.substring(l+1),a=a.substring(0,l)),s&&((p={})[f]=s);var c=Q(a,e,p);return c&&f in c?c[f]:"{{"+a+"}}"},getData:function(){return b},getText:function(){return C},getLanguage:function(){return v},setLanguage:function(a,e){k(a,function(){e&&e()})},getDirection:function(){var e=v.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(e)>=0?"rtl":"ltr"},translate:function F(a){for(var e=function m(a){return a?a.querySelectorAll("*[data-l10n-id]"):[]}(a=a||_.documentElement),s=e.length,l=0;l<s;l++)fe(e[l]);fe(a)},getReadyState:function(){return n},ready:function(a){a&&("complete"==n||"interactive"==n?H.setTimeout(function(){a()}):_.addEventListener&&_.addEventListener("localized",function e(){_.removeEventListener("localized",e),a()}))}}}(window,document)},(H,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFFindController=_.FindState=void 0;var b=x(6),C=x(3),A=x(21);const v={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};_.FindState=v;const t=250,S={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},u=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),m=[...u.values()].map(oe=>String.fromCharCode(oe)).join(""),g=/\p{M}+/gu,d=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,R=/([^\p{M}])\p{M}*$/u,k=/^\p{M}*([^\p{M}])/u;let j=null;function $(oe){if(!j){const Ne=Object.keys(S).join("");j=new RegExp(`([${Ne}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}const de=[];let we;for(;null!==(we=g.exec(oe));)de.push([we[0].length,we.index]);let Ee=oe.normalize("NFD");const _e=[[0,0]];let Le=0,xe=0,Re=0,Oe=0,Ie=!1;return Ee=Ee.replace(j,(Ne,Ve,Be,ee,ne,J)=>{if(J-=Re,Ve){const Se=S[Ne],Me=Se.length;for(let De=1;De<Me;De++)_e.push([J-xe+De,xe-De]);return xe-=Me-1,Se}if(Be){const Se=Be.endsWith("\n"),Me=Se?Be.length-2:Be.length;Ie=!0;let De=Me;J+Oe===de[Le]?.[1]&&(De-=de[Le][0],++Le);for(let Ue=1;Ue<De+1;Ue++)_e.push([J-1-xe+Ue,xe-Ue]);return xe-=De,Re+=De,Se?(_e.push([(J+=Me-1)-xe+1,1+xe]),xe+=1,Re+=1,Oe+=1,Be.slice(0,Me)):Be}return ee?(_e.push([J-xe+1,1+xe]),xe+=1,Re+=1,Oe+=1,ee.charAt(0)):(_e.push([J-xe+1,xe-1]),xe-=1,Re+=1,Oe+=1," ")}),_e.push([Ee.length,xe]),[Ee,_e,Ie]}function Q(oe,de,we){if(!oe)return[de,we];const Ee=de,_e=de+we;let Le=(0,b.binarySearchFirstItem)(oe,Re=>Re[0]>=Ee);oe[Le][0]>Ee&&--Le;let xe=(0,b.binarySearchFirstItem)(oe,Re=>Re[0]>=_e,Le);return oe[xe][0]>_e&&--xe,[Ee+oe[Le][1],we+oe[xe][1]-oe[Le][1]]}var K=new WeakSet,re=new WeakSet,fe=new WeakMap,ue=new WeakSet,F=new WeakSet,a=new WeakSet,e=new WeakSet,s=new WeakSet,l=new WeakSet,f=new WeakSet,p=new WeakSet,c=new WeakSet,L=new WeakSet,q=new WeakSet,B=new WeakSet,Y=new WeakSet,X=new WeakSet,te=new WeakSet,ie=new WeakSet,pe=new WeakSet;function Ce(oe){if(!oe)return;const de=this._pdfDocument,{type:we}=oe;(null===this._state||E(this,ue,ke).call(this,oe))&&(this._dirtyMatch=!0),this._state=oe,"highlightallchange"!==we&&E(this,pe,Fe).call(this,v.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||de&&this._pdfDocument!==de)return;E(this,l,Pe).call(this);const Ee=!this._highlightMatches,_e=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),we?this._dirtyMatch?E(this,c,Z).call(this):"again"===we?(E(this,c,Z).call(this),Ee&&this._state.highlightAll&&E(this,p,M).call(this)):"highlightallchange"===we?(_e?E(this,c,Z).call(this):this._highlightMatches=!0,E(this,p,M).call(this)):E(this,c,Z).call(this):this._findTimeout=setTimeout(()=>{E(this,c,Z).call(this),this._findTimeout=null},t)})}function ye(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,C.createPromiseCapability)()}function he(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=$(this._state.query)),this._normalizedQuery}function ke(oe){if(oe.query!==this._state.query)return!0;switch(oe.type){case"again":const de=this._selected.pageIdx+1,we=this._linkService;return de>=1&&de<=we.pagesCount&&de!==we.page&&!we.isPageVisible(de);case"highlightallchange":return!1}return!0}function Te(oe,de,we){let Ee=oe.slice(0,de).match(R);if(Ee){const _e=oe.charCodeAt(de),Le=Ee[1].charCodeAt(0);if((0,A.getCharacterType)(_e)===(0,A.getCharacterType)(Le))return!1}if(Ee=oe.slice(de+we).match(k),Ee){const _e=oe.charCodeAt(de+we-1),Le=Ee[1].charCodeAt(0);if((0,A.getCharacterType)(_e)===(0,A.getCharacterType)(Le))return!1}return!0}function me(oe,de,we,Ee){const _e=[],Le=[],xe=this._pageDiffs[we];let Re;for(;null!==(Re=oe.exec(Ee));){if(de&&!E(this,F,Te).call(this,Ee,Re.index,Re[0].length))continue;const[Oe,Ie]=Q(xe,Re.index,Re[0].length);Ie&&(_e.push(Oe),Le.push(Ie))}this._pageMatches[we]=_e,this._pageMatchesLength[we]=Le}function le(oe,de){const{matchDiacritics:we}=this._state;let Ee=!1;return(oe=oe.replace(d,(Le,xe,Re,Oe,Ie,Ne)=>xe?`[ ]*\\${xe}[ ]*`:Re?`[ ]*${Re}[ ]*`:Oe?"[ ]+":we?Ie||Ne:Ie?u.has(Ie.charCodeAt(0))?Ie:"":de?(Ee=!0,`${Ne}\\p{M}*`):Ne)).endsWith("[ ]*")&&(oe=oe.slice(0,oe.length-"[ ]*".length)),we&&de&&(Ee=!0,oe=`${oe}(?=[${m}]|[^\\p{M}]|$)`),[Ee,oe]}function ge(oe){let de=T(this,fe);if(0===de.length)return;const{caseSensitive:we,entireWord:Ee,phraseSearch:_e}=this._state,Le=this._pageContents[oe],xe=this._hasDiacritics[oe];let Re=!1;if(_e)[Re,de]=E(this,e,le).call(this,de,xe);else{const Ne=de.match(/\S+/g);Ne&&(de=Ne.sort().reverse().map(Ve=>{const[Be,ee]=E(this,e,le).call(this,Ve,xe);return Re||=Be,`(${ee})`}).join("|"))}de=new RegExp(de,`g${Re?"u":""}${we?"":"i"}`),E(this,a,me).call(this,de,Ee,oe,Le),this._state.highlightAll&&E(this,f,se).call(this,oe),this._resumePageIdx===oe&&(this._resumePageIdx=null,E(this,q,be).call(this));const Ie=this._pageMatches[oe].length;Ie>0&&(this._matchesCountTotal+=Ie,E(this,ie,ve).call(this))}function Pe(){if(this._extractTextPromises.length>0)return;let oe=Promise.resolve();for(let de=0,we=this._linkService.pagesCount;de<we;de++){const Ee=(0,C.createPromiseCapability)();this._extractTextPromises[de]=Ee.promise,oe=oe.then(()=>this._pdfDocument.getPage(de+1).then(_e=>_e.getTextContent()).then(_e=>{const Le=[];for(const xe of _e.items)Le.push(xe.str),xe.hasEOL&&Le.push("\n");[this._pageContents[de],this._pageDiffs[de],this._hasDiacritics[de]]=$(Le.join("")),Ee.resolve()},_e=>{console.error(`Unable to get text content for page ${de+1}`,_e),this._pageContents[de]="",this._pageDiffs[de]=null,this._hasDiacritics[de]=!1,Ee.resolve()}))}}function se(oe){this._scrollMatches&&this._selected.pageIdx===oe&&(this._linkService.page=oe+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:oe})}function M(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function Z(){const oe=this._state.findPrevious,de=this._linkService.page-1,we=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=de,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,E(this,p,M).call(this);for(let _e=0;_e<we;_e++)this._pendingFindMatches.has(_e)||(this._pendingFindMatches.add(_e),this._extractTextPromises[_e].then(()=>{this._pendingFindMatches.delete(_e),E(this,s,ge).call(this,_e)}))}if(""===T(this,fe))return void E(this,pe,Fe).call(this,v.FOUND);if(this._resumePageIdx)return;const Ee=this._offset;if(this._pagesToSearch=we,null!==Ee.matchIdx){if(!oe&&Ee.matchIdx+1<this._pageMatches[Ee.pageIdx].length||oe&&Ee.matchIdx>0)return Ee.matchIdx=oe?Ee.matchIdx-1:Ee.matchIdx+1,void E(this,Y,I).call(this,!0);E(this,B,z).call(this,oe)}E(this,q,be).call(this)}function ce(oe){const de=this._offset,we=oe.length,Ee=this._state.findPrevious;return we?(de.matchIdx=Ee?we-1:0,E(this,Y,I).call(this,!0),!0):(E(this,B,z).call(this,Ee),!!(de.wrapped&&(de.matchIdx=null,this._pagesToSearch<0))&&(E(this,Y,I).call(this,!1),!0))}function be(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let oe=null;do{const de=this._offset.pageIdx;if(oe=this._pageMatches[de],!oe){this._resumePageIdx=de;break}}while(!E(this,L,ce).call(this,oe))}function z(oe){const de=this._offset,we=this._linkService.pagesCount;de.pageIdx=oe?de.pageIdx-1:de.pageIdx+1,de.matchIdx=null,this._pagesToSearch--,(de.pageIdx>=we||de.pageIdx<0)&&(de.pageIdx=oe?we-1:0,de.wrapped=!0)}function I(oe=!1){let de=v.NOT_FOUND;const we=this._offset.wrapped;if(this._offset.wrapped=!1,oe){const Ee=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,de=we?v.WRAPPED:v.FOUND,-1!==Ee&&Ee!==this._selected.pageIdx&&E(this,f,se).call(this,Ee)}E(this,pe,Fe).call(this,de,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,E(this,f,se).call(this,this._selected.pageIdx))}function U(oe){const de=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||de&&this._pdfDocument!==de||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),E(this,pe,Fe).call(this,v.FOUND),this._highlightMatches=!1,E(this,p,M).call(this))})}function ae(){const{pageIdx:oe,matchIdx:de}=this._selected;let we=0,Ee=this._matchesCountTotal;if(-1!==de){for(let _e=0;_e<oe;_e++)we+=this._pageMatches[_e]?.length||0;we+=de+1}return(we<1||we>Ee)&&(we=Ee=0),{current:we,total:Ee}}function ve(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:E(this,te,ae).call(this)})}function Fe(oe,de=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:oe,previous:de,matchesCount:E(this,te,ae).call(this),rawQuery:this._state?.query??null})}_.PDFFindController=class Ae{constructor({linkService:de,eventBus:we}){O(this,pe),O(this,ie),O(this,te),O(this,X),O(this,Y),O(this,B),O(this,q),O(this,L),O(this,c),O(this,p),O(this,f),O(this,l),O(this,s),O(this,e),O(this,a),O(this,F),O(this,ue),w(this,fe,{get:he,set:void 0}),O(this,re),O(this,K),this._linkService=de,this._eventBus=we,E(this,re,ye).call(this),we._on("find",E(this,K,Ce).bind(this)),we._on("findbarclose",E(this,X,U).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(de){this._pdfDocument&&E(this,re,ye).call(this),de&&(this._pdfDocument=de,this._firstPageCapability.resolve())}scrollMatchIntoView({element:de=null,selectedLeft:we=0,pageIndex:Ee=-1,matchIndex:_e=-1}){this._scrollMatches&&de&&-1!==_e&&_e===this._selected.matchIdx&&-1!==Ee&&Ee===this._selected.pageIdx&&(this._scrollMatches=!1,(0,b.scrollIntoView)(de,{top:-50,left:we+-400},!0))}}},(H,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CharacterType=void 0,_.getCharacterType=function g(d){return function b(d){return d<11904}(d)?function C(d){return 0==(65408&d)}(d)?function t(d){return 32===d||9===d||13===d||10===d}(d)?x.SPACE:function A(d){return d>=97&&d<=122||d>=65&&d<=90}(d)||function v(d){return d>=48&&d<=57}(d)||95===d?x.ALPHA_LETTER:x.PUNCT:function m(d){return 3584==(65408&d)}(d)?x.THAI_LETTER:160===d?x.SPACE:x.ALPHA_LETTER:function n(d){return d>=13312&&d<=40959||d>=63744&&d<=64255}(d)?x.HAN_LETTER:function h(d){return d>=12448&&d<=12543}(d)?x.KATAKANA_LETTER:function S(d){return d>=12352&&d<=12447}(d)?x.HIRAGANA_LETTER:function u(d){return d>=65376&&d<=65439}(d)?x.HALFWIDTH_KATAKANA_LETTER:x.ALPHA_LETTER};const x={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};_.CharacterType=x},(H,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFHistory=void 0,_.isDestArraysEqual=u,_.isDestHashesEqual=S;var b=x(6),C=x(17);function n(){return document.location.hash}function S(m,g){return"string"==typeof m&&"string"==typeof g&&(m===g||(0,b.parseQueryString)(m).get("nameddest")===g)}function u(m,g){function d(R,k){if(typeof R!=typeof k||Array.isArray(R)||Array.isArray(k))return!1;if(null!==R&&"object"==typeof R&&null!==k){if(Object.keys(R).length!==Object.keys(k).length)return!1;for(const j in R)if(!d(R[j],k[j]))return!1;return!0}return R===k||Number.isNaN(R)&&Number.isNaN(k)}if(!Array.isArray(m)||!Array.isArray(g)||m.length!==g.length)return!1;for(let R=0,k=m.length;R<k;R++)if(!d(m[R],g[R]))return!1;return!0}_.PDFHistory=class h{constructor({linkService:g,eventBus:d}){this.linkService=g,this.eventBus=d,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",R=>{this._isPagesLoaded=!!R.pagesCount},{once:!0})})}initialize({fingerprint:g,resetHistory:d=!1,updateUrl:R=!1}){if(!g||"string"!=typeof g)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const k=""!==this._fingerprint&&this._fingerprint!==g;this._fingerprint=g,this._updateUrl=!0===R,this._initialized=!0,this._bindEvents();const j=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=n(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(j,!0)||d){const{hash:Q,page:K,rotation:re}=this._parseCurrentHash(!0);return!Q||k||d?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:Q,page:K,rotation:re},!0)}const $=j.destination;this._updateInternalState($,j.uid,!0),void 0!==$.rotation&&(this._initialRotation=$.rotation),$.dest?(this._initialBookmark=JSON.stringify($.dest),this._destination.page=null):$.hash?this._initialBookmark=$.hash:$.page&&(this._initialBookmark=`page=${$.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:g=null,explicitDest:d,pageNumber:R}){if(!this._initialized)return;if(g&&"string"!=typeof g)return void console.error(`PDFHistory.push: "${g}" is not a valid namedDest parameter.`);if(!Array.isArray(d))return void console.error(`PDFHistory.push: "${d}" is not a valid explicitDest parameter.`);if(!this._isValidPage(R)&&(null!==R||this._destination))return void console.error(`PDFHistory.push: "${R}" is not a valid pageNumber parameter.`);const k=g||JSON.stringify(d);if(!k)return;let j=!1;if(this._destination&&(S(this._destination.hash,k)||u(this._destination.dest,d))){if(this._destination.page)return;j=!0}this._popStateInProgress&&!j||(this._pushOrReplaceState({dest:d,hash:k,page:R,rotation:this.linkService.rotation},j),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(g){if(this._initialized){if(!this._isValidPage(g))return void console.error(`PDFHistory.pushPage: "${g}" is not a valid page number.`);this._destination?.page!==g&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${g}`,page:g,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const g=window.history.state;this._isValidState(g)&&g.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const g=window.history.state;this._isValidState(g)&&g.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(g,d=!1){const R=d||!this._destination,k={fingerprint:this._fingerprint,uid:R?this._uid:this._uid+1,destination:g};let j;if(this._updateInternalState(g,k.uid),this._updateUrl&&g?.hash){const $=document.location.href.split("#")[0];$.startsWith("file://")||(j=`${$}#${g.hash}`)}R?window.history.replaceState(k,"",j):window.history.pushState(k,"",j)}_tryPushCurrentPosition(g=!1){if(!this._position)return;let d=this._position;if(g&&(d=Object.assign(Object.create(null),this._position),d.temporary=!0),!this._destination)return void this._pushOrReplaceState(d);if(this._destination.temporary)return void this._pushOrReplaceState(d,!0);if(this._destination.hash===d.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let R=!1;if(this._destination.page>=d.first&&this._destination.page<=d.page){if(void 0!==this._destination.dest||!this._destination.first)return;R=!0}this._pushOrReplaceState(d,R)}_isValidPage(g){return Number.isInteger(g)&&g>0&&g<=this.linkService.pagesCount}_isValidState(g,d=!1){if(!g)return!1;if(g.fingerprint!==this._fingerprint){if(!d)return!1;{if("string"!=typeof g.fingerprint||g.fingerprint.length!==this._fingerprint.length)return!1;const[R]=performance.getEntriesByType("navigation");if("reload"!==R?.type)return!1}}return!(!Number.isInteger(g.uid)||g.uid<0||null===g.destination||"object"!=typeof g.destination)}_updateInternalState(g,d,R=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),R&&g?.temporary&&delete g.temporary,this._destination=g,this._uid=d,this._maxUid=Math.max(this._maxUid,d),this._numPositionUpdates=0}_parseCurrentHash(g=!1){const d=unescape(n()).substring(1),R=(0,b.parseQueryString)(d),k=R.get("nameddest")||"";let j=0|R.get("page");return(!this._isValidPage(j)||g&&k.length>0)&&(j=null),{hash:d,page:j,rotation:this.linkService.rotation}}_updateViewarea({location:g}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:g.pdfOpenParams.substring(1),page:this.linkService.page,first:g.pageNumber,rotation:g.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:g}){const d=n(),R=this._currentHash!==d;if(this._currentHash=d,!g){this._uid++;const{hash:j,page:$,rotation:Q}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:j,page:$,rotation:Q},!0)}if(!this._isValidState(g))return;this._popStateInProgress=!0,R&&(this._blockHashChange++,(0,C.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const k=g.destination;this._updateInternalState(k,g.uid,!0),(0,b.isValidRotation)(k.rotation)&&(this.linkService.rotation=k.rotation),k.dest?this.linkService.goToDestination(k.dest):k.hash?this.linkService.setHash(k.hash):k.page&&(this.linkService.page=k.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(H,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFScriptingManager=void 0;var b=x(6),C=x(3);_.PDFScriptingManager=class A{constructor({eventBus:t,sandboxBundleSrc:n=null,scriptingFactory:h=null,docPropertiesLookup:S=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=t,this._sandboxBundleSrc=n,this._scriptingFactory=h,this._docPropertiesLookup=S,this._scriptingFactory||window.addEventListener("updatefromsandbox",u=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:u.detail})})}setViewer(t){this._pdfViewer=t}setDocument(t){var n=this;return y(function*(){if(n._pdfDocument&&(yield n._destroyScripting()),n._pdfDocument=t,!t)return;const[h,S,u]=yield Promise.all([t.getFieldObjects(),t.getCalculationOrderIds(),t.getJSActions()]);if(h||u){if(t===n._pdfDocument){try{n._scripting=n._createScripting()}catch(m){return console.error(`PDFScriptingManager.setDocument: "${m?.message}".`),void(yield n._destroyScripting())}n._internalEvents.set("updatefromsandbox",m=>{m?.source===window&&n._updateFromSandbox(m.detail)}),n._internalEvents.set("dispatcheventinsandbox",m=>{n._scripting?.dispatchEventInSandbox(m.detail)}),n._internalEvents.set("pagechanging",({pageNumber:m,previous:g})=>{m!==g&&(n._dispatchPageClose(g),n._dispatchPageOpen(m))}),n._internalEvents.set("pagerendered",({pageNumber:m})=>{n._pageOpenPending.has(m)&&m===n._pdfViewer.currentPageNumber&&n._dispatchPageOpen(m)}),n._internalEvents.set("pagesdestroy",function(){var m=y(function*(g){yield n._dispatchPageClose(n._pdfViewer.currentPageNumber),yield n._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),n._closeCapability?.resolve()});return function(g){return m.apply(this,arguments)}}()),n._domEvents.set("mousedown",m=>{n._mouseState.isDown=!0}),n._domEvents.set("mouseup",m=>{n._mouseState.isDown=!1});for(const[m,g]of n._internalEvents)n._eventBus._on(m,g);for(const[m,g]of n._domEvents)window.addEventListener(m,g,!0);try{const m=yield n._getDocProperties();if(t!==n._pdfDocument)return;yield n._scripting.createSandbox({objects:h,calculationOrder:S,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...m,actions:u}}),n._eventBus.dispatch("sandboxcreated",{source:n})}catch(m){return console.error(`PDFScriptingManager.setDocument: "${m?.message}".`),void(yield n._destroyScripting())}yield n._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield n._dispatchPageOpen(n._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{t===n._pdfDocument&&(n._ready=!0)})}}else yield n._destroyScripting()})()}dispatchWillSave(t){var n=this;return y(function*(){return n._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(t){var n=this;return y(function*(){return n._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(t){var n=this;return y(function*(){return n._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(t){var n=this;return y(function*(){return n._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,C.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,C.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,C.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,C.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(t){var n=this;return y(function*(){const h=n._pdfViewer.isInPresentationMode||n._pdfViewer.isChangingPresentationMode,{id:S,siblings:u,command:m,value:g}=t;if(!S){switch(m){case"clear":console.clear();break;case"error":console.error(g);break;case"layout":if(h)return;const R=(0,b.apiPageLayoutToViewerModes)(g);n._pdfViewer.spreadMode=R.spreadMode;break;case"page-num":n._pdfViewer.currentPageNumber=g+1;break;case"print":yield n._pdfViewer.pagesPromise,n._eventBus.dispatch("print",{source:n});break;case"println":console.log(g);break;case"zoom":if(h)return;n._pdfViewer.currentScaleValue=g;break;case"SaveAs":n._eventBus.dispatch("save",{source:n});break;case"FirstPage":n._pdfViewer.currentPageNumber=1;break;case"LastPage":n._pdfViewer.currentPageNumber=n._pdfViewer.pagesCount;break;case"NextPage":n._pdfViewer.nextPage();break;case"PrevPage":n._pdfViewer.previousPage();break;case"ZoomViewIn":if(h)return;n._pdfViewer.increaseScale();break;case"ZoomViewOut":if(h)return;n._pdfViewer.decreaseScale()}return}if(h&&t.focus)return;delete t.id,delete t.siblings;const d=u?[S,...u]:[S];for(const R of d){const k=document.getElementById(R);k?k.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:t})):n._pdfDocument?.annotationStorage.setValue(R,t)}})()}_dispatchPageOpen(t,n=!1){var h=this;return y(function*(){const S=h._pdfDocument,u=h._visitedPages;if(n&&(h._closeCapability=(0,C.createPromiseCapability)()),!h._closeCapability)return;const m=h._pdfViewer.getPageView(t-1);if(m?.renderingState!==b.RenderingStates.FINISHED)return void h._pageOpenPending.add(t);h._pageOpenPending.delete(t);const g=y(function*(){const d=yield u.has(t)?null:m.pdfPage?.getJSActions();S===h._pdfDocument&&(yield h._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:d}))})();u.set(t,g)})()}_dispatchPageClose(t){var n=this;return y(function*(){const h=n._pdfDocument,S=n._visitedPages;if(!n._closeCapability||n._pageOpenPending.has(t))return;const u=S.get(t);u&&(S.set(t,null),yield u,h===n._pdfDocument&&(yield n._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:t})))})()}_getDocProperties(){var t=this;return y(function*(){if(t._docPropertiesLookup)return t._docPropertiesLookup(t._pdfDocument);const{docPropertiesLookup:n}=x(24);return n(t._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,C.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:t}=x(24);return new t(this._sandboxBundleSrc)}_destroyScripting(){var t=this;return y(function*(){if(!t._scripting)return t._pdfDocument=null,void t._destroyCapability?.resolve();t._closeCapability&&(yield Promise.race([t._closeCapability.promise,new Promise(n=>{setTimeout(n,1e3)})]).catch(n=>{}),t._closeCapability=null),t._pdfDocument=null;try{yield t._scripting.destroySandbox()}catch{}for(const[n,h]of t._internalEvents)t._eventBus._off(n,h);t._internalEvents.clear();for(const[n,h]of t._domEvents)window.removeEventListener(n,h,!0);t._domEvents.clear(),t._pageOpenPending.clear(),t._visitedPages.clear(),t._scripting=null,delete t._mouseState.isDown,t._ready=!1,t._destroyCapability?.resolve()})()}}},(H,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GenericScripting=void 0,_.docPropertiesLookup=function C(t){return A.apply(this,arguments)};var b=x(3);function A(){return(A=y(function*(t){const h="".split("#")[0];let{info:S,metadata:u,contentDispositionFilename:m,contentLength:g}=yield t.getMetadata();if(!g){const{length:d}=yield t.getDownloadInfo();g=d}return{...S,baseURL:h,filesize:g,filename:m||(0,b.getPdfFilenameFromUrl)(""),metadata:u?.getRaw(),authors:u?.get("dc:creator"),numPages:t.numPages,URL:""}})).apply(this,arguments)}_.GenericScripting=class v{constructor(n){this._ready=(0,b.loadScript)(n,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(n){var h=this;return y(function*(){(yield h._ready).create(n)})()}dispatchEventInSandbox(n){var h=this;return y(function*(){const S=yield h._ready;setTimeout(()=>S.dispatchEvent(n),0)})()}destroySandbox(){var n=this;return y(function*(){(yield n._ready).nukeSandbox()})()}}}],W={};function V(H){var _=W[H];if(void 0!==_)return _.exports;var x=W[H]={exports:{}};return N[H](x,x.exports,V),x.exports}var D={};return(()=>{var H=D;Object.defineProperty(H,"__esModule",{value:!0}),Object.defineProperty(H,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return A.AnnotationLayerBuilder}}),Object.defineProperty(H,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return _.DefaultAnnotationLayerFactory}}),Object.defineProperty(H,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return _.DefaultStructTreeLayerFactory}}),Object.defineProperty(H,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return _.DefaultTextLayerFactory}}),Object.defineProperty(H,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return _.DefaultXfaLayerFactory}}),Object.defineProperty(H,"DownloadManager",{enumerable:!0,get:function(){return v.DownloadManager}}),Object.defineProperty(H,"EventBus",{enumerable:!0,get:function(){return t.EventBus}}),Object.defineProperty(H,"GenericL10n",{enumerable:!0,get:function(){return n.GenericL10n}}),Object.defineProperty(H,"LinkTarget",{enumerable:!0,get:function(){return x.LinkTarget}}),Object.defineProperty(H,"NullL10n",{enumerable:!0,get:function(){return h.NullL10n}}),Object.defineProperty(H,"PDFFindController",{enumerable:!0,get:function(){return S.PDFFindController}}),Object.defineProperty(H,"PDFHistory",{enumerable:!0,get:function(){return u.PDFHistory}}),Object.defineProperty(H,"PDFLinkService",{enumerable:!0,get:function(){return x.PDFLinkService}}),Object.defineProperty(H,"PDFPageView",{enumerable:!0,get:function(){return m.PDFPageView}}),Object.defineProperty(H,"PDFScriptingManager",{enumerable:!0,get:function(){return g.PDFScriptingManager}}),Object.defineProperty(H,"PDFSinglePageViewer",{enumerable:!0,get:function(){return C.PDFSinglePageViewer}}),Object.defineProperty(H,"PDFViewer",{enumerable:!0,get:function(){return C.PDFViewer}}),Object.defineProperty(H,"ProgressBar",{enumerable:!0,get:function(){return b.ProgressBar}}),Object.defineProperty(H,"SimpleLinkService",{enumerable:!0,get:function(){return x.SimpleLinkService}}),Object.defineProperty(H,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return d.StructTreeLayerBuilder}}),Object.defineProperty(H,"TextLayerBuilder",{enumerable:!0,get:function(){return R.TextLayerBuilder}}),Object.defineProperty(H,"XfaLayerBuilder",{enumerable:!0,get:function(){return k.XfaLayerBuilder}}),Object.defineProperty(H,"parseQueryString",{enumerable:!0,get:function(){return b.parseQueryString}});var _=V(1),x=V(5),b=V(6),C=V(10),A=V(2),v=V(16),t=V(17),n=V(18),h=V(4),S=V(20),u=V(22),m=V(12),g=V(23),d=V(7),R=V(8),k=V(9)})(),D})(),G.exports=V()},3414:()=>{},172:()=>{},2001:()=>{},3779:()=>{},6558:()=>{},2258:()=>{},7156:G=>{function o(i,O,w,r,E,T,y){try{var N=i[T](y),W=N.value}catch(V){return void w(V)}N.done?O(W):Promise.resolve(W).then(r,E)}G.exports=function P(i){return function(){var O=this,w=arguments;return new Promise(function(r,E){var T=i.apply(O,w);function y(W){o(T,r,E,y,N,"next",W)}function N(W){o(T,r,E,y,N,"throw",W)}y(void 0)})}},G.exports.__esModule=!0,G.exports.default=G.exports},6521:G=>{G.exports=function o(P,i){if(i.has(P))throw new TypeError("Cannot initialize the same private elements twice on an object")},G.exports.__esModule=!0,G.exports.default=G.exports},8912:G=>{G.exports=function o(P,i){return i.get?i.get.call(P):i.value},G.exports.__esModule=!0,G.exports.default=G.exports},3448:G=>{G.exports=function o(P,i,O){if(i.set)i.set.call(P,O);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=O}},G.exports.__esModule=!0,G.exports.default=G.exports},2625:G=>{G.exports=function o(P,i){if(P!==i)throw new TypeError("Private static access of wrong provenance")},G.exports.__esModule=!0,G.exports.default=G.exports},2506:G=>{G.exports=function o(P,i){if(void 0===P)throw new TypeError("attempted to "+i+" private static field before its declaration")},G.exports.__esModule=!0,G.exports.default=G.exports},4069:G=>{G.exports=function o(P,i,O){if(!i.has(P))throw new TypeError("attempted to "+O+" private field on non-instance");return i.get(P)},G.exports.__esModule=!0,G.exports.default=G.exports},468:(G,o,P)=>{var i=P(8912),O=P(4069);G.exports=function w(r,E){var T=O(r,E,"get");return i(r,T)},G.exports.__esModule=!0,G.exports.default=G.exports},9159:(G,o,P)=>{var i=P(6521);G.exports=function O(w,r,E){i(w,r),r.set(w,E)},G.exports.__esModule=!0,G.exports.default=G.exports},5661:(G,o,P)=>{var i=P(3448),O=P(4069);G.exports=function w(r,E,T){var y=O(r,E,"set");return i(r,y,T),T},G.exports.__esModule=!0,G.exports.default=G.exports},4467:G=>{G.exports=function o(P,i,O){if(!i.has(P))throw new TypeError("attempted to get private field on non-instance");return O},G.exports.__esModule=!0,G.exports.default=G.exports},1860:(G,o,P)=>{var i=P(6521);G.exports=function O(w,r){i(w,r),r.add(w)},G.exports.__esModule=!0,G.exports.default=G.exports},1280:(G,o,P)=>{var i=P(8912),O=P(2625),w=P(2506);G.exports=function r(E,T,y){return O(E,T),w(y,"get"),i(E,y)},G.exports.__esModule=!0,G.exports.default=G.exports},2306:(G,o,P)=>{var i=P(3448),O=P(2625),w=P(2506);G.exports=function r(E,T,y,N){return O(E,T),w(y,"set"),i(E,y,N),N},G.exports.__esModule=!0,G.exports.default=G.exports},5764:(G,o,P)=>{var i=P(2625);G.exports=function O(w,r,E){return i(w,r),E},G.exports.__esModule=!0,G.exports.default=G.exports},8416:(G,o,P)=>{var i=P(4062);G.exports=function O(w,r,E){return(r=i(r))in w?Object.defineProperty(w,r,{value:E,enumerable:!0,configurable:!0,writable:!0}):w[r]=E,w},G.exports.__esModule=!0,G.exports.default=G.exports},5036:(G,o,P)=>{var i=P(8698).default;G.exports=function O(w,r){if("object"!==i(w)||null===w)return w;var E=w[Symbol.toPrimitive];if(void 0!==E){var T=E.call(w,r||"default");if("object"!==i(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(w)},G.exports.__esModule=!0,G.exports.default=G.exports},4062:(G,o,P)=>{var i=P(8698).default,O=P(5036);G.exports=function w(r){var E=O(r,"string");return"symbol"===i(E)?E:String(E)},G.exports.__esModule=!0,G.exports.default=G.exports},8698:G=>{function o(P){return G.exports=o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},G.exports.__esModule=!0,G.exports.default=G.exports,o(P)}G.exports=o,G.exports.__esModule=!0,G.exports.default=G.exports}}]);